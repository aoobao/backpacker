{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/image/travel/10.jpg","webpack:///./src/assets/image/work/17.png","webpack:///./src/assets/image/work/30.png","webpack:///./src/assets/image/work/28.png","webpack:///./src/assets/image/travel/21.jpg","webpack:///./src/assets/image/travel/28.jpg","webpack:///./src/assets/image/work/11.png","webpack:///./src/assets/image/work/14.png","webpack:///./src/assets/image/travel/11.jpg","webpack:///./src/assets/image/travel/7.jpg","webpack:///./src/assets/image/work/4.png","webpack:///./src/assets/image/travel/25.jpg","webpack:///./src/views/GameView/Reward/ChargePosition.vue?8c84","webpack:///./src/assets/image/work/23.png","webpack:///./src/assets/image/work/27.png","webpack:///./src/App.vue?3183","webpack:///./src/assets/image/travel/26.jpg","webpack:///./src/components/TouchView/touch.gif","webpack:///./src/assets/image/work/20.png","webpack:///./src/assets/image/work/2.png","webpack:///./src/views/GameView/ThreeWrap.vue?ead6","webpack:///./src/assets/image/travel/23.jpg","webpack:///./src/assets/image/work/26.png","webpack:///./src/assets/image/travel/12.jpg","webpack:///./src/assets/image/work/12.png","webpack:///./src/assets/image/travel/9.jpg","webpack:///./src/assets/image/travel/4.jpg","webpack:///./src/assets/image/travel/6.jpg","webpack:///./src/views/Home.vue?1e4c","webpack:///./src/views/GameView/index.vue?dc94","webpack:///./src/assets/image/travel/5.jpg","webpack:///./src/assets/image/work/10.png","webpack:///./src/assets/image/work/18.png","webpack:///./src/assets/image/travel/24.jpg","webpack:///./src/assets/image/travel/17.jpg","webpack:///./src/assets/image/travel/18.jpg","webpack:///./src/components/Modal/Modal.vue?96cb","webpack:///./src/assets/image/work/3.png","webpack:///./src/assets/image/travel/30.jpg","webpack:///./src/assets/image/logo.png","webpack:///./src/assets/image/travel/20.jpg","webpack:///./src/components/NumberView/index.vue?61aa","webpack:///./src/assets/image/travel/19.jpg","webpack:///./src/assets/image/work/15.png","webpack:///./src/components/TouchView/index.vue?bcb0","webpack:///./src/assets/image/work/31.png","webpack:///./src/assets/image/travel/31.jpg","webpack:///./src/assets/image/work/19.png","webpack:///./src/App.vue","webpack:///./src/store/hook.ts","webpack:///./src/assets/types.ts","webpack:///./src/assets/three/lib.ts","webpack:///./src/assets/index.ts","webpack:///./src/assets/object.json.ts","webpack:///./src/config.ts","webpack:///./src/assets/bus.ts","webpack:///./src/assets/setting.ts","webpack:///./src/store/hooks/game-info.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Home.vue","webpack:///./src/views/GameMenu.vue","webpack:///./src/components/UserCard.vue","webpack:///./src/components/Modal/Modal.vue","webpack:///./src/components/Modal/Modal.vue?424e","webpack:///./src/components/Modal/Modal.vue?877b","webpack:///./src/components/CheckBox/index.vue","webpack:///./src/components/CheckBox/index.vue?cb55","webpack:///./src/components/CheckBox/index.vue?35f0","webpack:///./src/components/UserCard.vue?119b","webpack:///./src/components/UserCard.vue?c67b","webpack:///./src/assets/preload.ts","webpack:///./src/views/GameMenu.vue?6d05","webpack:///./src/views/GameMenu.vue?1df4","webpack:///./src/views/GameView/index.vue","webpack:///./src/views/GameView/ThreeWrap.vue","webpack:///./src/assets/physics.ts","webpack:///./src/views/GameView/ThreeWrap.vue?3983","webpack:///./src/views/GameView/ThreeWrap.vue?1aec","webpack:///./src/assets/canvas-background.ts","webpack:///./src/views/GameView/WorkMap.vue","webpack:///./src/views/GameView/WorkMap.vue?be17","webpack:///./src/views/GameView/TravelMap.vue","webpack:///./src/views/GameView/HotCityView.vue","webpack:///./src/views/GameView/HotCityView.vue?10e6","webpack:///./src/assets/jss.ts","webpack:///./src/assets/three/BaseElement/index.style.ts","webpack:///./src/assets/three/BaseElement/index.ts","webpack:///./src/assets/three/PointSelect/index.style.ts","webpack:///./src/assets/three/PointSelect/index.ts","webpack:///./src/views/GameView/TravelMap.vue?b47e","webpack:///./src/views/GameView/TravelMap.vue?97ea","webpack:///./src/views/GameView/HandUpDisplay.vue","webpack:///./src/components/CountUp.vue","webpack:///./src/components/CountUp.vue?b2ae","webpack:///./src/components/CountUp.vue?36ca","webpack:///./src/views/GameView/HandUpDisplay.vue?b376","webpack:///./src/views/GameView/HandUpDisplay.vue?47a6","webpack:///./src/assets/object/Player.ts","webpack:///./src/assets/object/cube-material.ts","webpack:///./src/assets/object/Cube.ts","webpack:///./src/components/TouchView/index.vue","webpack:///./src/components/TouchView/index.vue?ddec","webpack:///./src/components/TouchView/index.vue?47eb","webpack:///./src/components/NumberView/index.vue","webpack:///./src/components/NumberView/index.vue?3f58","webpack:///./src/components/NumberView/index.vue?a88e","webpack:///./src/views/GameView/StepNumber.vue","webpack:///./src/views/GameView/StepNumber.vue?b0b1","webpack:///./src/views/GameView/StepNumber.vue?58e6","webpack:///./src/views/GameView/OverView.vue","webpack:///./src/views/GameView/OverView.vue?9013","webpack:///./src/views/GameView/OverView.vue?e18c","webpack:///./src/components/WinView/index.vue","webpack:///./src/components/WinView/index.vue?f641","webpack:///./src/views/GameView/Reward/index.vue","webpack:///./src/views/GameView/Reward/ChargePosition.vue","webpack:///./src/views/GameView/Reward/ChargePosition.vue?de17","webpack:///./src/views/GameView/Reward/ChargePosition.vue?4dae","webpack:///./src/views/GameView/Reward/AddLevel.vue","webpack:///./src/views/GameView/Reward/AddLevel.vue?295b","webpack:///./src/views/GameView/Reward/AddLevel.vue?b945","webpack:///./src/views/GameView/Reward/index.vue?9e6a","webpack:///./src/views/GameView/Reward/index.vue?ce84","webpack:///./src/assets/ai.ts","webpack:///./src/views/GameView/index.vue?6a04","webpack:///./src/views/GameView/index.vue?5eea","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/assets/image/work/25.png","webpack:///./src/assets/image/work/22.png","webpack:///./src/assets/image/travel/2.jpg","webpack:///./src/components/CheckBox/index.vue?aff4","webpack:///./src/views/GameView/Reward/AddLevel.vue?5e2f","webpack:///./src/components/UserCard.vue?50cf","webpack:///./src/assets/image/icon/temp.jpg","webpack:///./src/assets/image/work/6.png","webpack:///./src/assets/image/travel/22.jpg","webpack:///./src/assets/image/work/7.png","webpack:///./src/views/GameMenu.vue?c273","webpack:///./src/assets/image/travel/13.jpg","webpack:///./src/assets/image/travel/14.jpg","webpack:///./src/assets/image/work/1.png","webpack:///./src/assets/image/travel/27.jpg","webpack:///./src/assets/image/travel/15.jpg","webpack:///./src/assets/image/travel/3.jpg","webpack:///./src/assets/image/travel/29.jpg","webpack:///./src/assets/image/travel/8.jpg","webpack:///./src/views/GameView/OverView.vue?bb7a","webpack:///./src/views/GameView/StepNumber.vue?b784","webpack:///./src/views/GameView/HandUpDisplay.vue?1cb6","webpack:///./src/assets/image/travel/1.jpg","webpack:///./src/assets/image/work/9.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","useProviders","funcs","forEach","func","token","useInjector","type","root","Error","PointType","createThreeEnvironment","dom","rendererParameters","antialias","alpha","env","domElement","width","offsetWidth","height","offsetHeight","scene","Scene","raycaster","Raycaster","clock","Clock","renderer","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","appendChild","install","THREE","starGeometry","starMaterial","player1Rotation","Math","PI","player3Rotation","player4Rotation","rewards","rewardTextList","text","fontSize","color","asia_color","europe_asia_color","africa_color","europ_color","south_america_color","nouth_america_color","travelMapList1","index","position","START","options","playerId","rotation","CITY","texts","BIG_CITY","player1MapList","WORK","reward","REWARD","rewardIndex","player2MapList","player3MapList","player4MapList","SETTING","winPoints","initMoney","PREFIX","bus","mitt","ACTION","WINDOW_RESIZE","RENDER","WIN","CHANGE_POSITION","ADD_LEVEL","APPEND_MESSAGE","setItem","set","getItem","removeItem","remove","createAnimation","from","to","duration","easing","Easing","Quadratic","Out","tween","Tween","start","appendMessage","msg","player","isShowToast","st","showMessage","emit","message","title","Promise","resolve","confirm","then","catch","randItemInList","list","max","randBetween","min","num","floor","random","randPM","delay","second","setTimeout","getAngle","px","py","mx","my","x","abs","y","z","sqrt","pow","cos","radian","acos","angle","createStar","pts","numPts","a","Vector2","sin","shape","Shape","randomPoints","Vector3","MathUtils","randFloat","extrudeSettings","bevelEnabled","depth","ExtrudeGeometry","MeshLambertMaterial","wireframe","star","Mesh","getCenterRect","maxWidth","maxHeight","aspect","maxAspect","addEventListener","document","body","orientation","defalutPerson","createPerson","id","isAI","color2","addressIndex","person","money","map","map0Index","undefined","map1Index","points","win","workMapList","travelMapList","getNextAddress","mapIndex","mapList","address","getOutOrderTravelMapList","filter","temp","initGameState","players","activeMap","hotCitys","GameStateStore","map0","map1","physicsWorld","gameState","resetGameState","w","level","addressList","hotList8","hotList7","hostList6","playerIds","ids","currentPlayerId","setGameState","gs","setEnv","e","setMap0","setMap1","setPhysicsWorld","toggleNextPlayer","hasPerson","some","hasWin","playerIndex","findIndex","current","nextPlayer","changeMoney","find","addPoint","findByPlayerId","count","getAddressByIndex","getCurrentAddress","removeHotCity","cityList","city","hot8","lists","hot7","hot6","hot5","setup","render","class","status","startNewGame","readRecord","gameOver","loadingPercent","getRecord","style","startGame","ref","visible","closedHandle","userList","user","placeholder","show","mask","enter-active-class","leave-active-class","afterLeave","modalStyle","showClose","close","props","String","default","Boolean","defalut","perspective","__scopeId","divStyle","checkChange","size","components","Modal","CheckBox","startList","isNone","FILE_TYPE","FILE_LIST","path","GLTF","FBX","IMAGE","preLoadAllFile","onProgress","reject","total","isError","fileItem","loadFile","obj","file","err","getFile","getFileById","loadImage","loadGltf","loadFbx","loader","FBXLoader","load","GLTFLoader","gltf","ImageLoader","image","UserCard","ctx","store","gameStatus","alert","startRef","onprogress","finishCount","map1Init","map2Init","isFinish","enabled","isComplete","WIDTH","cubeMaterial","Material","fixedTimeStep","maxSubSteps","bodyGround","bodyList","this","world","World","gravity","broadphase","NaiveBroadphase","material","wallMaterial","Body","mass","Vec3","Plane","wall1","quaternion","setFromAxisAngle","wall2","wall3","wall4","groundContactMaterial","ContactMaterial","friction","restitution","wallContactMaterial","addContactMaterial","addBody","on","cube","speed","pos","instance","qua","halfExtents","bodyBox","Box","Quaternion","linearDamping","angularDamping","rendAngular","velocity","angularVelocity","box","timer","Date","getTime","res","delta","step","syncInstanceValue","newPosition","newQuaternion","off","directionalLight","wrap","tick","initCameraAndControls","camera","PerspectiveCamera","up","control","maxDistance","mouseButtons","wheel","ZOOM","right","NONE","touches","two","TOUCH_ZOOM","three","TOUCH_ZOOM_TRUCK","dollySpeed","minPolarAngle","maxPolarAngle","initLight","light","AmbientLight","hemiLight","HemisphereLight","DirectionalLight","add","initPhysicsWorld","resetSize","updateProjectionMatrix","console","log","animate","requestAnimationFrame","getDelta","update","hasUpdated","cancelAnimationFrame","clear","removeChild","FONT_STYLE","createHotCityCard","pointValue","geometry","PlaneGeometry","createCityCanvas","canvas","texture","CanvasTexture","needsUpdate","MeshBasicMaterial","mesh","createElement","getContext","save","fillStyle","fillRect","borderWidth","font","textAlign","textBaseline","areaText","country","fillText","restore","rectRange","drawImage","strokeStyle","strokeRect","createWorkCanvas","imageUrl","offsetTop","Image","src","onload","onerror","createRewardCanvas","color1","rewardText","createType0Canvas","translate","rotate","createStartPointCanvas","backgroundColor","createBigCityCanvas","beginPath","r2","x1","y1","lineTo","closePath","fill","isLoad","TextureLoader","mapGeometry","mapMaterial","side","DoubleSide","logoGeometry","logoTexture","logoMaterial","transparent","logo","val","stop","target","Linear","None","onComplete","createMaterial","workAddressCount","init","addStar","addressName","scale","addressMesh","children","Quartic","In","lookAtPosition","point","azimuthVec","redian","round","azimuthAngle","azimuthRadian","rotateTo","polarAngle","dispose","positions","hotCityGroups","citys","group","Group","cityIndex","createUseStyles","styles","sheet","createStyleSheet","attach","classes","base_element_body","useStyles","opacity","opt","isShow","isTop","extData","offset","BoxGeometry","div","className","display","el","element","left","top","innerHTML","tempV","updateWorldMatrix","getWorldPosition","project","setFromCamera","intersectedObjects","intersectObjects","clearTimeout","hide","point_select","backgroundImage","backgroundSize","opts","clickHandle","click","HotCityView","hotCityRef","getPointValue","star8","star7","star6","star5","initPosition","hot","parent","chooseStartPoint","startPoints","selectPoints","sp","destroy","hotCity","showMore","statusText","messageList","toggleShowMore","changeActiveMap","showValue","realValue","Number","formatFun","Function","localDuration","easingFun","b","localStartVal","startTime","rAf","countDown","newVal","oldval","timestamp","progress","CountUp","scroll","scrollToBottom","getStyle","scrollTopValue","messageHeight","scrollHeight","stepScrollTop","scrollTop","appendText","currentPlayer","currentId","ARROW_POSITION_Y","actions","clone","arrow","isActive","mixer","AnimationMixer","scaleNumber","rotateX","Color","traverse","includes","initAction","mapAddress","fixLookat","fadeToAction","states","emotes","animations","clip","action","clipAction","indexOf","clampWhenFinished","loop","LoopOnce","active","actionType","previousAction","activeAction","fadeOut","reset","setEffectiveTimeScale","setEffectiveWeight","fadeIn","play","targetPos","getOffset","rotationY","cycleTime","MIN_POSITION_Y","deltaY","offsets","createCanvas","grd","createRadialGradient","addColorStop","lineWidth","shadowBlur","shadowColor","createCircle","radius","arc","create1","create2","create3","create4","create5","create6","cm","Texture","createCubeMaterials","materials","addGroup","toString","maxZ","maxName","addBox","nowHeightPercent","toResolve","isWaiting","minHeightPercent","isUp","closeDelay","selectStep","resolveFun","playerStatus","cost","sort","winA","winB","selectPlayers","cancelSelect","selectPlayerId","isok","selectIds","workAddressList","selectAddress","submit","unionReward","join","WinView","ChargePosition","AddLevel","winRef","chargeRef","levelRef","addPoints","changePosition","chargeMoney","addLevels","addressIds","change","otherPlayerId","otherPlayer","currentIndex","targetIndex","targetPlayer","changeId","sum","isWin","playWin","chooseGoTravel","chooseTravelContinue","getStep","maxPoints","bestStep","ThreeWrap","WorkMap","TravelMap","HandUpDisplay","TouchView","NumberView","RewardView","Reward","StepNumber","OverView","numberRef","workMap","travelMap","touchRef","stepRef","rewardRef","overRef","playerFile","cube2","map1Finish","map2Finish","playerChangePosition","addLevelByAddressIndex","initMapStar","setLookAt","gameLoop","getPlayerById","setActiveByPlayerId","setActive","changeMap","travelContinue","isTravel","getValue","isChargeTravel","beginRun","goNext","goTravel","stopAnimate","startAddress","detailWorkEvent","detailTravelEvent","needNext","changeAddress","addLevel","workPlayer","isWork","GameMenu","GameView","routes","component","Home","router","history","app","App","use","mount"],"mappings":"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","file":"js/app.5b0c9aa0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"data:image/jpeg;base64,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\"","module.exports = __webpack_public_path__ + \"img/17.bb59f02d.png\";","module.exports = __webpack_public_path__ + \"img/30.9acb5b92.png\";","module.exports = __webpack_public_path__ + \"img/28.482fb8a1.png\";","module.exports = __webpack_public_path__ + \"img/21.47e99f36.jpg\";","module.exports = __webpack_public_path__ + \"img/28.965f0cbd.jpg\";","module.exports = __webpack_public_path__ + \"img/11.c7bae8e8.png\";","module.exports = __webpack_public_path__ + \"img/14.bfc458aa.png\";","module.exports = __webpack_public_path__ + \"img/11.6843ac74.jpg\";","module.exports = __webpack_public_path__ + \"img/7.c82d9a0d.jpg\";","module.exports = __webpack_public_path__ + \"img/4.bfa90ab4.png\";","module.exports = __webpack_public_path__ + \"img/25.e9995293.jpg\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChargePosition.vue?vue&type=style&index=0&id=4dbfb4cc&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/23.dfb71498.png\";","module.exports = __webpack_public_path__ + \"img/27.ce16585c.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=35f48b5d&lang=css\"","module.exports = __webpack_public_path__ + \"img/26.23c27c36.jpg\";","module.exports = __webpack_public_path__ + \"img/touch.172ce1da.gif\";","module.exports = __webpack_public_path__ + \"img/20.5cee90c9.png\";","module.exports = __webpack_public_path__ + \"img/2.b6a00cbd.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ThreeWrap.vue?vue&type=style&index=0&id=0a40718a&lang=scss&scoped=true\"","module.exports = \"data:image/jpeg;base64,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\"","module.exports = __webpack_public_path__ + \"img/26.c3980a6d.png\";","module.exports = __webpack_public_path__ + \"img/12.0c8a5cfb.jpg\";","module.exports = __webpack_public_path__ + \"img/12.cdaa6d0b.png\";","module.exports = __webpack_public_path__ + \"img/9.19846f91.jpg\";","module.exports = __webpack_public_path__ + \"img/4.ea20e234.jpg\";","module.exports = \"data:image/jpeg;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=085980cb&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=7bf73162&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/5.65102b4e.jpg\";","module.exports = __webpack_public_path__ + \"img/10.300a57db.png\";","module.exports = __webpack_public_path__ + \"img/18.71cf6b70.png\";","module.exports = __webpack_public_path__ + \"img/24.21f4f6b8.jpg\";","module.exports = __webpack_public_path__ + \"img/17.fd7aa41a.jpg\";","module.exports = \"data:image/jpeg;base64,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\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=d2679ec2&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/3.e2f09d94.png\";","module.exports = __webpack_public_path__ + \"img/30.692d805b.jpg\";","module.exports = __webpack_public_path__ + \"img/logo.f902024c.png\";","module.exports = __webpack_public_path__ + \"img/20.38403132.jpg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=c6236b9a&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/19.290aabdf.jpg\";","module.exports = __webpack_public_path__ + \"img/15.3e60ade9.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=222d2648&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/31.f7956f64.png\";","module.exports = __webpack_public_path__ + \"img/31.0e0a4b41.jpg\";","module.exports = __webpack_public_path__ + \"img/19.8fb05aca.png\";","<template>\r\n  <router-view />\r\n</template>\r\n<script lang=\"ts\">\r\nimport { useProviders } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { defineComponent, onUnmounted } from 'vue'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    useProviders(GameStateStore)\r\n  },\r\n})\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  /* font-family: Avenir, Helvetica, Arial, sans-serif; */\r\n  font-family: FangSong NSimSun SimSun;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-size: 3rem;\r\n}\r\n</style>\r\n","import { provide, inject } from 'vue'\r\n\r\n//定义一个用于状态共享的hook函数的标准接口\r\nexport interface FunctionalStore<T extends object> {\r\n  (...args: any[]): T\r\n  token?: symbol\r\n  root?: T\r\n}\r\n\r\n//对原生provide进行封装\r\n\r\n//由于inject函数只会从父组件开始查找，所以useProvider默认返回hook函数的调用结果，以防同组件层级需要使用\r\nexport function useProvider<T extends object>(func: FunctionalStore<T>): T {\r\n  !func.token && (func.token = Symbol('functional store'))\r\n\r\n  const depends = func()\r\n  provide(func.token, depends)\r\n  return depends\r\n}\r\n\r\n// 可以一次传入多个hook函数， 统一管理\r\nexport function useProviders(...funcs: FunctionalStore<any>[]) {\r\n  funcs.forEach(func => {\r\n    !func.token && (func.token = Symbol('functional store'))\r\n    provide(func.token, func())\r\n  })\r\n}\r\n\r\n//对原生inject进行封装\r\n\r\ntype InjectType = 'root' | 'optional'\r\n\r\n//接收第二个参数，'root'表示直接全局使用；optional表示可选注入，防止父组件的provide并未传入相关hook\r\nexport function useInjector<T extends object>(func: FunctionalStore<T>, type?: InjectType) {\r\n  const token = func.token\r\n  const root = func.root\r\n  if (!token) {\r\n    throw new Error('未设置token')\r\n  }\r\n  switch (type) {\r\n    case 'optional':\r\n      return inject<T>(token) || func.root || null\r\n    case 'root':\r\n      if (!func.root) func.root = func()\r\n      return func.root\r\n    default:\r\n      if (inject(token)) {\r\n        return inject<T>(token)\r\n      }\r\n      if (root) return func.root\r\n      throw new Error(`状态钩子函数${func.name}未在上层组件通过调用useProvider提供`)\r\n  }\r\n}\r\n","import { THREE, CameraControls } from '@/assets/three/lib'\r\n\r\nexport interface PersonType {\r\n  id: number\r\n  name: string\r\n  isAI: boolean\r\n  // color: number // 0xc4226a\r\n  color: string\r\n  color2: string\r\n  money: number // 钱\r\n  index: number // 人物所在地图上位置\r\n  map: 0 | 1 // 0 打工地图 1 旅游地图\r\n  map0Index: number // 打工地图位置\r\n  map1Index: number // 旅游地图位置\r\n  points: number // 积分\r\n  win: number // 0:进行中,1 第1名 2:第2名 3:第3名 4:第4名\r\n}\r\n\r\nexport interface RewardText {\r\n  text: string\r\n  height: number\r\n  color?: string\r\n  fontSize?: number // 宽度百分比\r\n}\r\n\r\nexport interface Options {\r\n  name?: string\r\n  playerId: number\r\n  rotation?: number\r\n  // color?: string\r\n  imageUrl?: string\r\n  rewardIndex?: number // 机会类型 0 得到1分 1 可以选择和某个人交换位置 2 向所有人收取200元 3 在你的2张打工卡上各放1个经验标记\r\n  reward?: [number, number, number, number] // 打工点奖励 [新手 一级 二级 老手] Array<number>\r\n  level?: number // 当前奖励级别\r\n  texts?: Array<string> // ['亚洲区','印度','泰姬','玛哈陵']\r\n  color?: string\r\n}\r\n\r\n// 0 发薪日 1 打工地址 2 机会 3 旅游城市\r\n// export type PointType = 0 | 1 | 2 | 3\r\nexport enum PointType {\r\n  START = 0,\r\n  WORK = 1,\r\n  REWARD = 2,\r\n  CITY = 3,\r\n  BIG_CITY = 4, // 正方形方块比较大的旅游景点样式\r\n}\r\n\r\nexport interface MapAddress {\r\n  index: number // 地图上的位置 0  => 王叔叔发薪日 对应上面人物的初始位置\r\n  width: number\r\n  height: number\r\n  // position: Array<number> // [x,y,z]\r\n  position: [number, number, number]\r\n  type: PointType // 0 发薪日 1 打工地址 2 机会 3 旅游城市\r\n  options: Options // 其他一些属性\r\n}\r\n\r\nexport interface GameState {\r\n  players: Array<PersonType>\r\n  activeMap: 0 | 1 //当前活动地图 0: 打工地图 1: 旅游地图\r\n  workMapList: Array<MapAddress>\r\n  travelMapList: Array<MapAddress>\r\n  currentPlayerId?: number\r\n  hotCitys: [Array<MapAddress>, Array<MapAddress>, Array<MapAddress>, Array<MapAddress>]\r\n  // env?: ThreeEnvironment\r\n}\r\n\r\nexport interface ThreeEnvironment {\r\n  domElement: HTMLElement\r\n  width: number\r\n  height: number\r\n  scene: THREE.Scene\r\n  renderer: THREE.WebGLRenderer\r\n  raycaster: THREE.Raycaster\r\n  clock: THREE.Clock\r\n  camera?: THREE.PerspectiveCamera\r\n  // camera?: THREE.OrthographicCamera\r\n  control?: CameraControls\r\n}\r\n\r\nexport interface RectType {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n}\r\n\r\nexport interface HotCity {\r\n  address: MapAddress\r\n  point: number\r\n}\r\n\r\n// 初始化three环境基本参数.\r\nexport function createThreeEnvironment(dom: HTMLElement, rendererParameters: THREE.WebGLRendererParameters = { antialias: true, alpha: true }) {\r\n  const env: ThreeEnvironment = {\r\n    domElement: dom,\r\n    width: dom.offsetWidth,\r\n    height: dom.offsetHeight,\r\n    scene: new THREE.Scene(),\r\n    raycaster: new THREE.Raycaster(),\r\n    clock: new THREE.Clock(),\r\n    renderer: new THREE.WebGLRenderer(rendererParameters),\r\n  }\r\n  env.renderer.setPixelRatio(window.devicePixelRatio)\r\n  env.renderer.setSize(dom.offsetWidth, dom.offsetHeight)\r\n  dom.appendChild(env.renderer.domElement)\r\n\r\n  // 相机和轨道控制器的设置容易不同,在业务代码中实现创建.\r\n  return env\r\n}\r\n","import * as THREE from 'three'\r\n\r\nimport CameraControls from 'camera-controls'\r\n\r\nCameraControls.install({ THREE })\r\n\r\nexport { THREE, CameraControls }\r\n","import TWEEN from '@tweenjs/tween.js'\r\nimport { Toast, ToastPosition, Dialog } from 'vant'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { PersonType, RectType } from './types'\r\nimport store from 'store'\r\nimport { PREFIX } from '@/config'\r\nimport { bus, ACTION } from '@/assets/bus'\r\n\r\nexport function setItem(name: string, value: any) {\r\n  const key = PREFIX + name\r\n  return store.set(key, value)\r\n}\r\n\r\nexport function getItem<T>(name: string): T {\r\n  const key = PREFIX + name\r\n  const value = store.get(key) as T\r\n  return value\r\n}\r\n\r\nexport function removeItem(name: string) {\r\n  const key = PREFIX + name\r\n  store.remove(key)\r\n}\r\n\r\nexport function numberToRgb(number: number) {\r\n  const r = ~~(number / 0xff00)\r\n  const g = ~~((number - r * 0x10000) / 0xff)\r\n  const b = number - r * 0x10000 - g * 0x100\r\n\r\n  return [r, g, b]\r\n}\r\n\r\nexport function stringToNumberColor(color: string): number {\r\n  const number = parseInt(color.slice(1), 16)\r\n  return number\r\n}\r\n\r\nexport function createAnimation(from: object, to: object, duration?: number, easing: (amount: number) => number = TWEEN.Easing.Quadratic.Out) {\r\n  const tween = new TWEEN.Tween(from)\r\n\r\n  tween.to(to, duration).easing(easing)\r\n\r\n  tween.start()\r\n\r\n  return tween\r\n}\r\n\r\nexport function appendMessage(msg: string, player: PersonType, isShowToast = true) {\r\n  if (isShowToast) {\r\n    const st = `玩家${player.name}${msg}`\r\n    showMessage(st)\r\n  }\r\n\r\n  bus.emit(ACTION.APPEND_MESSAGE, { message: msg, player: player })\r\n}\r\n\r\nexport function showMessage(msg: string, duration = 2000, position: ToastPosition = 'bottom') {\r\n  Toast({\r\n    message: msg,\r\n    duration,\r\n    position,\r\n  })\r\n}\r\n\r\nexport function confirm(text: string, title = '提示'): Promise<boolean> {\r\n  return new Promise(resolve => {\r\n    Dialog.confirm({\r\n      title: title,\r\n      message: text,\r\n    })\r\n      .then(() => {\r\n        resolve(true)\r\n      })\r\n      .catch(() => {\r\n        resolve(false)\r\n      })\r\n  })\r\n}\r\n\r\nexport function randItemInList<T>(list: Array<T>): T {\r\n  if (list.length === 0) throw new Error('数组长度为0')\r\n  const max = list.length - 1\r\n  const index = randBetween(0, max)\r\n  return list[index]\r\n}\r\n\r\nexport function randBetween(min: number, max: number) {\r\n  const num = Math.floor((max - min + 1) * Math.random())\r\n\r\n  return min + num\r\n}\r\n// 返回1 or -1\r\nexport function randPM() {\r\n  return Math.random() > 0.5 ? 1 : -1\r\n}\r\n\r\nexport function delay(second: number): Promise<void> {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      resolve()\r\n    }, second * 1000)\r\n  })\r\n}\r\n\r\nexport function printCamera() {\r\n  const store = useInjector(GameStateStore)\r\n  const camera = store?.env?.camera\r\n  if (!camera) {\r\n    console.warn('未实例化照相机')\r\n  }\r\n  console.log(`${camera?.position.x},${camera?.position.y},${camera?.position.z}`)\r\n}\r\n\r\nexport function getAngle(px: number, py: number, mx: number, my: number) {\r\n  const x = Math.abs(px - mx)\r\n  const y = Math.abs(py - my)\r\n  const z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\r\n  if (z == 0) return 0\r\n  const cos = y / z\r\n  const radian = Math.acos(cos) //用反三角函数求弧度\r\n\r\n  let angle = (180 * radian) / Math.PI //将弧度转换成角度\r\n  //因为算出来的值是[0,90),需要转成[0,360)\r\n  if (mx >= px) {\r\n    if (my >= py) {\r\n      angle = 90 - angle\r\n    } else {\r\n      angle = 270 + angle\r\n    }\r\n  } else {\r\n    if (my >= py) {\r\n      angle = 90 + angle\r\n    } else {\r\n      angle = 270 - angle\r\n    }\r\n  }\r\n  return angle\r\n}\r\n\r\n// const _pts: Array<THREE.Vector2> = []\r\nlet starGeometry: THREE.ExtrudeGeometry\r\nlet starMaterial: THREE.Material\r\n\r\nexport function createStar() {\r\n  if (!starGeometry) {\r\n    const pts: Array<THREE.Vector2> = []\r\n    const numPts = 5\r\n    for (let i = 0; i < numPts * 2; i++) {\r\n      const l = i % 2 == 1 ? 10 : 20\r\n\r\n      const a = (i / numPts) * Math.PI\r\n\r\n      pts.push(new THREE.Vector2(Math.cos(a) * l, Math.sin(a) * l))\r\n    }\r\n\r\n    const shape = new THREE.Shape(pts)\r\n\r\n    const randomPoints = []\r\n\r\n    for (let i = 0; i < 10; i++) {\r\n      randomPoints.push(new THREE.Vector3((i - 4.5) * 50, THREE.MathUtils.randFloat(-50, 50), THREE.MathUtils.randFloat(-50, 50)))\r\n    }\r\n    const extrudeSettings = {\r\n      // steps: 2,\r\n      bevelEnabled: false,\r\n      depth: 0.5,\r\n    }\r\n\r\n    starGeometry = new THREE.ExtrudeGeometry(shape, extrudeSettings)\r\n    starMaterial = new THREE.MeshLambertMaterial({\r\n      color: 0xff8000,\r\n      wireframe: false,\r\n    })\r\n  }\r\n\r\n  const star = new THREE.Mesh(starGeometry, starMaterial)\r\n\r\n  return star\r\n}\r\n\r\nexport function getCenterRect(width: number, height: number, maxWidth: number, maxHeight: number): RectType {\r\n  const aspect = width / height // 图片的宽高比\r\n  const maxAspect = maxWidth / maxHeight //容器的宽高比\r\n\r\n  const result: RectType = {\r\n    x: 0,\r\n    y: 0,\r\n    width: 0,\r\n    height: 0,\r\n  }\r\n\r\n  if (maxAspect > aspect) {\r\n    // 容器的宽度 比 图片的宽度 大\r\n    result.y = 0\r\n    result.height = maxHeight\r\n    result.width = maxHeight * aspect\r\n\r\n    result.x = (maxWidth - result.width) / 2\r\n  } else {\r\n    // 容器的高度 比图片的高度长\r\n    result.x = 0\r\n    result.width = maxWidth\r\n    result.height = maxWidth / aspect\r\n    result.y = (maxHeight - result.height) / 2\r\n  }\r\n\r\n  return result\r\n}\r\n","import { MapAddress, PointType, RewardText } from './types'\r\n\r\nconst player1Rotation = (90 * Math.PI) / 180\r\nconst player3Rotation = (-90 * Math.PI) / 180\r\nconst player4Rotation = (180 * Math.PI) / 180\r\n\r\nconst rewards: Array<[number, number, number, number]> = [\r\n  [400, 700, 1200, 2500],\r\n  [300, 600, 1100, 2000],\r\n  [200, 400, 800, 1500],\r\n  [200, 400, 800, 1500],\r\n  [100, 300, 700, 1200],\r\n  [100, 300, 700, 1200],\r\n]\r\n\r\nexport const rewardTextList: Array<Array<RewardText>> = [\r\n  [\r\n    {\r\n      text: '得到一分',\r\n      height: 0.7,\r\n      fontSize: 0.25,\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      text: '和一个',\r\n      height: 0.4,\r\n    },\r\n    {\r\n      text: '打工状态',\r\n      height: 0.55,\r\n      color: '#f52443',\r\n      fontSize: 0.2,\r\n    },\r\n    {\r\n      text: '的人交换位置',\r\n      height: 0.7,\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      text: '向每个人',\r\n      height: 0.55,\r\n      fontSize: 0.2,\r\n    },\r\n    {\r\n      text: '收取200元',\r\n      height: 0.75,\r\n      fontSize: 0.2,\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      text: '在你的2张',\r\n      height: 0.4,\r\n    },\r\n    {\r\n      text: '打工卡上各',\r\n      height: 0.55,\r\n    },\r\n    {\r\n      text: '放1个经验',\r\n      height: 0.7,\r\n    },\r\n    {\r\n      text: '标记',\r\n      height: 0.85,\r\n    },\r\n  ],\r\n]\r\n\r\nconst asia_color = '#e10b2b' // 亚洲区\r\nconst europe_asia_color = '#e666ff' // 欧亚区\r\nconst africa_color = '#705438'\r\nconst europ_color = '#9ec8da' // 欧洲区\r\n// South America\r\nconst south_america_color = '#a0d878'\r\nconst nouth_america_color = '#156a1e'\r\nexport const travelMapList1: Array<MapAddress> = [\r\n  {\r\n    index: 0,\r\n    width: 50,\r\n    height: 50,\r\n    position: [102, 102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 0,\r\n      // rotation: (225 * Math.PI) / 180,\r\n      rotation: Math.PI,\r\n    },\r\n  },\r\n  {\r\n    index: 1,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, 66, 1],\r\n    type: PointType.CITY,\r\n\r\n    options: {\r\n      playerId: 0,\r\n      name: '万里长城',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '中国', '万里长城'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 2,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, 44, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '南大门',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '韩国', '南大门'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 3,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, 22, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '金阁寺',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '日本', '金阁寺'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 4,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, 0, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '婆罗浮屠',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '印尼', '婆罗浮屠'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 5,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, -22, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '牛车水',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '新加坡', '牛车水'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 6,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, -44, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '芭达雅沙滩',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '泰国', '芭达雅', '沙滩'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 7,\r\n    width: 22,\r\n    height: 50,\r\n    position: [102, -66, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '泰姬玛哈陵',\r\n      rotation: player1Rotation,\r\n      texts: ['亚洲区', '印度', '泰姬', '玛哈陵'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 8,\r\n    width: 50,\r\n    height: 50,\r\n    position: [102, -102, 1],\r\n    type: PointType.BIG_CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '石谷马甸沙勒',\r\n      rotation: (90 * Math.PI) / 180,\r\n      texts: ['亚洲区', '沙特阿拉伯', '石谷', '马甸沙勒'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  {\r\n    index: 9,\r\n    width: 22,\r\n    height: 50,\r\n    position: [66, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '哭墙',\r\n      texts: ['亚洲区', '以色列', '哭墙'],\r\n      color: asia_color,\r\n    },\r\n  },\r\n  // europe_asia_color\r\n  {\r\n    index: 10,\r\n    width: 22,\r\n    height: 50,\r\n    position: [44, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '卡帕多西亚',\r\n      texts: ['欧亚区', '土耳其', '卡帕', '多西亚'],\r\n      color: europe_asia_color,\r\n    },\r\n  },\r\n  // africa_color\r\n  {\r\n    index: 11,\r\n    width: 22,\r\n    height: 50,\r\n    position: [22, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '金字塔',\r\n      texts: ['非洲区', '埃及', '金字塔'],\r\n      color: africa_color,\r\n    },\r\n  },\r\n  {\r\n    index: 12,\r\n    width: 22,\r\n    height: 50,\r\n    position: [0, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '拉利贝拉岩石教堂',\r\n      texts: ['非洲区', '伊索比亚', '拉利贝拉', '岩石教堂'],\r\n      color: africa_color,\r\n    },\r\n  },\r\n  {\r\n    index: 13,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-22, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '好望角',\r\n      texts: ['非洲区', '南非', '好望角'],\r\n      color: africa_color,\r\n    },\r\n  },\r\n  {\r\n    index: 14,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-44, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '佛卢比里斯',\r\n      texts: ['非洲区', '摩洛哥', '佛卢', '比里斯'],\r\n      color: africa_color,\r\n    },\r\n  },\r\n  {\r\n    index: 15,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-66, -102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '阿尔汗布拉宫',\r\n      texts: ['欧洲区', '西班牙', '阿尔汗', '布拉宫'],\r\n      color: africa_color,\r\n    },\r\n  },\r\n  {\r\n    index: 16,\r\n    width: 50,\r\n    height: 50,\r\n    position: [-102, -102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 0,\r\n      // rotation: Math.PI,\r\n    },\r\n  },\r\n  {\r\n    index: 17,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, -66, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '埃菲尔铁塔',\r\n      texts: ['欧洲区', '法国', '埃菲尔', '铁塔'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 18,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, -44, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '白金汉宫',\r\n      texts: ['欧洲区', '英国', '白金汉宫'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 19,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, -22, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '新天鹅堡',\r\n      texts: ['欧洲区', '德国', '新天鹅堡'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 20,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, 0, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '罗马竞技场',\r\n      texts: ['欧洲区', '意大利', '罗马', '竞技场'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 21,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, 22, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '美泉宫',\r\n      texts: ['欧洲区', '奥地利', '美泉宫'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 22,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, 44, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '圣母圣殿',\r\n      texts: ['欧洲区', '波兰', '圣母圣殿'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 23,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-102, 66, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '圣彼得堡',\r\n      texts: ['欧洲区', '俄罗斯', '圣彼得堡'],\r\n      color: europ_color,\r\n      rotation: player3Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 24,\r\n    width: 50,\r\n    height: 50,\r\n    position: [-102, 102, 1],\r\n    type: PointType.BIG_CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '落基山脉',\r\n      color: nouth_america_color,\r\n      texts: ['北美区', '加拿大', '落基山脉'],\r\n      rotation: (-90 * Math.PI) / 180,\r\n    },\r\n  },\r\n  {\r\n    index: 25,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-66, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '大峡谷',\r\n      texts: ['北美区', '美国', '大峡谷'],\r\n      color: nouth_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 26,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-44, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '迪奥狄华肯',\r\n      texts: ['南美区', '墨西哥', '迪奥', '狄华肯'],\r\n      color: south_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 27,\r\n    width: 22,\r\n    height: 50,\r\n    position: [-22, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '尼加拉瓜湖',\r\n      texts: ['南美区', '尼加拉瓜', '尼加', '拉瓜湖'],\r\n      color: south_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 28,\r\n    width: 22,\r\n    height: 50,\r\n    position: [0, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '马丘比丘',\r\n      texts: ['南美区', '秘鲁', '马丘比丘'],\r\n      color: south_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 29,\r\n    width: 22,\r\n    height: 50,\r\n    position: [22, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '巴拉德罗海滩',\r\n      texts: ['南美区', '古巴', '巴拉德罗', '海滩'],\r\n      color: south_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 30,\r\n    width: 22,\r\n    height: 50,\r\n    position: [44, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '伊瓜苏瀑布',\r\n      texts: ['南美区', '阿根廷', '伊瓜苏', '瀑布'],\r\n      color: south_america_color,\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n  {\r\n    index: 31,\r\n    width: 22,\r\n    height: 50,\r\n    position: [66, 102, 1],\r\n    type: PointType.CITY,\r\n    options: {\r\n      playerId: 0,\r\n      name: '大堡礁',\r\n      texts: ['澳洲区', '澳大利亚', '大堡礁'],\r\n      color: '#f08300',\r\n      rotation: player4Rotation,\r\n    },\r\n  },\r\n]\r\n\r\nexport const player1MapList: Array<MapAddress> = [\r\n  {\r\n    index: 0,\r\n    width: 50,\r\n    height: 50,\r\n    position: [102, 102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 1,\r\n      rotation: (225 * Math.PI) / 180,\r\n    },\r\n  },\r\n  {\r\n    index: 1,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, 66, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '随身保镖',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      // rotation: (180 * Math.PI) / 180,\r\n      rotation: player1Rotation,\r\n      reward: rewards[0],\r\n    },\r\n  },\r\n  {\r\n    index: 2,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, 44, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '工地搬运',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player1Rotation,\r\n      reward: rewards[1],\r\n    },\r\n  },\r\n  {\r\n    index: 3,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, 22, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '社区警卫',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player1Rotation,\r\n      reward: rewards[2],\r\n    },\r\n  },\r\n  {\r\n    index: 4,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, 0, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '搬家公司',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player1Rotation,\r\n      reward: rewards[3],\r\n    },\r\n  },\r\n  {\r\n    index: 5,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, -22, 1],\r\n    type: PointType.REWARD,\r\n    options: {\r\n      playerId: 1,\r\n      rotation: player1Rotation,\r\n      rewardIndex: 0, // 得到1分\r\n    },\r\n  },\r\n  {\r\n    index: 6,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, -44, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '整理仓库',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player1Rotation,\r\n      reward: rewards[4],\r\n    },\r\n  },\r\n  {\r\n    index: 7,\r\n    width: 22,\r\n    height: 40,\r\n    position: [107, -66, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 1,\r\n      name: '清洁街道',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player1Rotation,\r\n      reward: rewards[5],\r\n    },\r\n  },\r\n]\r\n\r\nexport const player2MapList: Array<MapAddress> = [\r\n  {\r\n    index: 8,\r\n    width: 50,\r\n    height: 50,\r\n    position: [102, -102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 2,\r\n      rotation: (-45 * Math.PI) / 180,\r\n    },\r\n  },\r\n  {\r\n    index: 9,\r\n    width: 22,\r\n    height: 40,\r\n    position: [66, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '主持活动',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[0],\r\n    },\r\n  },\r\n  {\r\n    index: 10,\r\n    width: 22,\r\n    height: 40,\r\n    position: [44, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '临时演员',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[1],\r\n    },\r\n  },\r\n  {\r\n    index: 11,\r\n    width: 22,\r\n    height: 40,\r\n    position: [22, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '街头演奏',\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[2],\r\n    },\r\n  },\r\n  {\r\n    index: 12,\r\n    width: 22,\r\n    height: 40,\r\n    position: [0, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '素描人像',\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[3],\r\n    },\r\n  },\r\n  {\r\n    index: 13,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-22, -107, 1],\r\n    type: PointType.REWARD,\r\n    options: {\r\n      playerId: 2,\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      rewardIndex: 1, // 交换位置\r\n    },\r\n  },\r\n  {\r\n    index: 14,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-44, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '扮装人偶',\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[4],\r\n    },\r\n  },\r\n  {\r\n    index: 15,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-66, -107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 2,\r\n      name: '地摊兜售',\r\n      // rotation: (-90 * Math.PI) / 180,\r\n      reward: rewards[5],\r\n    },\r\n  },\r\n]\r\n\r\nexport const player3MapList: Array<MapAddress> = [\r\n  {\r\n    index: 16,\r\n    width: 50,\r\n    height: 50,\r\n    position: [-102, -102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 3,\r\n      rotation: (45 * Math.PI) / 180,\r\n    },\r\n  },\r\n  {\r\n    index: 17,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, -66, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '展场导览',\r\n      rotation: player3Rotation,\r\n      reward: rewards[0],\r\n    },\r\n  },\r\n  {\r\n    index: 18,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, -44, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '随行口译',\r\n      rotation: player3Rotation,\r\n      reward: rewards[1],\r\n    },\r\n  },\r\n  {\r\n    index: 19,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, -22, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '摄影助理',\r\n      rotation: player3Rotation,\r\n      reward: rewards[2],\r\n    },\r\n  },\r\n  {\r\n    index: 20,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, 0, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '专栏写作',\r\n      rotation: player3Rotation,\r\n      reward: rewards[3],\r\n    },\r\n  },\r\n  {\r\n    index: 21,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, 22, 1],\r\n    type: PointType.REWARD,\r\n    options: {\r\n      playerId: 3,\r\n      rotation: player3Rotation,\r\n      rewardIndex: 2,\r\n    },\r\n  },\r\n  {\r\n    index: 22,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, 44, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '卖场销售',\r\n      rotation: player3Rotation,\r\n      reward: rewards[4],\r\n    },\r\n  },\r\n  {\r\n    index: 23,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-107, 66, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 3,\r\n      name: '问卷访谈',\r\n      rotation: player3Rotation,\r\n      reward: rewards[5],\r\n    },\r\n  },\r\n]\r\n\r\nexport const player4MapList: Array<MapAddress> = [\r\n  {\r\n    index: 24,\r\n    width: 50,\r\n    height: 50,\r\n    position: [-102, 102, 1],\r\n    type: PointType.START,\r\n    options: {\r\n      playerId: 4,\r\n      rotation: (135 * Math.PI) / 180,\r\n    },\r\n  },\r\n  {\r\n    index: 25,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-66, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '清洁招牌',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[0],\r\n    },\r\n  },\r\n  {\r\n    index: 26,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-44, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '餐厅外送',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[1],\r\n    },\r\n  },\r\n  {\r\n    index: 27,\r\n    width: 22,\r\n    height: 40,\r\n    position: [-22, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '厨房杂役',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[2],\r\n    },\r\n  },\r\n  {\r\n    index: 28,\r\n    width: 22,\r\n    height: 40,\r\n    position: [0, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '发送传单',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[3],\r\n    },\r\n  },\r\n  {\r\n    index: 29,\r\n    width: 22,\r\n    height: 40,\r\n    position: [22, 107, 1],\r\n    type: PointType.REWARD,\r\n    options: {\r\n      playerId: 4,\r\n      rotation: player4Rotation,\r\n      rewardIndex: 3,\r\n    },\r\n  },\r\n  {\r\n    index: 30,\r\n    width: 22,\r\n    height: 40,\r\n    position: [44, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '派送牛奶',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[4],\r\n    },\r\n  },\r\n  {\r\n    index: 31,\r\n    width: 22,\r\n    height: 40,\r\n    position: [66, 107, 1],\r\n    type: PointType.WORK,\r\n    options: {\r\n      playerId: 4,\r\n      name: '派送报纸',\r\n      // imageUrl: require('@/assets/image/icon/temp.jpg'),\r\n      rotation: player4Rotation,\r\n      reward: rewards[5],\r\n    },\r\n  },\r\n]\r\n","export const SCREEN_WIDTH = 400\r\n\r\nexport const REM_SIZE = 100\r\nconst money = process.env.VUE_APP_ENV === 'development' ? 20000 : 1000\r\nexport const SETTING = {\r\n  winPoints: 40, // 胜利条件:40积分\r\n  initMoney: money, // 初始资金:1000元\r\n}\r\n\r\nexport const PREFIX = 'backpacker_'\r\n","import mitt from 'mitt'\r\n\r\nexport const bus = mitt()\r\n\r\nexport const ACTION = {\r\n  WINDOW_RESIZE: 'window resize', // 屏幕大小发生变化\r\n  RENDER: 'render', // 屏幕渲染\r\n  WIN: 'win',\r\n  CHANGE_POSITION: 'change position', // 玩家更换位置 {player:PersonType,map:0|1,index:number}\r\n  ADD_LEVEL: 'add level', // 增加熟练度 { index }\r\n  APPEND_MESSAGE: 'append message', // {message:string,player:PersonType}\r\n}\r\n\r\nwindow.addEventListener('resize', () => {\r\n  const width = document.body.offsetWidth\r\n  const height = document.body.offsetHeight\r\n\r\n  bus.emit(ACTION.WINDOW_RESIZE, { width, height })\r\n})\r\n\r\nwindow.addEventListener('orientationchange', () => {\r\n  const width = document.body.offsetWidth\r\n  const height = document.body.offsetHeight\r\n  bus.emit(ACTION.WINDOW_RESIZE, { width, height, orientation: window.orientation })\r\n})\r\n","import { MapAddress, PersonType, PointType } from './types'\r\nimport { player1MapList, player2MapList, player3MapList, player4MapList } from './object.json'\r\nimport Player from './object/Player'\r\nimport { travelMapList1 } from '@/assets/object.json'\r\nimport { randBetween } from './index'\r\nexport const defalutPerson: Array<PersonType> = [\r\n  createPerson(1, '王叔叔', false, '#ff441a', 0, '#ff441a'), // '#d3d37c'\r\n  createPerson(2, '王妈妈', true, '#a07dbc', 8, '#a07dbc'),\r\n  createPerson(3, '王亚湾', true, '#7090c1', 16, '#7090c1'),\r\n  createPerson(4, '大雄', true, '#4a6755', 24, '#4a6755'),\r\n]\r\n\r\nfunction createPerson(id: number, name: string, isAI: boolean, color: string, index: number, color2?: string, addressIndex?: number): PersonType {\r\n  const person: PersonType = {\r\n    id,\r\n    name,\r\n    isAI,\r\n    color,\r\n    color2: color2 || color,\r\n    money: 0,\r\n    index,\r\n    map: 0,\r\n    map0Index: addressIndex === undefined ? index : addressIndex,\r\n    map1Index: 0,\r\n    points: 0,\r\n    win: 0,\r\n  }\r\n  return person\r\n}\r\n\r\n// 打工地图\r\nexport const workMapList: Array<MapAddress> = [...player1MapList, ...player2MapList, ...player3MapList, ...player4MapList]\r\n\r\n// 旅游地图\r\nexport const travelMapList: Array<MapAddress> = [...travelMapList1]\r\n\r\nexport function getNextAddress(p: Player) {\r\n  const player = p.player\r\n  let mapIndex = player.map === 0 ? player.map0Index : player.map1Index\r\n  const mapList = player.map === 0 ? workMapList : travelMapList\r\n\r\n  mapIndex++\r\n  if (mapIndex === mapList.length) mapIndex = 0\r\n\r\n  const address = mapList[mapIndex]\r\n\r\n  return address\r\n}\r\n\r\nexport function getOutOrderTravelMapList() {\r\n  const list = travelMapList\r\n    .filter(t => t.type === PointType.CITY || t.type === PointType.BIG_CITY)\r\n    .map(t => {\r\n      return {\r\n        ...t,\r\n        width: 30,\r\n        height: 50,\r\n      }\r\n    })\r\n  for (let i = 0; i < list.length; i++) {\r\n    const z = randBetween(0, list.length - 1)\r\n    const temp = list[i]\r\n    list[i] = list[z]\r\n    list[z] = temp\r\n  }\r\n\r\n  return list\r\n}\r\n","import { GameState, MapAddress, PersonType, PointType, ThreeEnvironment } from '@/assets/types'\r\nimport { reactive, computed } from 'vue'\r\nimport { defalutPerson, workMapList, travelMapList, getOutOrderTravelMapList } from '@/assets/setting'\r\nimport { randItemInList } from '@/assets/index'\r\nimport { SETTING } from '@/config'\r\nimport PhysicsWorld from '@/assets/physics'\r\nimport Player from '@/assets/object/Player'\r\nfunction initGameState(): GameState {\r\n  return {\r\n    players: defalutPerson,\r\n    activeMap: 0,\r\n    workMapList: [],\r\n    travelMapList: [],\r\n    hotCitys: [[], [], [], []],\r\n  }\r\n}\r\n\r\nexport function GameStateStore() {\r\n  const gameState = reactive<GameState>(initGameState())\r\n  let env: ThreeEnvironment | undefined\r\n  let map0: THREE.Mesh | undefined\r\n  let map1: THREE.Mesh | undefined\r\n  let physicsWorld: PhysicsWorld | undefined\r\n\r\n  // 重新开始游戏\r\n  const resetGameState = (players: Array<PersonType>) => {\r\n    gameState.players = players.map(p => {\r\n      return {\r\n        ...p,\r\n        money: SETTING.initMoney,\r\n        map: 0, // TEST\r\n        map0Index: p.index,\r\n        points: 0,\r\n        win: 0,\r\n      }\r\n    })\r\n\r\n    gameState.workMapList = workMapList.map(t => {\r\n      const w: MapAddress = {\r\n        ...t,\r\n        options: { ...t.options },\r\n      }\r\n      if (w.type === PointType.WORK) {\r\n        w.options.level = 0\r\n      }\r\n      return w\r\n    })\r\n\r\n    gameState.travelMapList = travelMapList.map(t => {\r\n      const w: MapAddress = {\r\n        ...t,\r\n        options: { ...t.options },\r\n      }\r\n      return w\r\n    })\r\n\r\n    // 热门景点\r\n    const addressList = getOutOrderTravelMapList()\r\n    const hotList8 = addressList.splice(0, 4)\r\n    const hotList7 = addressList.splice(0, 5)\r\n    const hostList6 = addressList.splice(0, 6)\r\n\r\n    gameState.hotCitys = [hotList8, hotList7, hostList6, addressList]\r\n\r\n    const playerIds = players.filter(t => !t.isAI).map(t => t.id)\r\n    if (playerIds.length === 0) {\r\n      // 如果全部都是机器人,随机选一个\r\n      const ids = players.map(t => t.id)\r\n      gameState.currentPlayerId = randItemInList(ids)\r\n    } else {\r\n      gameState.currentPlayerId = randItemInList(playerIds)\r\n    }\r\n\r\n    // console.log(gameState.hotCitys)\r\n    // gameState.currentPlayerId = 4\r\n    env = undefined\r\n  }\r\n\r\n  const setGameState = (gs: GameState) => {\r\n    gameState.players = gs.players\r\n    gameState.workMapList = gs.workMapList\r\n    gameState.travelMapList = gs.travelMapList\r\n    gameState.currentPlayerId = gs.currentPlayerId\r\n    gameState.activeMap = gs.activeMap\r\n    gameState.hotCitys = gs.hotCitys\r\n  }\r\n\r\n  const setEnv = (e: ThreeEnvironment) => {\r\n    result.env = e\r\n  }\r\n\r\n  const setMap0 = (map: THREE.Mesh) => {\r\n    result.map0 = map\r\n  }\r\n\r\n  const setMap1 = (map: THREE.Mesh) => {\r\n    result.map1 = map\r\n  }\r\n  const setPhysicsWorld = (p: PhysicsWorld) => {\r\n    result.physicsWorld = p\r\n  }\r\n\r\n  // 获取下一个游戏玩家,如果返回false代表游戏结束\r\n  const toggleNextPlayer = () => {\r\n    // 是否还有玩家没有胜利\r\n    const hasPerson = gameState.players.some(t => t.win === 0 && !t.isAI)\r\n    // 是否至少有一个赢了.\r\n    const hasWin = gameState.players.some(t => t.win > 0)\r\n\r\n    // 如果所有玩家都胜利了,并且至少有一个胜利(可能存在4个AI在比赛,比出第一名即可)\r\n    if (!hasPerson && hasWin) {\r\n      gameState.currentPlayerId = 0\r\n      return false\r\n    }\r\n\r\n    const playerIndex = gameState.players.findIndex(t => t.id === gameState.currentPlayerId)\r\n    let current = playerIndex + 1 >= gameState.players.length ? 0 : playerIndex + 1\r\n    let c = 0\r\n    while (c <= gameState.players.length) {\r\n      const nextPlayer = gameState.players[current]\r\n      if (nextPlayer.win === 0) {\r\n        gameState.currentPlayerId = nextPlayer.id\r\n        // currentId = nextPlayer.id\r\n        return true\r\n      }\r\n      current++\r\n      if (current >= gameState.players.length) current = 0\r\n      c++\r\n    }\r\n\r\n    // 全部都胜利了.\r\n    gameState.currentPlayerId = 0\r\n    return false\r\n  }\r\n\r\n  const changeMoney = (playerId: number, money: number) => {\r\n    const player = gameState.players.find(t => t.id === playerId)\r\n    if (!player) throw new Error('未找到对应玩家:' + playerId)\r\n    player.money += money\r\n\r\n    return player.money\r\n  }\r\n\r\n  const addPoint = (playerId: number, num: number) => {\r\n    const player = findByPlayerId(playerId)\r\n    player.points += num\r\n    // 胜利逻辑\r\n    if (player.points >= SETTING.winPoints) {\r\n      const count = gameState.players.filter(t => t.win > 0).length\r\n\r\n      player.win = count + 1\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  const findByPlayerId = (playerId: number): PersonType => {\r\n    const player = gameState.players.find(t => t.id === playerId)\r\n    if (!player) throw new Error('未找到对应玩家:' + playerId)\r\n\r\n    return player\r\n  }\r\n\r\n  const getAddressByIndex = (index: number, map: 0 | 1 = 0) => {\r\n    const list = map === 0 ? gameState.workMapList : gameState.travelMapList\r\n    const address = list.find(t => t.index === index)\r\n\r\n    if (!address) throw new Error('未找到对应地图位置:' + index + ',map=' + map)\r\n\r\n    return address\r\n  }\r\n\r\n  const getCurrentAddress = (p: Player) => {\r\n    const player = p.player\r\n    const mapIndex = player.map === 0 ? player.map0Index : player.map1Index\r\n    const mapList = player.map === 0 ? gameState.workMapList : gameState.travelMapList\r\n\r\n    const address = mapList[mapIndex]\r\n\r\n    return address\r\n  }\r\n\r\n  // 移除热门城市 index:0 8积分热门城市 1 :7积分,2:6积分 3:5积分\r\n  const removeHotCity = (index: number) => {\r\n    const cityList = gameState.hotCitys[index]\r\n\r\n    if (cityList.length > 0) {\r\n      const city = cityList.splice(cityList.length - 1, 1)\r\n      return city\r\n    } else {\r\n      throw new Error('未找到热门城市,index=' + index)\r\n    }\r\n  }\r\n\r\n  const hot8 = computed(() => {\r\n    const lists = gameState.hotCitys[0]\r\n    if (lists.length) return lists[lists.length - 1]\r\n    return null\r\n  })\r\n\r\n  const hot7 = computed(() => {\r\n    const lists = gameState.hotCitys[1]\r\n    if (lists.length) return lists[lists.length - 1]\r\n    return null\r\n  })\r\n\r\n  const hot6 = computed(() => {\r\n    const lists = gameState.hotCitys[2]\r\n    if (lists.length) return lists[lists.length - 1]\r\n    return null\r\n  })\r\n\r\n  const hot5 = computed(() => {\r\n    const lists = gameState.hotCitys[3]\r\n    if (lists.length) return lists[lists.length - 1]\r\n    return null\r\n  })\r\n\r\n  // const getPointsByCityIndex = (index: number) => {\r\n  //   if(hot8.value?.index)\r\n  // }\r\n\r\n  const result = {\r\n    setGameState,\r\n    gameState,\r\n    env,\r\n    map0,\r\n    map1,\r\n    physicsWorld,\r\n    hot8,\r\n    hot7,\r\n    hot6,\r\n    hot5,\r\n    resetGameState,\r\n    setEnv,\r\n    setMap0,\r\n    setMap1,\r\n    setPhysicsWorld,\r\n    toggleNextPlayer,\r\n    changeMoney, // 改变金额\r\n    addPoint, // 增加积分\r\n    findByPlayerId,\r\n    getCurrentAddress, // 获取用户当前所在地址\r\n    getAddressByIndex, // 根据index获取对应地图地址\r\n    removeHotCity, // 移除一个热门城市\r\n  }\r\n\r\n  return result\r\n}\r\n","\r\nimport { useProviders } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { defineComponent, onUnmounted } from 'vue'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    useProviders(GameStateStore)\r\n  },\r\n})\r\n","import { render } from \"./App.vue?vue&type=template&id=35f48b5d\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=35f48b5d&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"container\">\r\n    <GameMenu v-if=\"status === 0\" @start-new=\"startNewGame\" @read-record=\"readRecord\" />\r\n    <GameView v-if=\"status === 1\" @over=\"gameOver\" />\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref } from 'vue'\r\nimport GameMenu from './GameMenu.vue'\r\nimport GameView from './GameView/index.vue'\r\nexport default defineComponent({\r\n  components: { GameMenu, GameView },\r\n  setup() {\r\n    // 0 游戏菜单 1 游戏进行中\r\n    const status = ref(0)\r\n\r\n    const startNewGame = () => {\r\n      // console.log('start')\r\n      status.value = 1\r\n    }\r\n\r\n    const readRecord = () => {\r\n      status.value = 1\r\n    }\r\n\r\n    const gameOver = () => {\r\n      status.value = 0\r\n    }\r\n\r\n    return {\r\n      status,\r\n      startNewGame,\r\n      readRecord,\r\n      gameOver,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"container flex-col\">\r\n    <div class=\"btns flex-col\" v-if=\"loadingPercent === 1\">\r\n      <div class=\"start\" @click=\"start\">新的旅程</div>\r\n      <div class=\"history\" @click=\"getRecord\">继续征途</div>\r\n    </div>\r\n    <div class=\"loading-ui\">\r\n      <div class=\"text flex-row\">\r\n        <span>{{ loadingPercent === 1 ? '加载完成' : '资源加载中...' }}</span>\r\n        <span>by aoobao</span>\r\n      </div>\r\n      <div class=\"load\" :style=\"{ width: loadingPercent * 100 + '%' }\"></div>\r\n    </div>\r\n    <UserCard @start=\"startGame\" ref=\"startRef\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport UserCard from '@/components/UserCard.vue'\r\nimport { EmitsOptions, ref, SetupContext } from 'vue'\r\nimport { GameState, PersonType } from '@/assets/types'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { preLoadAllFile } from '@/assets/preload'\r\nimport { Dialog } from 'vant'\r\nimport { getItem } from '@/assets/index'\r\nexport default {\r\n  name: 'GameMenu',\r\n  components: { UserCard },\r\n  setup(props: unknown, ctx: SetupContext<EmitsOptions>) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    // let userList = ref<Array<PersonType>>()\r\n    const startGame = (players: Array<PersonType>) => {\r\n      store.resetGameState(players)\r\n      ctx.emit('start-new', players)\r\n    }\r\n\r\n    const getRecord = () => {\r\n      const gameStatus = getItem<GameState>('game-status')\r\n      if (!gameStatus) {\r\n        Dialog.alert({\r\n          title: '错误',\r\n          message: '未找到游戏记录',\r\n        })\r\n        return\r\n      }\r\n      store.setGameState(gameStatus)\r\n\r\n      ctx.emit('read-record', gameStatus)\r\n    }\r\n\r\n    const startRef = ref<InstanceType<typeof UserCard>>()\r\n    const start = () => {\r\n      // console.log(startRef.value)\r\n      startRef.value?.show()\r\n    }\r\n\r\n    const loadingPercent = ref(0)\r\n\r\n    const onprogress = (total: number, finishCount: number) => {\r\n      loadingPercent.value = finishCount / total\r\n    }\r\n\r\n    preLoadAllFile(onprogress)\r\n      .then(() => {\r\n        loadingPercent.value = 1\r\n      })\r\n      .catch(err => {\r\n        Dialog.alert({\r\n          title: '错误',\r\n          message: err.message || '加载错误',\r\n        })\r\n      })\r\n\r\n    return {\r\n      startGame,\r\n      getRecord,\r\n      start,\r\n      startRef,\r\n      loadingPercent,\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 100%;\r\n  height: 100%;\r\n  // background-color: red;\r\n  background: url('~@/assets/image/bg.jpg') center center no-repeat;\r\n  background-size: cover;\r\n  $text-shadow: orange 0.3vw 0.3vw 0.5vw, orange -0.3vw -0.3vw 0.5vw;\r\n  justify-content: center;\r\n  .btns {\r\n    // position: absolute;\r\n    width: 100%;\r\n    // bottom: 15rem;\r\n    // bottom: 50%;\r\n    justify-content: center;\r\n    color: #fff;\r\n    // font-size: 12rem;\r\n    .start {\r\n      font-size: 14.93333vw;\r\n      text-shadow: $text-shadow;\r\n      letter-spacing: 2.66667vw;\r\n      // color: orange;\r\n    }\r\n\r\n    .history {\r\n      margin-top: 3rem;\r\n      font-size: 9.6vw;\r\n      text-shadow: $text-shadow;\r\n    }\r\n  }\r\n\r\n  .loading-ui {\r\n    position: absolute;\r\n    bottom: 30px;\r\n    left: 40px;\r\n    right: 40px;\r\n    height: 15px;\r\n    border-radius: 4px;\r\n    background-color: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n    .text {\r\n      font-size: 20px;\r\n      color: #fff;\r\n      position: absolute;\r\n      left: 0;\r\n      top: -40px;\r\n      right: 0;\r\n      justify-content: space-between;\r\n    }\r\n    .load {\r\n      height: 11px;\r\n      background-color: #ffb11a;\r\n      border-radius: 4px;\r\n      transition: width 0.5s;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <Modal :visible=\"visible\" @close=\"visible = false\" @closed=\"closedHandle\">\r\n    <div class=\"wrap flex-col\">\r\n      <div class=\"person-item flex-col\" v-for=\"user in userList\" :key=\"user.id\">\r\n        <div class=\"row\">\r\n          <span class=\"person-name\">姓名:</span>\r\n          <input class=\"input-name\" type=\"text\" placeholder=\"请输入姓名\" v-model=\"user.name\" />\r\n        </div>\r\n        <div style=\"margin-top: 16px\" class=\"row flex-row user-select\">\r\n          <div class=\"item flex-row\" @click=\"user.isAI = false\">\r\n            <CheckBox :value=\"!user.isAI\" />\r\n            <span class=\"text-name\">玩家</span>\r\n          </div>\r\n          <div class=\"item flex-row\" @click=\"user.isAI = true\">\r\n            <CheckBox :value=\"user.isAI\" />\r\n            <span class=\"text-name\">AI</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"btn-wrap\">\r\n        <span class=\"button\" @click=\"startGame\">开始游戏</span>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defalutPerson } from '@/assets/setting'\r\nimport { defineComponent, reactive, ref } from 'vue'\r\nimport Modal from './Modal/Modal.vue'\r\nimport CheckBox from './CheckBox/index.vue'\r\nimport { PersonType } from '@/assets/types'\r\nimport { showMessage } from '@/assets'\r\n// import { Field, CellGroup, Switch, Popup } from 'vant'\r\nexport default defineComponent({\r\n  components: { Modal, CheckBox },\r\n  // components: { Field, CellGroup, Switch, Popup },\r\n  setup(props, { emit }) {\r\n    const userList = reactive(defalutPerson)\r\n    let startList: Array<PersonType> | null = null\r\n    const visible = ref(false)\r\n\r\n    const show = () => {\r\n      visible.value = true\r\n    }\r\n\r\n    const startGame = () => {\r\n      const isNone = userList.some(t => !t.name)\r\n\r\n      if (isNone) {\r\n        return showMessage('请输入姓名')\r\n      }\r\n\r\n      startList = userList.map(t => {\r\n        return { ...t }\r\n      })\r\n\r\n      // emit('start', { list })\r\n      visible.value = false\r\n    }\r\n\r\n    const closedHandle = () => {\r\n      if (startList) {\r\n        emit('start', startList)\r\n        startList = null\r\n      }\r\n    }\r\n\r\n    return {\r\n      userList,\r\n      visible,\r\n      show,\r\n      startGame,\r\n      closedHandle,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.wrap {\r\n  width: 100%;\r\n  height: 100%;\r\n  font-size: 18px;\r\n\r\n  .person-item {\r\n    height: 20%;\r\n\r\n    .input-name {\r\n      margin-left: 16px;\r\n      width: 50%;\r\n      color: #000;\r\n    }\r\n\r\n    .user-select {\r\n      justify-content: center;\r\n\r\n      .item {\r\n        align-items: center;\r\n        padding-left: 15px;\r\n        padding-right: 15px;\r\n      }\r\n      .text-name {\r\n        margin-left: 16px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .btn-wrap {\r\n    margin-top: 16px;\r\n  }\r\n  .button {\r\n    color: #fff;\r\n    text-shadow: orange 0.53333vw 0.53333vw 0.53333vw;\r\n    letter-spacing: 10px;\r\n    // color: orangered;\r\n    // margin-top: 16px;\r\n    // font-size: 2.4rem;\r\n    font-size: 24px;\r\n    // letter-spacing: 10px;\r\n    font-weight: bold;\r\n    // border: 1px solid orangered;\r\n    // padding: 6px 24px;\r\n    // border-radius: 16px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div :class=\"{ 'md-overlay': show, 'pointer-none': !mask }\">\r\n    <!-- \r\nanimate__animated :class=\"{ 'pointer-none': !mask }\"\r\n      animate__swing\r\n     -->\r\n    <transition name=\"fade\" enter-active-class=\"animate__animated animate__jackInTheBox\" leave-active-class=\"animate__animated animate__bounceOut\" @after-leave=\"afterLeave\">\r\n      <div v-if=\"visible\" :style=\"modalStyle\" class=\"md-modal flex-col\">\r\n        <div class=\"md-header flex-row\" v-if=\"title\">\r\n          {{ title }}\r\n        </div>\r\n        <div class=\"md-contents\">\r\n          <slot></slot>\r\n        </div>\r\n        <div class=\"md-back\" @click=\"close\" v-if=\"showClose\"></div>\r\n      </div>\r\n    </transition>\r\n\r\n    <div class=\"preload\"></div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref, watchEffect } from 'vue'\r\n// const bgImage = require('./bg.jpg')\r\n// 预先加载一下背景图\r\n// const image = new Image()\r\n// image.src = bgImage\r\n// image.onload = () => {\r\n//   console.log('image loaded')\r\n// }\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    width: {\r\n      type: String,\r\n      default: '350px',\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '500px',\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      defalut: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    showClose: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    mask: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  setup(props, { emit }) {\r\n    // const visible = ref(false)\r\n\r\n    const close = () => {\r\n      emit('close')\r\n    }\r\n\r\n    const show = ref(props.visible)\r\n    watchEffect(() => {\r\n      if (props.visible) {\r\n        show.value = true\r\n      }\r\n    })\r\n\r\n    const modalStyle = computed(() => {\r\n      return {\r\n        width: props.width,\r\n        height: props.height,\r\n        perspective: '1300px',\r\n        // backgroundImage: `url(${bgImage})`,\r\n      }\r\n    })\r\n\r\n    const afterLeave = () => {\r\n      show.value = false\r\n\r\n      emit('closed')\r\n    }\r\n\r\n    return {\r\n      // visible,\r\n      close,\r\n      modalStyle,\r\n      show,\r\n      afterLeave,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.preload {\r\n  background-image: url('./bg.jpg');\r\n  // position: absolute;\r\n  // right: -5000px;\r\n  // width: 10px;\r\n  // height: 10px;\r\n  // display: none;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n.md-modal {\r\n  width: 50%;\r\n  height: 50%;\r\n  transform-origin: center center;\r\n\r\n  background-image: url('./bg.jpg');\r\n  background-size: 100% 100%;\r\n\r\n  position: relative;\r\n\r\n  .md-back {\r\n    position: absolute;\r\n    // right: -1rem;\r\n    right: -10px;\r\n    // top: -7rem;\r\n    top: -40px;\r\n    // width: 8rem;\r\n    // height: 8rem;\r\n    width: 30px;\r\n    height: 30px;\r\n    background-image: url('./back.png');\r\n    background-size: 100% 100%;\r\n  }\r\n}\r\n\r\n.md-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  // background-color: #555;\r\n}\r\n\r\n.md-header {\r\n  justify-content: center;\r\n  letter-spacing: 10px;\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n.md-contents {\r\n  margin-top: 24px;\r\n  flex-grow: 1;\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, ref, watchEffect } from 'vue'\r\n// const bgImage = require('./bg.jpg')\r\n// 预先加载一下背景图\r\n// const image = new Image()\r\n// image.src = bgImage\r\n// image.onload = () => {\r\n//   console.log('image loaded')\r\n// }\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    width: {\r\n      type: String,\r\n      default: '350px',\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '500px',\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      defalut: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    showClose: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    mask: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  setup(props, { emit }) {\r\n    // const visible = ref(false)\r\n\r\n    const close = () => {\r\n      emit('close')\r\n    }\r\n\r\n    const show = ref(props.visible)\r\n    watchEffect(() => {\r\n      if (props.visible) {\r\n        show.value = true\r\n      }\r\n    })\r\n\r\n    const modalStyle = computed(() => {\r\n      return {\r\n        width: props.width,\r\n        height: props.height,\r\n        perspective: '1300px',\r\n        // backgroundImage: `url(${bgImage})`,\r\n      }\r\n    })\r\n\r\n    const afterLeave = () => {\r\n      show.value = false\r\n\r\n      emit('closed')\r\n    }\r\n\r\n    return {\r\n      // visible,\r\n      close,\r\n      modalStyle,\r\n      show,\r\n      afterLeave,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./Modal.vue?vue&type=template&id=d2679ec2&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=ts\"\nexport * from \"./Modal.vue?vue&type=script&lang=ts\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=d2679ec2&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d2679ec2\"\n\nexport default script","<template>\r\n  <div class=\"check-box-container flex-row\" :style=\"divStyle\" @click=\"checkChange\">\r\n    {{ value ? '√' : null }}\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent } from 'vue'\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: '30px',\r\n    },\r\n    fontSize: {\r\n      type: String,\r\n      default: '48px',\r\n    },\r\n  },\r\n  setup(props, { emit }) {\r\n    const divStyle = computed(() => {\r\n      const size = props.size\r\n      return {\r\n        width: size,\r\n        height: size,\r\n        fontSize: props.fontSize,\r\n      }\r\n    })\r\n\r\n    const checkChange = () => {\r\n      const value = !props.value\r\n      emit('input', value)\r\n    }\r\n\r\n    return { divStyle, checkChange }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.check-box-container {\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid #000;\r\n  color: #f50f0e;\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent } from 'vue'\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: '30px',\r\n    },\r\n    fontSize: {\r\n      type: String,\r\n      default: '48px',\r\n    },\r\n  },\r\n  setup(props, { emit }) {\r\n    const divStyle = computed(() => {\r\n      const size = props.size\r\n      return {\r\n        width: size,\r\n        height: size,\r\n        fontSize: props.fontSize,\r\n      }\r\n    })\r\n\r\n    const checkChange = () => {\r\n      const value = !props.value\r\n      emit('input', value)\r\n    }\r\n\r\n    return { divStyle, checkChange }\r\n  },\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=28568dcd&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=28568dcd&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-28568dcd\"\n\nexport default script","\r\nimport { defalutPerson } from '@/assets/setting'\r\nimport { defineComponent, reactive, ref } from 'vue'\r\nimport Modal from './Modal/Modal.vue'\r\nimport CheckBox from './CheckBox/index.vue'\r\nimport { PersonType } from '@/assets/types'\r\nimport { showMessage } from '@/assets'\r\n// import { Field, CellGroup, Switch, Popup } from 'vant'\r\nexport default defineComponent({\r\n  components: { Modal, CheckBox },\r\n  // components: { Field, CellGroup, Switch, Popup },\r\n  setup(props, { emit }) {\r\n    const userList = reactive(defalutPerson)\r\n    let startList: Array<PersonType> | null = null\r\n    const visible = ref(false)\r\n\r\n    const show = () => {\r\n      visible.value = true\r\n    }\r\n\r\n    const startGame = () => {\r\n      const isNone = userList.some(t => !t.name)\r\n\r\n      if (isNone) {\r\n        return showMessage('请输入姓名')\r\n      }\r\n\r\n      startList = userList.map(t => {\r\n        return { ...t }\r\n      })\r\n\r\n      // emit('start', { list })\r\n      visible.value = false\r\n    }\r\n\r\n    const closedHandle = () => {\r\n      if (startList) {\r\n        emit('start', startList)\r\n        startList = null\r\n      }\r\n    }\r\n\r\n    return {\r\n      userList,\r\n      visible,\r\n      show,\r\n      startGame,\r\n      closedHandle,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./UserCard.vue?vue&type=template&id=387f03fa&scoped=true\"\nimport script from \"./UserCard.vue?vue&type=script&lang=ts\"\nexport * from \"./UserCard.vue?vue&type=script&lang=ts\"\n\nimport \"./UserCard.vue?vue&type=style&index=0&id=387f03fa&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-387f03fa\"\n\nexport default script","// 预加载文件\r\nimport { GLTF, GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { THREE } from './three/lib'\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\r\n\r\nexport const enum FILE_TYPE {\r\n  IMAGE = 0,\r\n  GLTF = 1,\r\n  FBX = 2,\r\n}\r\n\r\nexport interface FileItem {\r\n  id: string\r\n  path: string\r\n  type: FILE_TYPE\r\n  object?: any\r\n}\r\n\r\nexport const FILE_LIST: Array<FileItem> = [\r\n  {\r\n    id: 'player',\r\n    path: './object/RobotExpressive.glb',\r\n    type: FILE_TYPE.GLTF,\r\n  },\r\n  {\r\n    id: 'arrow',\r\n    path: './object/arrow/Arrow.fbx',\r\n    type: FILE_TYPE.FBX,\r\n  },\r\n  {\r\n    id: 'logo',\r\n    path: require('@/assets/image/logo.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-1',\r\n    path: require('@/assets/image/work/1.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-2',\r\n    path: require('@/assets/image/work/2.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-3',\r\n    path: require('@/assets/image/work/3.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-4',\r\n    path: require('@/assets/image/work/4.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-6',\r\n    path: require('@/assets/image/work/6.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-7',\r\n    path: require('@/assets/image/work/7.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-9',\r\n    path: require('@/assets/image/work/9.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-10',\r\n    path: require('@/assets/image/work/10.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-11',\r\n    path: require('@/assets/image/work/11.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-12',\r\n    path: require('@/assets/image/work/12.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-14',\r\n    path: require('@/assets/image/work/14.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-15',\r\n    path: require('@/assets/image/work/15.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-17',\r\n    path: require('@/assets/image/work/17.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-18',\r\n    path: require('@/assets/image/work/18.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-19',\r\n    path: require('@/assets/image/work/19.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-20',\r\n    path: require('@/assets/image/work/20.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-22',\r\n    path: require('@/assets/image/work/22.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-23',\r\n    path: require('@/assets/image/work/23.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-25',\r\n    path: require('@/assets/image/work/25.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-26',\r\n    path: require('@/assets/image/work/26.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-27',\r\n    path: require('@/assets/image/work/27.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-28',\r\n    path: require('@/assets/image/work/28.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-30',\r\n    path: require('@/assets/image/work/30.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'work-31',\r\n    path: require('@/assets/image/work/31.png'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-1',\r\n    path: require('@/assets/image/travel/1.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-2',\r\n    path: require('@/assets/image/travel/2.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-3',\r\n    path: require('@/assets/image/travel/3.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-4',\r\n    path: require('@/assets/image/travel/4.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-5',\r\n    path: require('@/assets/image/travel/5.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-6',\r\n    path: require('@/assets/image/travel/6.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-7',\r\n    path: require('@/assets/image/travel/7.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-8',\r\n    path: require('@/assets/image/travel/8.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-9',\r\n    path: require('@/assets/image/travel/9.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-10',\r\n    path: require('@/assets/image/travel/10.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-11',\r\n    path: require('@/assets/image/travel/11.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-12',\r\n    path: require('@/assets/image/travel/12.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-13',\r\n    path: require('@/assets/image/travel/13.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-14',\r\n    path: require('@/assets/image/travel/14.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-15',\r\n    path: require('@/assets/image/travel/15.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-17',\r\n    path: require('@/assets/image/travel/17.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-18',\r\n    path: require('@/assets/image/travel/18.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-19',\r\n    path: require('@/assets/image/travel/19.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-20',\r\n    path: require('@/assets/image/travel/20.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-21',\r\n    path: require('@/assets/image/travel/21.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-22',\r\n    path: require('@/assets/image/travel/22.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-23',\r\n    path: require('@/assets/image/travel/23.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-24',\r\n    path: require('@/assets/image/travel/24.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-25',\r\n    path: require('@/assets/image/travel/25.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-26',\r\n    path: require('@/assets/image/travel/26.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-27',\r\n    path: require('@/assets/image/travel/27.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-28',\r\n    path: require('@/assets/image/travel/28.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-29',\r\n    path: require('@/assets/image/travel/29.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-30',\r\n    path: require('@/assets/image/travel/30.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n  {\r\n    id: 'travel-31',\r\n    path: require('@/assets/image/travel/31.jpg'),\r\n    type: FILE_TYPE.IMAGE,\r\n  },\r\n]\r\n\r\nexport function preLoadAllFile(onProgress?: (total: number, finishCount: number) => void) {\r\n  return new Promise((resolve, reject) => {\r\n    const list = FILE_LIST\r\n    const total = list.length\r\n    const result: Array<FileItem> = []\r\n    let isError = false\r\n    const func = () => {\r\n      if (isError) return\r\n      if (result.length < total) {\r\n        onProgress && onProgress(total, result.length)\r\n      } else {\r\n        resolve(result)\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < list.length; i++) {\r\n      const fileItem = list[i]\r\n      loadFile(fileItem)\r\n        .then(obj => {\r\n          const file = FILE_LIST.find(t => t.id === fileItem.id)\r\n          if (file) {\r\n            file.object = obj\r\n          }\r\n\r\n          result.push({ ...fileItem, object: obj })\r\n          func()\r\n        })\r\n        .catch(err => {\r\n          isError = true\r\n          reject(err)\r\n        })\r\n    }\r\n  })\r\n}\r\n\r\nexport function getFile(id: string) {\r\n  const file = FILE_LIST.find(t => t.id === id)\r\n  if (!file) throw new Error('id未找到,id=' + id)\r\n\r\n  if (!file.object) throw new Error('未预加载文件')\r\n\r\n  return file.object\r\n}\r\n\r\nexport function getFileById(id: string): Promise<FileItem> {\r\n  return new Promise((resolve, reject) => {\r\n    const file = FILE_LIST.find(t => t.id === id)\r\n    if (!file) {\r\n      reject(new Error('id未找到:' + id))\r\n      return\r\n    }\r\n    // 已经加载过了.\r\n    if (file.object) resolve(file)\r\n\r\n    loadFile(file)\r\n      .then(obj => {\r\n        file.object = obj\r\n        resolve({ ...file })\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\nfunction loadFile(file: FileItem) {\r\n  switch (file.type) {\r\n    case FILE_TYPE.IMAGE:\r\n      return loadImage(file)\r\n    case FILE_TYPE.GLTF:\r\n      return loadGltf(file)\r\n    case FILE_TYPE.FBX:\r\n      return loadFbx(file)\r\n    default:\r\n      return Promise.reject(new Error('错误的文件类型:' + file.type))\r\n  }\r\n}\r\n\r\nfunction loadFbx(file: FileItem) {\r\n  return new Promise<THREE.Group>((resolve, reject) => {\r\n    const loader = new FBXLoader()\r\n    loader.load(\r\n      file.path,\r\n      object => {\r\n        resolve(object)\r\n      },\r\n      undefined,\r\n      err => {\r\n        reject(err)\r\n      },\r\n    )\r\n  })\r\n}\r\n\r\nfunction loadGltf(file: FileItem) {\r\n  return new Promise<GLTF>((resolve, reject) => {\r\n    const loader = new GLTFLoader()\r\n\r\n    loader.load(\r\n      file.path,\r\n      gltf => {\r\n        resolve(gltf)\r\n      },\r\n      undefined,\r\n      err => {\r\n        reject(err)\r\n      },\r\n    )\r\n  })\r\n}\r\n\r\nfunction loadImage(file: FileItem) {\r\n  return new Promise((resolve, reject) => {\r\n    const loader = new THREE.ImageLoader()\r\n    loader.load(\r\n      file.path,\r\n      image => {\r\n        resolve(image)\r\n      },\r\n      undefined,\r\n      err => {\r\n        reject(err)\r\n      },\r\n    )\r\n  })\r\n}\r\n","\r\nimport UserCard from '@/components/UserCard.vue'\r\nimport { EmitsOptions, ref, SetupContext } from 'vue'\r\nimport { GameState, PersonType } from '@/assets/types'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { preLoadAllFile } from '@/assets/preload'\r\nimport { Dialog } from 'vant'\r\nimport { getItem } from '@/assets/index'\r\nexport default {\r\n  name: 'GameMenu',\r\n  components: { UserCard },\r\n  setup(props: unknown, ctx: SetupContext<EmitsOptions>) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    // let userList = ref<Array<PersonType>>()\r\n    const startGame = (players: Array<PersonType>) => {\r\n      store.resetGameState(players)\r\n      ctx.emit('start-new', players)\r\n    }\r\n\r\n    const getRecord = () => {\r\n      const gameStatus = getItem<GameState>('game-status')\r\n      if (!gameStatus) {\r\n        Dialog.alert({\r\n          title: '错误',\r\n          message: '未找到游戏记录',\r\n        })\r\n        return\r\n      }\r\n      store.setGameState(gameStatus)\r\n\r\n      ctx.emit('read-record', gameStatus)\r\n    }\r\n\r\n    const startRef = ref<InstanceType<typeof UserCard>>()\r\n    const start = () => {\r\n      // console.log(startRef.value)\r\n      startRef.value?.show()\r\n    }\r\n\r\n    const loadingPercent = ref(0)\r\n\r\n    const onprogress = (total: number, finishCount: number) => {\r\n      loadingPercent.value = finishCount / total\r\n    }\r\n\r\n    preLoadAllFile(onprogress)\r\n      .then(() => {\r\n        loadingPercent.value = 1\r\n      })\r\n      .catch(err => {\r\n        Dialog.alert({\r\n          title: '错误',\r\n          message: err.message || '加载错误',\r\n        })\r\n      })\r\n\r\n    return {\r\n      startGame,\r\n      getRecord,\r\n      start,\r\n      startRef,\r\n      loadingPercent,\r\n    }\r\n  },\r\n}\r\n","import { render } from \"./GameMenu.vue?vue&type=template&id=37168e4e&scoped=true\"\nimport script from \"./GameMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./GameMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./GameMenu.vue?vue&type=style&index=0&id=37168e4e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-37168e4e\"\n\nexport default script","<template>\r\n  <div class=\"container\">\r\n    <!-- 游戏页面 -->\r\n    <ThreeWrap>\r\n      <WorkMap @over=\"map1Init\" ref=\"workMap\" />\r\n      <TravelMap @over=\"map2Init\" ref=\"travelMap\" />\r\n      <HandUpDisplay v-if=\"isFinish\" :enabled=\"enabled\" />\r\n      <TouchView ref=\"touchRef\" />\r\n      <NumberView ref=\"numberRef\" />\r\n      <!-- <TextView ref=\"textRef\" /> -->\r\n      <RewardView ref=\"rewardRef\" />\r\n      <StepNumber ref=\"stepRef\" />\r\n      <WinView ref=\"winRef\" />\r\n      <OverView ref=\"overRef\" />\r\n    </ThreeWrap>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\n// import { PersonType } from '@/assets/types'\r\nimport { computed, defineComponent, onBeforeUnmount, ref, watch } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport ThreeWrap from './ThreeWrap.vue'\r\nimport WorkMap from './WorkMap.vue'\r\nimport TravelMap from './TravelMap.vue'\r\nimport HandUpDisplay from './HandUpDisplay.vue'\r\nimport { delay, showMessage, confirm, setItem, removeItem, appendMessage } from '@/assets/index'\r\nimport { FileItem, getFileById } from '@/assets/preload'\r\nimport Player from '@/assets/object/Player'\r\nimport { ACTION, bus } from '@/assets/bus'\r\nimport Cube from '@/assets/object/Cube'\r\nimport TouchView from '@/components/TouchView/index.vue'\r\nimport NumberView from '@/components/NumberView/index.vue'\r\nimport StepNumber from '@/views/GameView/StepNumber.vue'\r\nimport OverView from '@/views/GameView/OverView.vue'\r\nimport WinView from '@/components/WinView/index.vue'\r\nimport RewardView from '@/views/GameView/Reward/index.vue'\r\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { MapAddress, PersonType, PointType } from '@/assets/types'\r\nimport { workMapList } from '@/assets/setting'\r\nimport { chooseStartPoint, chooseGoTravel, chooseTravelContinue, getStep } from '@/assets/ai'\r\nexport default defineComponent({\r\n  components: { ThreeWrap, WorkMap, TravelMap, HandUpDisplay, TouchView, NumberView, RewardView, StepNumber, WinView, OverView },\r\n  // components: { HandUpDisplay },\r\n  setup(props, { emit }) {\r\n    const numberRef = ref<InstanceType<typeof NumberView>>()\r\n    const workMap = ref<InstanceType<typeof WorkMap>>()\r\n    const travelMap = ref<InstanceType<typeof TravelMap>>()\r\n    const touchRef = ref<InstanceType<typeof TouchView>>()\r\n    // const textRef = ref<InstanceType<typeof TextView>>()\r\n    const winRef = ref<InstanceType<typeof WinView>>()\r\n    const stepRef = ref<InstanceType<typeof StepNumber>>()\r\n    const rewardRef = ref<InstanceType<typeof RewardView>>()\r\n    const overRef = ref<InstanceType<typeof OverView>>()\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const map1Finish = ref(false)\r\n    const isLoad = ref(false)\r\n    const map2Finish = ref(false)\r\n\r\n    const enabled = ref(false)\r\n\r\n    let playerFile: FileItem\r\n    let players: Array<Player>\r\n    let cube: Cube\r\n    let cube2: Cube\r\n    // const playerFile = await getFileById('player')\r\n    getFileById('player').then(file => {\r\n      playerFile = file\r\n      isLoad.value = true\r\n    })\r\n    const isFinish = computed(() => {\r\n      return map1Finish.value && isLoad.value && map2Finish.value\r\n    })\r\n    const map1Init = () => {\r\n      map1Finish.value = true\r\n    }\r\n    const map2Init = () => {\r\n      map2Finish.value = true\r\n    }\r\n    watch(\r\n      () => isFinish.value,\r\n      val => {\r\n        if (val) {\r\n          init()\r\n        }\r\n      },\r\n    )\r\n\r\n    const init = () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('threejs 环境未找到')\r\n      players = store.gameState.players.map(p => {\r\n        // const object = playerFile.object.scene as THREE.Scene\r\n        const gltf = playerFile.object as GLTF\r\n        return new Player({\r\n          player: p,\r\n          gltf: gltf,\r\n          map0: store.map0!,\r\n          map1: store.map1!,\r\n        })\r\n      })\r\n      bus.on(ACTION.RENDER, render)\r\n      bus.on(ACTION.CHANGE_POSITION, playerChangePosition)\r\n      bus.on(ACTION.ADD_LEVEL, addLevelByAddressIndex)\r\n\r\n      initMapStar()\r\n\r\n      env.control!.setLookAt(0, -245, 170, 0, 0, 0, true)\r\n\r\n      // 开场动画\r\n      delay(1).then(() => {\r\n        // 骰子\r\n        cube = new Cube()\r\n        cube2 = new Cube()\r\n\r\n        gameLoop()\r\n      })\r\n    }\r\n\r\n    const getPlayerById = (playerId: number) => {\r\n      const player = players.find(t => t.player.id === playerId)\r\n      if (!player) throw new Error('人员获取失败,id=' + playerId)\r\n      return player\r\n    }\r\n\r\n    const setActiveByPlayerId = (playerId: number) => {\r\n      players.forEach(p => {\r\n        if (p.player.id === playerId) {\r\n          p.setActive(true)\r\n        } else {\r\n          p.setActive(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    const gameLoop = async () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('未获取3d环境')\r\n\r\n      if (!store.gameState.currentPlayerId) {\r\n        console.log('currentPlayerId异常,结束循环')\r\n        return\r\n      }\r\n\r\n      const player = getPlayerById(store.gameState.currentPlayerId)\r\n\r\n      setActiveByPlayerId(store.gameState.currentPlayerId)\r\n\r\n      // 切换地图\r\n      if (player.player.map !== store.gameState.activeMap) {\r\n        // await toggleMap(player.player.map)\r\n        store.gameState.activeMap = player.player.map\r\n        await delay(2)\r\n      }\r\n\r\n      // 聚焦当前玩家\r\n      workMap.value!.lookAtPosition(player!.instance.position)\r\n\r\n      if (!player.player.isAI) enabled.value = true\r\n\r\n      appendMessage('游戏进行中', player.player, false)\r\n\r\n      // 如果玩家在旅游城市,询问是否返回打工\r\n      if (player.player.map === 1) {\r\n        // 如果小于500元,直接回来打工\r\n        if (player.player.money < 500) {\r\n          appendMessage('金币不足500,回家打工赚钱', player.player)\r\n\r\n          const address = workMapList.find(t => t.index === player.player.index)\r\n          if (!address) throw new Error('未找到打工起始地址:index=' + player.player.index)\r\n          store.gameState.activeMap = 0\r\n          await player.changeMap(address, 0)\r\n        } else {\r\n          let travelContinue: boolean\r\n          if (player.player.isAI) {\r\n            travelContinue = chooseTravelContinue(player.player)\r\n          } else {\r\n            travelContinue = await confirm('继续旅游需要扣除500旅费,请问是否继续旅游?', '提示')\r\n          }\r\n          if (!travelContinue) {\r\n            // 不继续旅游\r\n            appendMessage(`结束旅游回来打工赚钱`, player.player)\r\n            const address = workMapList.find(t => t.index === player.player.index)\r\n            if (!address) throw new Error('未找到打工起始地址:index=' + player.player.index)\r\n            store.gameState.activeMap = 0\r\n            await player.changeMap(address, 0)\r\n          }\r\n        }\r\n      }\r\n\r\n      // 当前玩家是否最终处在旅游地图\r\n      const isTravel = player.player.map === 1\r\n\r\n      if (isTravel) {\r\n        store.changeMoney(player.player.id, -500) // 扣除500旅费\r\n        appendMessage('继续旅游,扣除500旅费', player.player)\r\n      }\r\n\r\n      let speed: number\r\n      // 等待用户扔骰子\r\n      if (!player.player.isAI) {\r\n        speed = await touchRef.value!.show()\r\n      } else {\r\n        await delay(1)\r\n        speed = 0.8 * Math.random() + 0.2\r\n      }\r\n\r\n      enabled.value = false // 禁止切换地图.\r\n\r\n      if (player.player.map !== store.gameState.activeMap) {\r\n        // await toggleMap(player.player.map)\r\n        store.gameState.activeMap = player.player.map\r\n        await delay(2)\r\n      }\r\n\r\n      // 等待骰子转动结束\r\n      cube2.hide()\r\n      if (!isTravel) {\r\n        await cube.show(store.physicsWorld!, speed, store.map0!)\r\n      } else {\r\n        await cube.show(store.physicsWorld!, speed, store.map1!, [5, 5, 5])\r\n        await cube2.show(store.physicsWorld!, speed, store.map1!, [-5, -5, 5])\r\n      }\r\n\r\n      // 获取骰子点数\r\n      let value = cube.getValue()\r\n\r\n      if (isTravel) {\r\n        value += cube2.getValue()\r\n      }\r\n\r\n      // const value = 5\r\n      // 显示骰子点数在屏幕上\r\n      numberRef.value?.show(value)\r\n\r\n      appendMessage(`前进${value}格`, player.player, false)\r\n\r\n      let isChargeTravel = false\r\n      // 用户在屏幕上行动\r\n      player.beginRun()\r\n      for (let i = 0; i < value; i++) {\r\n        await player.goNext()\r\n\r\n        if (!isTravel) {\r\n          const address = store.getCurrentAddress(player)\r\n\r\n          if (address.index === player.player.index) {\r\n            // 奖励500元\r\n            appendMessage('路过发薪日,奖励500元', player.player)\r\n            changeMoney(player, 500)\r\n            // 用户到达自己起点的逻辑(是否要去旅游)\r\n            const goTravel = player.player.isAI ? chooseGoTravel(player.player) : await confirm(`是否前往旅游地图?`)\r\n\r\n            if (goTravel) {\r\n              isChargeTravel = true\r\n\r\n              player.stopAnimate()\r\n              appendMessage(`前往旅游地图`, player.player)\r\n\r\n              store.gameState.activeMap = 1\r\n\r\n              let startAddress: MapAddress\r\n              if (player.player.isAI) {\r\n                startAddress = chooseStartPoint(store.gameState)\r\n              } else {\r\n                startAddress = await travelMap.value!.chooseStartPoint()\r\n              }\r\n              store.gameState.activeMap = 1\r\n              await player.changeMap(startAddress, 1)\r\n\r\n              await delay(0.5)\r\n\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // 隐藏骰子点数\r\n      numberRef.value?.close()\r\n\r\n      // 如果是旅游状态,可以向前走3步\r\n      if (isTravel) {\r\n        let step: number\r\n        if (player.player.isAI) {\r\n          step = getStep(player.player, travelMap.value!.getPointValue)\r\n          if (step > 0) {\r\n            appendMessage(`花费${step * 500}元,继续前进${step}格`, player.player)\r\n            store.changeMoney(player.player.id, -step * 500)\r\n          }\r\n          await delay(0.5)\r\n        } else {\r\n          step = await stepRef.value!.show(player.player.id)\r\n        }\r\n\r\n        for (let i = 0; i < step; i++) {\r\n          await player.goNext()\r\n        }\r\n      }\r\n\r\n      if (!isChargeTravel) {\r\n        player.stopAnimate()\r\n        // 处理角色业务逻辑\r\n        if (!isTravel) {\r\n          await detailWorkEvent(player)\r\n        } else {\r\n          await detailTravelEvent(player)\r\n        }\r\n      }\r\n      // 切换下一个玩家\r\n      const needNext = store.toggleNextPlayer()\r\n\r\n      if (needNext) {\r\n        setItem('game-status', store.gameState)\r\n\r\n        if (player.player.isAI) {\r\n          await delay(2)\r\n        }\r\n\r\n        gameLoop()\r\n      } else {\r\n        removeItem('game-status')\r\n        // 游戏结束\r\n        await overRef.value!.show()\r\n\r\n        emit('over')\r\n      }\r\n    }\r\n\r\n    const render = () => {\r\n      // console.log('render')\r\n    }\r\n\r\n    // {player:PersonType,map:0|1,index:number}\r\n    const playerChangePosition = (data: any) => {\r\n      const p = data.player as PersonType\r\n      const index = data.index as number\r\n      const player = players.find(t => t.player.id === p.id)\r\n      const address = store.getAddressByIndex(index, 0)\r\n\r\n      player?.changeAddress(address)\r\n    }\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.RENDER, render)\r\n      bus.off(ACTION.CHANGE_POSITION, playerChangePosition)\r\n      bus.off(ACTION.ADD_LEVEL, addLevelByAddressIndex)\r\n    })\r\n\r\n    // 处理逻辑 机会/加熟练/其他用户加钱\r\n    const detailWorkEvent = async (player: Player) => {\r\n      const address = store.getCurrentAddress(player)\r\n      if (address.type === PointType.WORK) {\r\n        if (player.player.id === address.options.playerId) {\r\n          // 如果是自己的地盘,加熟练度\r\n\r\n          await addLevel(address)\r\n        } else {\r\n          // 当前地址所属玩家\r\n          const workPlayer = getPlayerById(address.options.playerId)\r\n          const level = address.options.level || 0\r\n          const money = address.options.reward![level]\r\n          // 如果对方玩家在打工地图,给对方玩家加钱\r\n          if (workPlayer.isWork()) {\r\n            appendMessage(`路过${address.options.name},${workPlayer.player.name}赚得金钱:${money}`, player.player)\r\n\r\n            changeMoney(workPlayer, money)\r\n          } else {\r\n            // 给自己加钱\r\n            appendMessage(`路过${address.options.name},对方未在打工状态,${player.player.name}赚得金钱:${money}`, player.player)\r\n\r\n            changeMoney(player, money)\r\n          }\r\n        }\r\n      } else if (address.type === PointType.REWARD) {\r\n        // 机会\r\n\r\n        await rewardRef.value?.show(player, address)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // 处理旅游状态下的业务逻辑\r\n    const detailTravelEvent = async (player: Player) => {\r\n      const index = player.player.map1Index // 当前用户所在地址\r\n      const hotCity = travelMap.value!.getPointValue(index)\r\n\r\n      if (hotCity !== null) {\r\n        appendMessage(`路过热门城市${hotCity.address.options.name},增加${hotCity.point}点积分`, player.player)\r\n\r\n        await travelMap.value!.removeHotCity(hotCity)\r\n\r\n        const isWin = store.addPoint(player.player.id, hotCity.point)\r\n\r\n        if (isWin) {\r\n          bus.emit(ACTION.WIN, player.player.id)\r\n          player.playWin()\r\n\r\n          await winRef.value!.show(player.player.id)\r\n        }\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // 金额变化\r\n    function changeMoney(player: Player, money: number) {\r\n      // player.player.money += money\r\n      const num = store!.changeMoney(player.player.id, money)\r\n      player.player.money = num\r\n    }\r\n\r\n    const addLevelByAddressIndex = (data: any) => {\r\n      const index = data.index as number\r\n      const address = store?.getAddressByIndex(index, 0)\r\n\r\n      return addLevel(address)\r\n    }\r\n\r\n    // 增加熟练度\r\n    async function addLevel(address: MapAddress) {\r\n      let level = address.options.level || 0\r\n      const player = players.find(t => t.player.id === address.options.playerId)\r\n      if (level === 3) {\r\n        showMessage(`${player!.player.name}的${address.options.name}已经达到最高等级`, 2000)\r\n\r\n        return false\r\n      } else {\r\n        level++\r\n        address.options.level = level\r\n        // const cost = address.options.reward![level]\r\n        appendMessage(`路过${address.options.name},熟练度增加:${level}级`, player!.player)\r\n        // 增加星星动画\r\n        await workMap.value?.addStar(address)\r\n        return true\r\n      }\r\n    }\r\n\r\n    const initMapStar = () => {\r\n      store.gameState.workMapList.forEach(w => {\r\n        if (w.type === PointType.WORK) {\r\n          const level = w.options.level!\r\n\r\n          if (level > 0) {\r\n            for (let i = 1; i <= level; i++) {\r\n              workMap.value?.addStar(w, i)\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return {\r\n      map1Init,\r\n      map2Init,\r\n      gameState: store?.gameState,\r\n      // map1Finish,\r\n      isFinish,\r\n      workMap,\r\n      travelMap,\r\n      touchRef,\r\n      numberRef,\r\n      // textRef,\r\n      stepRef,\r\n      rewardRef,\r\n      winRef,\r\n      overRef,\r\n      enabled,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .btns {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"three-container\" ref=\"wrap\">\r\n    <template v-if=\"isComplete\">\r\n      <slot></slot>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport TWEEN from '@tweenjs/tween.js'\r\nimport { createThreeEnvironment, ThreeEnvironment } from '@/assets/types'\r\nimport { defineComponent, onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nimport { THREE, CameraControls } from '@/assets/three/lib'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport Stats from 'stats.js'\r\nimport PhysicsWorld from '@/assets/physics'\r\n// import CANNON from 'cannon'\r\n// import { cameraJSON } from '@/assets/object.json'\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    const wrap = ref<HTMLElement>()\r\n    const isComplete = ref(false)\r\n    let directionalLight: THREE.DirectionalLight\r\n\r\n    let tick = 0\r\n    let env: ThreeEnvironment\r\n    // const frustumSize = 300\r\n\r\n    const initCameraAndControls = () => {\r\n      env.camera = new THREE.PerspectiveCamera(60, env.width / env.height, 0.1, 1000)\r\n\r\n      // const aspect = window.innerWidth / window.innerHeight\r\n      // env.camera = new THREE.OrthographicCamera((frustumSize * aspect) / -2, (frustumSize * aspect) / 2, frustumSize / 2, frustumSize / -2, 1, 1000)\r\n\r\n      env.camera.position.set(0, 0, 200)\r\n      env.camera.up.set(0, 0, 1)\r\n\r\n      env.control = new CameraControls(env.camera!, env.renderer!.domElement)\r\n\r\n      env.control.maxDistance = 700\r\n\r\n      env.control.mouseButtons.wheel = CameraControls.ACTION.ZOOM\r\n      env.control.mouseButtons.right = CameraControls.ACTION.NONE\r\n\r\n      env.control.touches.two = CameraControls.ACTION.TOUCH_ZOOM\r\n      env.control.touches.three = CameraControls.ACTION.TOUCH_ZOOM_TRUCK\r\n\r\n      env.control.dollySpeed = 0.8\r\n      env.control.minPolarAngle = (0 * Math.PI) / 180\r\n      env.control.maxPolarAngle = (70 * Math.PI) / 180\r\n\r\n      // env.control.minAzimuthAngle = (-50 * Math.PI) / 180\r\n      // env.control.maxAzimuthAngle = (50 * Math.PI) / 180\r\n\r\n      // env.control.setLookAt(0, -245, 170, 0, 0, 0, true)\r\n\r\n      // env.control.rotateTo(0, env.control.polarAngle, false)\r\n\r\n      // console.log(env.control.azimuthAngle)\r\n    }\r\n\r\n    const initLight = () => {\r\n      // 环境光\r\n      const light = new THREE.AmbientLight(0x404040, 0.5)\r\n      light.name = 'ambient-light'\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444)\r\n      hemiLight.position.set(0, 20, 0)\r\n\r\n      directionalLight = new THREE.DirectionalLight(0xffffff, 0.5)\r\n      if (env.camera) {\r\n        const { x, y, z } = env.camera!.position\r\n        directionalLight.position.set(x, y, z)\r\n      }\r\n\r\n      env.scene.add(light, hemiLight, directionalLight)\r\n    }\r\n\r\n    const initPhysicsWorld = () => {\r\n      const physicsWorld = new PhysicsWorld()\r\n      store!.setPhysicsWorld(physicsWorld)\r\n    }\r\n\r\n    const resetSize = () => {\r\n      const dom = wrap.value\r\n      if (!dom || !env) return\r\n      env.width = dom.offsetWidth\r\n      env.height = dom.offsetHeight\r\n\r\n      if (env.camera) {\r\n        env.camera.aspect = env.width / env.height\r\n        env.camera.updateProjectionMatrix()\r\n      }\r\n\r\n      env.renderer.setSize(env.width, env.height)\r\n\r\n      console.log('resize')\r\n    }\r\n\r\n    onMounted(() => {\r\n      env = createThreeEnvironment(wrap.value!, {\r\n        antialias: true,\r\n        alpha: true,\r\n      })\r\n\r\n      initCameraAndControls()\r\n      initLight()\r\n      initPhysicsWorld()\r\n\r\n      store?.setEnv(env)\r\n\r\n      bus.on(ACTION.WINDOW_RESIZE, resetSize)\r\n      isComplete.value = true\r\n\r\n      // env.control?.moveTo(0, 0, -700, true)\r\n\r\n      // test\r\n      console.log(process.env)\r\n      if (process.env.VUE_APP_ENV === 'development') {\r\n        const axesHelper = new THREE.AxesHelper(500)\r\n        env.scene.add(axesHelper)\r\n      }\r\n\r\n      tick = requestAnimationFrame(animate)\r\n\r\n      // const stats = new Stats()\r\n      // stats.showPanel(0) // 0: fps, 1: ms, 2: mb, 3+: custom\r\n      // document.body.appendChild(stats.dom)\r\n\r\n      function animate(timer: number) {\r\n        // stats.begin()\r\n        render(timer)\r\n        // stats.end()\r\n        tick = requestAnimationFrame(animate)\r\n      }\r\n\r\n      function render(timer: number) {\r\n        const delta = env.clock.getDelta()\r\n        TWEEN.update(timer)\r\n        bus.emit(ACTION.RENDER, { delta, timer })\r\n\r\n        if (env.control && env.camera) {\r\n          const camera = env.camera\r\n          const hasUpdated = env.control.update(delta)\r\n          if (hasUpdated) {\r\n            if (directionalLight) {\r\n              const { x, y, z } = camera.position\r\n              directionalLight.position.set(x, y, z)\r\n            }\r\n\r\n            // console.log(`${camera.position.x},${camera.position.y},${camera.position.z}`)\r\n          }\r\n          env.renderer?.render(env.scene, camera)\r\n        }\r\n        // tick = requestAnimationFrame(render)\r\n      }\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      cancelAnimationFrame(tick)\r\n      tick = 0\r\n      if (env) {\r\n        env.scene.clear()\r\n        if (wrap.value) {\r\n          wrap.value.removeChild(env.renderer.domElement)\r\n        }\r\n      }\r\n\r\n      bus.off(ACTION.WINDOW_RESIZE, resetSize)\r\n    })\r\n\r\n    return {\r\n      wrap,\r\n      isComplete,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.three-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import CANNON from 'cannon'\r\nimport { bus, ACTION } from './bus'\r\nimport Cube from './object/Cube'\r\nimport { randPM } from '@/assets/index'\r\nconst WIDTH = 254\r\nconst cubeMaterial = new CANNON.Material('cube')\r\n// cubeMaterial.friction = 0.5\r\n// cubeMaterial.restitution = 0.7\r\n\r\nconst fixedTimeStep = 1.0 / 60\r\nconst maxSubSteps = 3\r\nexport interface PhysicsBody {\r\n  cube: Cube\r\n  bodyBox: CANNON.Body\r\n  type: string\r\n  resolve: () => void\r\n  reject: (err?: any) => void\r\n  timer: number\r\n}\r\n\r\nexport default class PhysicsWorld {\r\n  world: CANNON.World\r\n  bodyGround: Array<CANNON.Body> = []\r\n  bodyList: Array<PhysicsBody> = []\r\n\r\n  constructor() {\r\n    this.render = this.render.bind(this)\r\n    this.world = new CANNON.World()\r\n    // this.world.quatNormalizeSkip = 0\r\n    // this.world.quatNormalizeFast = false\r\n    this.world.gravity.set(0, 0, -9.8 * 70)\r\n\r\n    // const solver = new CANNON.GSSolver()\r\n    // this.world.defaultContactMaterial.contactEquationStiffness = 1e9\r\n    // this.world.defaultContactMaterial.contactEquationRelaxation = 4\r\n    // solver.iterations = 10\r\n    // solver.tolerance = 0.1\r\n    // this.world.solver = new CANNON.SplitSolver(solver)\r\n\r\n    this.world.broadphase = new CANNON.NaiveBroadphase()\r\n\r\n    // this.world.solver.iterations = 10\r\n    const material = new CANNON.Material('ground')\r\n\r\n    const wallMaterial = new CANNON.Material('wall')\r\n\r\n    // 地面\r\n    const bodyGround = new CANNON.Body({\r\n      mass: 0,\r\n      position: new CANNON.Vec3(0, 0, 0.1),\r\n      shape: new CANNON.Plane(),\r\n      material: material,\r\n    })\r\n\r\n    // bodyGround.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 1), -Math.PI / 2)\r\n\r\n    const wall1 = new CANNON.Body({\r\n      mass: 0,\r\n      position: new CANNON.Vec3(WIDTH / 2, 0, 0),\r\n      shape: new CANNON.Plane(),\r\n      material: wallMaterial,\r\n    })\r\n\r\n    wall1.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2)\r\n\r\n    const wall2 = new CANNON.Body({\r\n      mass: 0,\r\n      position: new CANNON.Vec3(-WIDTH / 2, 0, 0),\r\n      shape: new CANNON.Plane(),\r\n      material: wallMaterial,\r\n    })\r\n\r\n    wall2.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), Math.PI / 2)\r\n\r\n    const wall3 = new CANNON.Body({\r\n      mass: 0,\r\n      position: new CANNON.Vec3(0, WIDTH / 2, 0),\r\n      shape: new CANNON.Plane(),\r\n      material: wallMaterial,\r\n    })\r\n\r\n    wall3.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), Math.PI / 2)\r\n\r\n    const wall4 = new CANNON.Body({\r\n      mass: 0,\r\n      position: new CANNON.Vec3(0, -WIDTH / 2, 0),\r\n      shape: new CANNON.Plane(),\r\n      material: wallMaterial,\r\n    })\r\n\r\n    wall4.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2)\r\n\r\n    const groundContactMaterial = new CANNON.ContactMaterial(material, cubeMaterial, {\r\n      friction: 0.1,\r\n      restitution: 0.5,\r\n    })\r\n\r\n    const wallContactMaterial = new CANNON.ContactMaterial(wallMaterial, cubeMaterial, {\r\n      friction: 0,\r\n      restitution: 1,\r\n    })\r\n\r\n    this.world.addContactMaterial(groundContactMaterial)\r\n    this.world.addContactMaterial(wallContactMaterial)\r\n\r\n    this.world.addBody(bodyGround)\r\n    this.world.addBody(wall1)\r\n    this.world.addBody(wall2)\r\n    this.world.addBody(wall3)\r\n    this.world.addBody(wall4)\r\n\r\n    this.bodyGround.push(bodyGround)\r\n\r\n    this.bodyGround.push(wall1, wall2, wall3, wall4)\r\n\r\n    bus.on(ACTION.RENDER, this.render)\r\n  }\r\n\r\n  addBox(cube: Cube, speed = 1) {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const pos = cube.instance.position\r\n      const qua = cube.instance.quaternion\r\n      const size = cube.size\r\n      const halfExtents = new CANNON.Vec3(size / 2, size / 2, size / 2)\r\n      const bodyBox = new CANNON.Body({\r\n        mass: 5,\r\n        position: new CANNON.Vec3(pos.x, pos.y, pos.z),\r\n        shape: new CANNON.Box(halfExtents),\r\n        quaternion: new CANNON.Quaternion(qua.x, qua.y, qua.z, qua.w),\r\n        linearDamping: 0.01,\r\n        angularDamping: 0.05,\r\n        material: cubeMaterial,\r\n      })\r\n\r\n      const x = 500 * speed * randPM()\r\n      const y = 500 * speed * randPM()\r\n      const z = 300 + 300 * speed\r\n\r\n      bodyBox.velocity.set(x, y, z)\r\n      bodyBox.angularVelocity.set(rendAngular(), rendAngular(), (50 + 50 * Math.random()) * randPM())\r\n\r\n      function rendAngular() {\r\n        return (10 + 10 * Math.random()) * randPM()\r\n      }\r\n\r\n      const box: PhysicsBody = {\r\n        type: 'cube',\r\n        cube,\r\n        bodyBox,\r\n        resolve,\r\n        reject,\r\n        timer: new Date().getTime(),\r\n      }\r\n\r\n      this.world.addBody(bodyBox)\r\n      this.bodyList.push(box)\r\n    })\r\n  }\r\n\r\n  // updatePhysics\r\n  render(res: any) {\r\n    const delta = res.delta as number\r\n    if (delta) {\r\n      // console.log(delta)\r\n      this.world.step(fixedTimeStep, delta, maxSubSteps)\r\n      for (let i = this.bodyList.length - 1; i >= 0; i--) {\r\n        const box = this.bodyList[i]\r\n        // const instance = box.cube.instance\r\n        // const pos = box.bodyBox.position\r\n        // const quaternion = box.bodyBox.quaternion\r\n\r\n        if (this.syncInstanceValue(box)) {\r\n          this.bodyList.splice(i, 1)\r\n\r\n          // 延迟去除,多个骰子\r\n          setTimeout(() => {\r\n            this.world.remove(box.bodyBox)\r\n          }, 5000)\r\n          box.resolve()\r\n        }\r\n        // instance.position.set(pos.x, pos.y, pos.z)\r\n        // instance.quaternion.set(quaternion.x, quaternion.y, quaternion.z, quaternion.z)\r\n      }\r\n    }\r\n  }\r\n\r\n  syncInstanceValue(box: PhysicsBody): boolean {\r\n    const t = new Date().getTime()\r\n    const newPosition = box.bodyBox.position\r\n    const position = box.cube.instance.position\r\n    // let isSame = true\r\n\r\n    const z = box.cube.instance.position.z\r\n    const size = box.cube.size\r\n    // console.log(newPosition, position)\r\n    // if (newPosition.z !== position.z) {\r\n    position.set(newPosition.x, newPosition.y, newPosition.z)\r\n    // isSame = false\r\n    // }\r\n    const newQuaternion = box.bodyBox.quaternion\r\n    const quaternion = box.cube.instance.quaternion\r\n    // if (newQuaternion.x !== quaternion.x || newQuaternion.y !== quaternion.y || newQuaternion.z !== quaternion.z || newQuaternion.w !== quaternion.w) {\r\n    quaternion.set(newQuaternion.x, newQuaternion.y, newQuaternion.z, newQuaternion.w)\r\n    // isSame = false\r\n    // }\r\n    const velocity = box.bodyBox.velocity\r\n    const speed = Math.abs(velocity.x + velocity.y + velocity.z)\r\n\r\n    // console.log(speed)\r\n\r\n    // console.log(position.z, size, speed)\r\n    return position.z <= size / 2 + 1 && speed < 1\r\n  }\r\n\r\n  destroy() {\r\n    bus.off(ACTION.RENDER, this.render)\r\n    for (let i = 0; i < this.bodyGround.length; i++) {\r\n      const body = this.bodyGround[i]\r\n      this.world.remove(body)\r\n      this.bodyGround = []\r\n    }\r\n  }\r\n}\r\n\r\n// function toVec3(position: CANNON.Vec3) {\r\n\r\n// }\r\n","\r\nimport TWEEN from '@tweenjs/tween.js'\r\nimport { createThreeEnvironment, ThreeEnvironment } from '@/assets/types'\r\nimport { defineComponent, onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nimport { THREE, CameraControls } from '@/assets/three/lib'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport Stats from 'stats.js'\r\nimport PhysicsWorld from '@/assets/physics'\r\n// import CANNON from 'cannon'\r\n// import { cameraJSON } from '@/assets/object.json'\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    const wrap = ref<HTMLElement>()\r\n    const isComplete = ref(false)\r\n    let directionalLight: THREE.DirectionalLight\r\n\r\n    let tick = 0\r\n    let env: ThreeEnvironment\r\n    // const frustumSize = 300\r\n\r\n    const initCameraAndControls = () => {\r\n      env.camera = new THREE.PerspectiveCamera(60, env.width / env.height, 0.1, 1000)\r\n\r\n      // const aspect = window.innerWidth / window.innerHeight\r\n      // env.camera = new THREE.OrthographicCamera((frustumSize * aspect) / -2, (frustumSize * aspect) / 2, frustumSize / 2, frustumSize / -2, 1, 1000)\r\n\r\n      env.camera.position.set(0, 0, 200)\r\n      env.camera.up.set(0, 0, 1)\r\n\r\n      env.control = new CameraControls(env.camera!, env.renderer!.domElement)\r\n\r\n      env.control.maxDistance = 700\r\n\r\n      env.control.mouseButtons.wheel = CameraControls.ACTION.ZOOM\r\n      env.control.mouseButtons.right = CameraControls.ACTION.NONE\r\n\r\n      env.control.touches.two = CameraControls.ACTION.TOUCH_ZOOM\r\n      env.control.touches.three = CameraControls.ACTION.TOUCH_ZOOM_TRUCK\r\n\r\n      env.control.dollySpeed = 0.8\r\n      env.control.minPolarAngle = (0 * Math.PI) / 180\r\n      env.control.maxPolarAngle = (70 * Math.PI) / 180\r\n\r\n      // env.control.minAzimuthAngle = (-50 * Math.PI) / 180\r\n      // env.control.maxAzimuthAngle = (50 * Math.PI) / 180\r\n\r\n      // env.control.setLookAt(0, -245, 170, 0, 0, 0, true)\r\n\r\n      // env.control.rotateTo(0, env.control.polarAngle, false)\r\n\r\n      // console.log(env.control.azimuthAngle)\r\n    }\r\n\r\n    const initLight = () => {\r\n      // 环境光\r\n      const light = new THREE.AmbientLight(0x404040, 0.5)\r\n      light.name = 'ambient-light'\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444)\r\n      hemiLight.position.set(0, 20, 0)\r\n\r\n      directionalLight = new THREE.DirectionalLight(0xffffff, 0.5)\r\n      if (env.camera) {\r\n        const { x, y, z } = env.camera!.position\r\n        directionalLight.position.set(x, y, z)\r\n      }\r\n\r\n      env.scene.add(light, hemiLight, directionalLight)\r\n    }\r\n\r\n    const initPhysicsWorld = () => {\r\n      const physicsWorld = new PhysicsWorld()\r\n      store!.setPhysicsWorld(physicsWorld)\r\n    }\r\n\r\n    const resetSize = () => {\r\n      const dom = wrap.value\r\n      if (!dom || !env) return\r\n      env.width = dom.offsetWidth\r\n      env.height = dom.offsetHeight\r\n\r\n      if (env.camera) {\r\n        env.camera.aspect = env.width / env.height\r\n        env.camera.updateProjectionMatrix()\r\n      }\r\n\r\n      env.renderer.setSize(env.width, env.height)\r\n\r\n      console.log('resize')\r\n    }\r\n\r\n    onMounted(() => {\r\n      env = createThreeEnvironment(wrap.value!, {\r\n        antialias: true,\r\n        alpha: true,\r\n      })\r\n\r\n      initCameraAndControls()\r\n      initLight()\r\n      initPhysicsWorld()\r\n\r\n      store?.setEnv(env)\r\n\r\n      bus.on(ACTION.WINDOW_RESIZE, resetSize)\r\n      isComplete.value = true\r\n\r\n      // env.control?.moveTo(0, 0, -700, true)\r\n\r\n      // test\r\n      console.log(process.env)\r\n      if (process.env.VUE_APP_ENV === 'development') {\r\n        const axesHelper = new THREE.AxesHelper(500)\r\n        env.scene.add(axesHelper)\r\n      }\r\n\r\n      tick = requestAnimationFrame(animate)\r\n\r\n      // const stats = new Stats()\r\n      // stats.showPanel(0) // 0: fps, 1: ms, 2: mb, 3+: custom\r\n      // document.body.appendChild(stats.dom)\r\n\r\n      function animate(timer: number) {\r\n        // stats.begin()\r\n        render(timer)\r\n        // stats.end()\r\n        tick = requestAnimationFrame(animate)\r\n      }\r\n\r\n      function render(timer: number) {\r\n        const delta = env.clock.getDelta()\r\n        TWEEN.update(timer)\r\n        bus.emit(ACTION.RENDER, { delta, timer })\r\n\r\n        if (env.control && env.camera) {\r\n          const camera = env.camera\r\n          const hasUpdated = env.control.update(delta)\r\n          if (hasUpdated) {\r\n            if (directionalLight) {\r\n              const { x, y, z } = camera.position\r\n              directionalLight.position.set(x, y, z)\r\n            }\r\n\r\n            // console.log(`${camera.position.x},${camera.position.y},${camera.position.z}`)\r\n          }\r\n          env.renderer?.render(env.scene, camera)\r\n        }\r\n        // tick = requestAnimationFrame(render)\r\n      }\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      cancelAnimationFrame(tick)\r\n      tick = 0\r\n      if (env) {\r\n        env.scene.clear()\r\n        if (wrap.value) {\r\n          wrap.value.removeChild(env.renderer.domElement)\r\n        }\r\n      }\r\n\r\n      bus.off(ACTION.WINDOW_RESIZE, resetSize)\r\n    })\r\n\r\n    return {\r\n      wrap,\r\n      isComplete,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./ThreeWrap.vue?vue&type=template&id=0a40718a&scoped=true\"\nimport script from \"./ThreeWrap.vue?vue&type=script&lang=ts\"\nexport * from \"./ThreeWrap.vue?vue&type=script&lang=ts\"\n\nimport \"./ThreeWrap.vue?vue&type=style&index=0&id=0a40718a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0a40718a\"\n\nexport default script","import { rewardTextList } from '@/assets/object.json'\r\nimport { getFileById } from './preload'\r\nimport { MapAddress } from './types'\r\nimport { getCenterRect } from '@/assets/index'\r\nimport { THREE } from '@/assets/three/lib'\r\n// 创建各种canvas纹理\r\nconst FONT_STYLE = 'FangSong'\r\n\r\nexport async function createHotCityCard(m: MapAddress, pointValue: number) {\r\n  const geometry = new THREE.PlaneGeometry(m.width, m.height)\r\n  const canvas = await createCityCanvas(m, pointValue)\r\n  const texture = new THREE.CanvasTexture(canvas)\r\n  texture.needsUpdate = true\r\n  const material = new THREE.MeshBasicMaterial({ map: texture })\r\n\r\n  const mesh = new THREE.Mesh(geometry, material)\r\n  mesh.name = 'hot-city-' + m.index\r\n\r\n  return mesh\r\n}\r\n\r\nexport function createCityCanvas(m: MapAddress, pointValue = 0): Promise<HTMLCanvasElement> {\r\n  return new Promise((resolve, reject) => {\r\n    const width = m.width * 10\r\n    const height = m.height * 10\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = width\r\n    canvas.height = height\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx) throw new Error('无法创建2d 画布')\r\n    const id = `travel-${m.index}`\r\n    // const image = getFile(name) as HTMLImageElement\r\n\r\n    ctx.save()\r\n    // 背景\r\n    ctx.fillStyle = m.options.color!\r\n    ctx.fillRect(0, 0, width, height)\r\n    ctx.fillStyle = '#fff'\r\n\r\n    const borderWidth = width * 0.05\r\n\r\n    ctx.fillRect(borderWidth, height * 0.3, width - borderWidth * 2, height * 0.7 - borderWidth)\r\n\r\n    ctx.font = `bold ${width * 0.18}px ${FONT_STYLE}`\r\n    ctx.textAlign = 'center'\r\n    ctx.textBaseline = 'middle'\r\n\r\n    const texts = m.options.texts!\r\n    const areaText = texts[0]\r\n    const country = texts[1]\r\n\r\n    ctx.fillText(areaText, width / 2, 0.08 * height)\r\n    ctx.fillText(country, width / 2, 0.2 * height)\r\n\r\n    ctx.fillStyle = '#000'\r\n    if (texts.length === 3) {\r\n      ctx.fillText(texts[2], width / 2, 0.4 * height)\r\n    } else {\r\n      ctx.fillText(texts[2], width / 2, 0.36 * height)\r\n      ctx.fillText(texts[3], width / 2, 0.45 * height)\r\n    }\r\n\r\n    ctx.restore()\r\n\r\n    getFileById(id)\r\n      .then(res => {\r\n        const image = res.object as HTMLImageElement\r\n\r\n        const maxHeight = 0.5 * height - borderWidth\r\n        const maxWidth = width - 2 * borderWidth\r\n\r\n        const rectRange = getCenterRect(image.width, image.height, maxWidth, maxHeight)\r\n\r\n        ctx.drawImage(image, borderWidth + rectRange.x, 0.5 * height + rectRange.y, rectRange.width, rectRange.height)\r\n\r\n        ctx.strokeStyle = '#000'\r\n        ctx.strokeRect(1, 1, width - 2, height - 2)\r\n\r\n        if (pointValue) {\r\n          const color = '#ffc428'\r\n          addStar(ctx, width * 0.6, height * 0.5, width * 0.15, color)\r\n          ctx.fillStyle = color\r\n          ctx.textAlign = 'left'\r\n          ctx.font = `bold ${width * 0.15}px ${FONT_STYLE}`\r\n          ctx.fillText(`×${pointValue}`, width * 0.72, height * 0.53)\r\n        }\r\n\r\n        resolve(canvas)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n// 打工地点创建\r\n// name: string, color: string, imageUrl: string | undefined, width: number, height: number\r\nexport function createWorkCanvas(m: MapAddress, color: string): Promise<HTMLCanvasElement> {\r\n  const width = m.width * 10\r\n  const height = m.height * 10\r\n  const name = m.options.name || '未命名'\r\n  const imageUrl = m.options.imageUrl\r\n  const borderWidth = 0.05\r\n  const offsetTop = 0.25\r\n  \r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = width\r\n    canvas.height = height\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx) throw new Error('无法创建2d 画布')\r\n\r\n    ctx.save()\r\n\r\n    // 背景\r\n    ctx.fillStyle = color\r\n    ctx.fillRect(0, 0, width, height)\r\n\r\n    ctx.font = `bold ${width * 0.2}px ${FONT_STYLE}`\r\n    ctx.textAlign = 'center'\r\n    ctx.textBaseline = 'middle'\r\n    ctx.fillStyle = '#000'\r\n    ctx.fillText(name, width / 2, height * 0.1)\r\n\r\n    ctx.restore()\r\n\r\n    if (imageUrl) {\r\n      const image = new Image()\r\n      image.src = imageUrl || require('@/assets/image/icon/temp.jpg')\r\n\r\n      image.onload = () => {\r\n        ctx.drawImage(image, width * borderWidth, height * offsetTop, width * (1 - borderWidth * 2), height * (1 - offsetTop - borderWidth))\r\n\r\n        resolve(canvas)\r\n      }\r\n\r\n      image.onerror = err => {\r\n        reject(err)\r\n      }\r\n    } else {\r\n      const id = 'work-' + m.index\r\n      getFileById(id)\r\n        .then(res => {\r\n          const image = res.object as HTMLImageElement\r\n          const maxHeight = 0.7 * height\r\n          const maxWidth = width - 2 * borderWidth\r\n          ctx.fillStyle = '#fff'\r\n          ctx.fillRect(width * borderWidth, height * offsetTop, width * (1 - borderWidth * 2), height * (1 - offsetTop - borderWidth))\r\n\r\n          const rectRange = getCenterRect(image.width, image.height, maxWidth, maxHeight)\r\n\r\n          ctx.drawImage(image, borderWidth + rectRange.x, offsetTop * height + rectRange.y, rectRange.width, rectRange.height)\r\n\r\n          resolve(canvas)\r\n        })\r\n        .catch(err => {\r\n          reject(err)\r\n        })\r\n    }\r\n  })\r\n}\r\n\r\nexport function createRewardCanvas(rewardIndex: number, color: string, color1: string, width: number, height: number) {\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = width\r\n  canvas.height = height\r\n  const ctx = canvas.getContext('2d')\r\n  if (!ctx) throw new Error('无法创建2d 画布')\r\n  ctx.save()\r\n\r\n  // 背景\r\n  ctx.fillStyle = color\r\n  ctx.fillRect(0, 0, width, height)\r\n  ctx.fillStyle = color1\r\n  ctx.fillRect(0, 0, width, height * 0.25)\r\n\r\n  ctx.font = `bold ${width * 0.2}px ${FONT_STYLE}`\r\n  ctx.textAlign = 'center'\r\n  ctx.textBaseline = 'middle'\r\n\r\n  ctx.fillStyle = '#000'\r\n  ctx.fillText('机会', width / 2, height * 0.1)\r\n\r\n  if (rewardTextList[rewardIndex]) {\r\n    const list = rewardTextList[rewardIndex]\r\n    for (let i = 0; i < list.length; i++) {\r\n      const rewardText = list[i]\r\n      ctx.fillStyle = rewardText.color || '#000'\r\n      const fontSize = width * (rewardText.fontSize || 0.15)\r\n      ctx.font = `bold ${fontSize}px ${FONT_STYLE}`\r\n\r\n      ctx.fillText(rewardText.text, width / 2, height * rewardText.height)\r\n    }\r\n  }\r\n\r\n  ctx.restore()\r\n\r\n  return canvas\r\n}\r\n\r\n// 发薪日纹理创建\r\nexport function createType0Canvas(name: string, color: string, rotation: number | undefined, width: number, height: number) {\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = width\r\n  canvas.height = height\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  if (!ctx) throw new Error('无法创建2d 画布')\r\n  ctx.save()\r\n\r\n  ctx.fillStyle = '#8ace57' // 背景色\r\n  ctx.fillRect(0, 0, width, height)\r\n  ctx.translate(width / 2, height / 2)\r\n  if (rotation) ctx.rotate(rotation)\r\n\r\n  ctx.fillStyle = color\r\n  ctx.fillRect(-width / 2, -height * 0.8, width, height * 0.6)\r\n\r\n  const text = name + '发薪日'\r\n  ctx.fillStyle = '#fff'\r\n  ctx.font = `bold ${width * 0.1}px ${FONT_STYLE}`\r\n  ctx.textAlign = 'center'\r\n  ctx.textBaseline = 'middle'\r\n  ctx.fillText(text, 0, -height * 0.3)\r\n\r\n  ctx.font = `bold ${width * 0.1}px ${FONT_STYLE}`\r\n  ctx.fillStyle = '#000'\r\n  ctx.fillText('领取薪资收入500元', 0, -height * 0.05)\r\n  ctx.fillText('可以立即变成', 0, height * 0.1)\r\n\r\n  ctx.fillStyle = '#ce3b3b'\r\n  ctx.font = `bold ${width * 0.15}px ${FONT_STYLE}`\r\n  ctx.fillText('旅游状态', 0, height * 0.25)\r\n\r\n  ctx.restore()\r\n\r\n  return canvas\r\n}\r\n\r\nexport function createStartPointCanvas(backgroundColor: string, width: number, height: number) {\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = width\r\n  canvas.height = height\r\n  const ctx = canvas.getContext('2d')\r\n  if (!ctx) throw new Error('无法创建2d 画布')\r\n  ctx.save()\r\n\r\n  ctx.fillStyle = backgroundColor // 背景色\r\n  ctx.fillRect(0, 0, width, height)\r\n\r\n  // 中间白色\r\n  const borderWidth = width * 0.05\r\n  ctx.fillStyle = '#ffffff'\r\n  ctx.fillRect(borderWidth, borderWidth, width - 2 * borderWidth, height - 2 * borderWidth)\r\n\r\n  ctx.translate(width / 2, height / 2)\r\n  ctx.rotate((45 * Math.PI) / 180) // 旋转45度\r\n\r\n  ctx.fillStyle = backgroundColor\r\n  ctx.fillRect(-width / 2, -height * 0.8, width, height * 0.6)\r\n\r\n  ctx.fillStyle = '#ffc428'\r\n  ctx.font = `bold ${width * 0.2}px ${FONT_STYLE}`\r\n  ctx.textAlign = 'center'\r\n  ctx.textBaseline = 'middle'\r\n  ctx.fillText('起点', 0, 0)\r\n\r\n  ctx.restore()\r\n\r\n  addStar(ctx, width * 0.8, height * 0.2, width * 0.15, '#fff', (28 * Math.PI) / 180)\r\n  ctx.strokeStyle = '#000'\r\n  ctx.strokeRect(1, 1, width - 2, height - 2)\r\n\r\n  return canvas\r\n}\r\n\r\nexport function createBigCityCanvas(m: MapAddress, pointValue = 0): Promise<HTMLCanvasElement> {\r\n  const width = m.width * 10\r\n  const height = m.height * 10\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = width\r\n  canvas.height = height\r\n  const ctx = canvas.getContext('2d')\r\n  if (!ctx) throw new Error('无法创建2d 画布')\r\n  const id = `travel-${m.index}`\r\n\r\n  return new Promise((resolve, reject) => {\r\n    getFileById(id).then(res => {\r\n      ctx.save()\r\n      ctx.fillStyle = m.options.color!\r\n      ctx.fillRect(0, 0, width, height)\r\n      const borderWidth = width * 0.05\r\n      ctx.fillStyle = '#fff'\r\n      ctx.fillRect(borderWidth, borderWidth, width - 2 * borderWidth, height - 2 * borderWidth)\r\n\r\n      ctx.translate(width / 2, height / 2)\r\n      ctx.rotate((45 * Math.PI) / 180)\r\n\r\n      ctx.fillStyle = m.options.color!\r\n      ctx.fillRect(-width / 2, -height * 0.8, width, height * 0.54)\r\n\r\n      ctx.font = `bold ${width * 0.1}px ${FONT_STYLE}`\r\n      ctx.textAlign = 'center'\r\n      ctx.textBaseline = 'middle'\r\n\r\n      const texts = m.options.texts!\r\n      const areaText = texts[0]\r\n      const country = texts[1]\r\n      ctx.fillStyle = '#fff'\r\n      ctx.fillText(areaText, 0, -0.45 * height)\r\n      ctx.fillText(country, 0, -0.35 * height)\r\n      // ctx.fillText(country, width / 2, 0.2 * height)\r\n      ctx.fillStyle = '#000'\r\n      if (texts.length === 3) {\r\n        ctx.fillText(texts[2], 0, -0.15 * height)\r\n      } else {\r\n        ctx.fillText(texts[2], 0, -0.2 * height)\r\n        ctx.fillText(texts[3], 0, -0.1 * height)\r\n      }\r\n\r\n      const maxWidth = width * 0.6\r\n      const maxHeight = height * 0.3\r\n      const image = res.object as HTMLImageElement\r\n      const rectRange = getCenterRect(image.width, image.height, maxWidth, maxHeight)\r\n\r\n      ctx.drawImage(image, -rectRange.width / 2, rectRange.y, rectRange.width, rectRange.height)\r\n\r\n      // ctx.fillStyle = 'yellow'\r\n\r\n      // ctx.fillRect(-maxWidth / 2, 0, maxWidth, maxHeight)\r\n\r\n      ctx.restore()\r\n\r\n      ctx.strokeStyle = '#000'\r\n      ctx.strokeRect(1, 1, width - 2, height - 2)\r\n\r\n      resolve(canvas)\r\n    })\r\n  })\r\n}\r\n\r\nfunction addStar(ctx: CanvasRenderingContext2D, x: number, y: number, r: number, color: string, rotation = 0) {\r\n  ctx.save()\r\n  ctx.translate(x, y)\r\n  ctx.rotate(rotation)\r\n  ctx.fillStyle = color\r\n  ctx.beginPath()\r\n  const r2 = r / 2\r\n  const numPts = 5\r\n  for (let i = 0; i < numPts * 2; i++) {\r\n    const l = i % 2 === 1 ? r2 : r\r\n    const a = (i / numPts) * Math.PI\r\n    const x1 = l * Math.cos(a)\r\n    const y1 = l * Math.sin(a)\r\n\r\n    ctx.lineTo(x1, y1)\r\n  }\r\n\r\n  ctx.closePath()\r\n\r\n  ctx.fill()\r\n\r\n  ctx.restore()\r\n}\r\n","\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { defineComponent, ref, onBeforeMount, onMounted, watch, watchEffect } from 'vue'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport { createStar } from '@/assets/index'\r\nimport TWEEN, { Tween } from '@tweenjs/tween.js'\r\nimport { createAnimation } from '@/assets'\r\n// import { workMapList } from '@/assets/setting'\r\nimport { createType0Canvas, createWorkCanvas, createRewardCanvas } from '@/assets/canvas-background'\r\nimport { MapAddress, PointType } from '@/assets/types'\r\n// import { useStore } from 'vuex'\r\n\r\nexport default defineComponent({\r\n  name: 'WorkMap',\r\n  setup(props, { emit }) {\r\n    const isLoad = ref(false)\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const loader = new THREE.TextureLoader()\r\n\r\n    const mapGeometry = new THREE.PlaneGeometry(254, 254)\r\n    const mapMaterial = new THREE.MeshBasicMaterial({ color: 0x3f4470, side: THREE.DoubleSide })\r\n    const map = new THREE.Mesh(mapGeometry, mapMaterial)\r\n    map.position.z = -1000\r\n    map.visible = false\r\n\r\n    // logo\r\n    const logoGeometry = new THREE.PlaneGeometry(140, 82)\r\n    const logoTexture = loader.load(require('@/assets/image/logo.png'))\r\n    const logoMaterial = new THREE.MeshLambertMaterial({\r\n      map: logoTexture,\r\n      transparent: true,\r\n    })\r\n    const logo = new THREE.Mesh(logoGeometry, logoMaterial)\r\n    logo.position.z = 0.5\r\n    map.add(logo)\r\n\r\n    let tween: Tween<object> | null\r\n\r\n    watchEffect(() => {\r\n      const val = store.gameState.activeMap\r\n      if (tween) {\r\n        tween.stop()\r\n        tween = null\r\n      }\r\n\r\n      if (val === 0) {\r\n        map.visible = true\r\n        const target = { z: -30 }\r\n        const t = Math.abs(map.position.z + target.z)\r\n\r\n        // console.log(t)\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n        tween.onComplete(() => {\r\n          tween = null\r\n        })\r\n      } else {\r\n        const target = { z: -1000 }\r\n        const t = Math.abs(target.z + map.position.z)\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n        tween.onComplete(() => {\r\n          map.visible = false\r\n          tween = null\r\n        })\r\n      }\r\n    })\r\n\r\n    // watch(\r\n    //   () => store.gameState.activeMap,\r\n    //   val => {\r\n    //     if (val === 0) {\r\n    //       // map.visible = true\r\n    //     } else {\r\n    //       map.visible = false\r\n    //     }\r\n    //   },\r\n    // )\r\n\r\n    const createMaterial = async (m: MapAddress): Promise<THREE.Material> => {\r\n      const player = store?.gameState.players.find(t => t.id === m.options.playerId)\r\n      if (!player) throw new Error('未找到对应玩家')\r\n\r\n      if (m.type === PointType.START) {\r\n        const canvas = createType0Canvas(player.name, player.color, m.options?.rotation, m.width * 10, m.height * 10)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      } else if (m.type === PointType.WORK) {\r\n        // const canvas = await createWorkCanvas(m.options?.name || '未命名', player.color2, m.options?.imageUrl, m.width * 10, m.height * 10)\r\n        const canvas = await createWorkCanvas(m, player.color2)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n\r\n        return new THREE.MeshBasicMaterial({ map: texture })\r\n      } else if (m.type === PointType.REWARD) {\r\n        const canvas = createRewardCanvas(m.options.rewardIndex!, '#8ace57', player.color2, m.width * 10, m.height * 10)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n\r\n        return new THREE.MeshBasicMaterial({ map: texture })\r\n      } else {\r\n        return new THREE.MeshBasicMaterial({ color: 0xff0000 })\r\n      }\r\n    }\r\n\r\n    let workAddressCount = 0\r\n    // 地图棋盘格子\r\n    store.gameState.workMapList.forEach(async m => {\r\n      const geometry = new THREE.PlaneGeometry(m.width, m.height)\r\n      const material = await createMaterial(m)\r\n      // 发薪日\r\n\r\n      const mesh = new THREE.Mesh(geometry, material)\r\n\r\n      mesh.name = `work-${m.index}`\r\n\r\n      mesh.position.set(m.position[0], m.position[1], m.position[2])\r\n\r\n      if (m.type !== PointType.START && m.options?.rotation) {\r\n        mesh.rotation.z = m.options.rotation\r\n      }\r\n\r\n      map.add(mesh)\r\n      workAddressCount++\r\n\r\n      if (workAddressCount === store.gameState.workMapList.length) {\r\n        if (isLoad.value) {\r\n          emit('over')\r\n        }\r\n      }\r\n    })\r\n\r\n    const init = () => {\r\n      const env = store.env\r\n\r\n      if (!env) {\r\n        // console.warn('three环境未获取')\r\n        throw new Error('three环境未获取')\r\n      }\r\n      // map.rotation.z = -Math.PI * 2\r\n      env.scene.add(map)\r\n\r\n      store.setMap0(map)\r\n      isLoad.value = true\r\n\r\n      if (workAddressCount === store.gameState.workMapList.length) {\r\n        emit('over')\r\n      }\r\n\r\n      // setTimeout(() => {\r\n      //   emit('over')\r\n      // }, 100)\r\n\r\n      // const tween = createAnimation(map.rotation, { z: 0 }, 1000)\r\n\r\n      // tween.onComplete(() => {\r\n      //   store?.setMap1(map)\r\n      //   isLoad.value = true\r\n      //   emit('over')\r\n      // })\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n    })\r\n\r\n    onBeforeMount(() => {\r\n      // const env = store?.gameState.env\r\n      const env = store?.env\r\n      env?.scene.remove(map)\r\n      mapGeometry.dispose()\r\n      mapMaterial.dispose()\r\n    })\r\n\r\n    function addStar(address: MapAddress, level?: number): Promise<boolean> {\r\n      const star = createStar()\r\n      const addressName = `work-${address.index}`\r\n      const count = level ? level : address.options.level || 1\r\n\r\n      const scale = {\r\n        x: 0.15,\r\n        y: 0.15,\r\n        // z: 0.15,\r\n      }\r\n      // star.scale.x = scale.x\r\n      // star.scale.y = scale.y\r\n\r\n      // star.scale.set(scale.x, scale.y, scale.z)\r\n      const x = address.width * 0.3 * count - address.width * 0.6\r\n      const y = address.height * 0.6\r\n      star.position.set(x, y, 0.2)\r\n      const addressMesh = map.children.find(t => t.name === addressName)\r\n\r\n      if (!addressMesh) throw new Error('未找到打工地点:' + addressName)\r\n\r\n      addressMesh.add(star)\r\n\r\n      // const tween =\r\n      // createAnimation(star.position, { z: 2 }, 2000, TWEEN.Easing.Linear.None)\r\n\r\n      const tween = createAnimation(star.scale, scale, 1500, TWEEN.Easing.Quartic.In)\r\n\r\n      return new Promise(resolve => {\r\n        // resolve(true)\r\n        tween.onComplete(() => {\r\n          resolve(true)\r\n        })\r\n      })\r\n    }\r\n\r\n    function lookAtPosition(point: THREE.Vector3): void {\r\n      const env = store?.env\r\n      const control = env?.control\r\n      if (control) {\r\n        // const t = Math.sqrt(Math.pow(point.z, 2) + Math.pow(point.x, 2))\r\n        // const polarVec = new THREE.Vector2(-point.y, t)\r\n        // const polarRadian = polarVec.angle()\r\n        const azimuthVec = new THREE.Vector2(point.y, point.x)\r\n\r\n        // console.log(azimuthVec.angle())\r\n        let redian = -azimuthVec.angle()\r\n        // console.log(redian, Math.PI, control.azimuthAngle)\r\n        // redian = -redian\r\n        // if (redian < Math.PI) {\r\n        // }\r\n        // if (redian < Math.PI) {\r\n        //   redian = Math.PI - redian\r\n        // } else {\r\n        //   redian += (90 * Math.PI) / 180\r\n        // }\r\n\r\n        // let azimuthRadian = redian\r\n\r\n        const num = Math.round((control.azimuthAngle - redian) / (2 * Math.PI))\r\n        const azimuthRadian = num * 2 * Math.PI + redian\r\n\r\n        control.rotateTo(azimuthRadian, control.polarAngle, true)\r\n\r\n        // control.setLookAt(0, 0, 100, position.x, position.y, position.z, true)\r\n        // control.zoomTo(1, true)\r\n      } else {\r\n        throw new Error('control 未初始化')\r\n      }\r\n    }\r\n\r\n    return {\r\n      addStar,\r\n      lookAtPosition,\r\n      isLoad,\r\n    }\r\n  },\r\n  render() {\r\n    return null\r\n  },\r\n})\r\n","import script from \"./WorkMap.vue?vue&type=script&lang=ts\"\nexport * from \"./WorkMap.vue?vue&type=script&lang=ts\"\n\nexport default script","<template>\r\n  <HotCityView v-if=\"isLoad\" ref=\"hotCityRef\" />\r\n</template>\r\n<script lang=\"ts\">\r\nimport HotCityView from './HotCityView.vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { defineComponent, onBeforeUnmount, onMounted, ref, watchEffect } from 'vue'\r\nimport { createStar, showMessage } from '@/assets/index'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport TWEEN, { Tween } from '@tweenjs/tween.js'\r\nimport { createAnimation } from '@/assets'\r\nimport { HotCity, MapAddress, PointType } from '@/assets/types'\r\nimport { createBigCityCanvas, createCityCanvas, createStartPointCanvas } from '@/assets/canvas-background'\r\nimport PointSelect from '@/assets/three/PointSelect/index'\r\n\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'TravelMap',\r\n  components: { HotCityView },\r\n  setup(props, { emit }) {\r\n    const isLoad = ref(false)\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n\r\n    const hotCityRef = ref<InstanceType<typeof HotCityView>>()\r\n\r\n    const mapGeometry = new THREE.PlaneGeometry(254, 254)\r\n    const mapMaterial = new THREE.MeshBasicMaterial({ color: 0x3f4470, side: THREE.DoubleSide })\r\n    const map = new THREE.Mesh(mapGeometry, mapMaterial)\r\n    map.position.z = -1000\r\n    map.visible = false\r\n\r\n    const getPointValue = (index: number): HotCity | null => {\r\n      if (store.hot8.value && index === store.hot8.value.index)\r\n        return {\r\n          address: store.hot8.value,\r\n          point: 8,\r\n        }\r\n      if (store.hot7.value && store.hot7.value.index === index)\r\n        return {\r\n          address: store.hot7.value,\r\n          point: 7,\r\n        }\r\n      if (store.hot6.value && store.hot6.value.index === index)\r\n        return {\r\n          address: store.hot6.value,\r\n          point: 6,\r\n        }\r\n      if (store.hot5.value && store.hot5.value.index === index)\r\n        return {\r\n          address: store.hot5.value,\r\n          point: 5,\r\n        }\r\n      return null\r\n    }\r\n\r\n    const createMaterial = async (m: MapAddress): Promise<THREE.Material> => {\r\n      if (m.type === PointType.START) {\r\n        const canvas = createStartPointCanvas('#ffc428', m.width * 10, m.height * 10)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      } else if (m.type === PointType.CITY) {\r\n        // const value = getPointValue(m.index)\r\n        const canvas = await createCityCanvas(m)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      } else if (m.type === PointType.BIG_CITY) {\r\n        // const value = getPointValue(m.index)\r\n        const canvas = await createBigCityCanvas(m)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      }\r\n\r\n      return new THREE.MeshBasicMaterial({ color: 0xff0000 })\r\n    }\r\n\r\n    store.gameState.travelMapList.forEach(async m => {\r\n      const geometry = new THREE.PlaneGeometry(m.width, m.height)\r\n      const material = await createMaterial(m)\r\n\r\n      const mesh = new THREE.Mesh(geometry, material)\r\n      mesh.name = `travel-${m.index}`\r\n\r\n      mesh.position.set(...m.position)\r\n\r\n      if (m.options.rotation) {\r\n        mesh.rotation.z = m.options.rotation\r\n      }\r\n\r\n      map.add(mesh)\r\n    })\r\n\r\n    const star8 = createStar()\r\n    const star7 = createStar()\r\n    const star6 = createStar()\r\n    const star5 = createStar()\r\n\r\n    const initPosition = (star: THREE.Mesh, hot: MapAddress | null, scale: number) => {\r\n      if (hot === null) {\r\n        star.parent?.remove(star)\r\n      } else {\r\n        const position = hot.position\r\n        let x = position[0]\r\n        let y = position[1]\r\n        const offset = 16\r\n\r\n        if (Math.abs(x) >= Math.abs(y)) {\r\n          if (x > 0) {\r\n            x += offset\r\n            y += 5\r\n          } else if (x < 0) {\r\n            x -= offset\r\n            y -= 5\r\n          }\r\n        } else {\r\n          if (y > 0) {\r\n            y += offset\r\n            x -= 5\r\n          } else {\r\n            y -= offset\r\n            x += 5\r\n          }\r\n        }\r\n\r\n        star.position.set(x, y, 2)\r\n\r\n        star.scale.set(scale, scale, scale)\r\n        if (!star.parent) {\r\n          map.add(star)\r\n        }\r\n      }\r\n    }\r\n\r\n    watchEffect(() => {\r\n      initPosition(star8, store.hot8.value, 0.3)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star7, store.hot7.value, 0.25)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star6, store.hot6.value, 0.2)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star5, store.hot5.value, 0.15)\r\n    })\r\n\r\n    let tween: Tween<object> | null\r\n\r\n    watchEffect(() => {\r\n      const val = store.gameState.activeMap\r\n      if (tween) {\r\n        tween.stop()\r\n        tween = null\r\n      }\r\n      // console.log('travel map ' + val)\r\n      if (val === 1) {\r\n        map.visible = true\r\n        const target = { z: -30 }\r\n        const t = Math.abs(map.position.z + target.z)\r\n\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n        tween.onComplete(() => {\r\n          tween = null\r\n        })\r\n      } else {\r\n        const target = { z: -1000 }\r\n\r\n        const t = Math.abs(target.z + map.position.z)\r\n\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n\r\n        tween.onComplete(() => {\r\n          map.visible = false\r\n          tween = null\r\n        })\r\n      }\r\n    })\r\n\r\n    const init = () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('three环境未获取')\r\n\r\n      env.scene.add(map)\r\n\r\n      setTimeout(() => {\r\n        store.setMap1(map)\r\n        isLoad.value = true\r\n        emit('over')\r\n      }, 100)\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      const env = store.env\r\n      env?.scene.remove(map)\r\n      mapGeometry.dispose()\r\n      mapMaterial.dispose()\r\n    })\r\n\r\n    const chooseStartPoint = (): Promise<MapAddress> => {\r\n      return new Promise(resolve => {\r\n        // console.log('choose')\r\n        const env = store.env!\r\n\r\n        const startPoints = store.gameState.travelMapList.filter(t => t.type === PointType.START)\r\n\r\n        const selectPoints = startPoints.map(p => {\r\n          const index = p.index\r\n          const name = `travel-${index}`\r\n          const target = map.children.find(t => t.name === name)\r\n\r\n          if (!target) throw new Error('未找到起点对象,name:' + name)\r\n\r\n          const point = new PointSelect({ target, env, extData: p, show: true, click })\r\n\r\n          return point\r\n        })\r\n\r\n        showMessage('请玩家选择起点')\r\n\r\n        function click(data: MapAddress) {\r\n          selectPoints.forEach(sp => {\r\n            sp.destroy()\r\n          })\r\n          resolve(data)\r\n        }\r\n      })\r\n    }\r\n\r\n    const removeHotCity = async (hotCity: HotCity) => {\r\n      await hotCityRef.value!.removeHotCity(hotCity.point, hotCity.address.index)\r\n\r\n      const index = 8 - hotCity.point\r\n      store.removeHotCity(index)\r\n    }\r\n\r\n    return {\r\n      chooseStartPoint,\r\n      getPointValue,\r\n      removeHotCity,\r\n      isLoad,\r\n      hotCityRef,\r\n    }\r\n  },\r\n})\r\n</script>\r\n","\r\nimport { defineComponent } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport { createHotCityCard } from '@/assets/canvas-background'\r\nimport { createAnimation, delay } from '@/assets/index'\r\nimport TWEEN from '@tweenjs/tween.js'\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const map = store.map1!\r\n    const positions = [\r\n      [-20, -30, 1],\r\n      [-20, 30, 1],\r\n      [20, -30, 1],\r\n      [20, 30, 1],\r\n    ]\r\n    const hotCityGroups = store.gameState.hotCitys\r\n\r\n    for (let i = 0; i < hotCityGroups.length; i++) {\r\n      const citys = hotCityGroups[i]\r\n      const group = new THREE.Group()\r\n      const pointValue = 8 - i\r\n      group.name = 'hot-' + pointValue\r\n      const pos = positions[i]\r\n      group.position.set(pos[0], pos[1], pos[2])\r\n\r\n      for (let s = 0; s < citys.length; s++) {\r\n        const city = citys[s]\r\n        let z = s * 0.5 + 0.5 // 高度\r\n        createHotCityCard(city, pointValue).then(mesh => {\r\n          // name = hot-city-?\r\n          mesh.position.set(0, 0, z)\r\n          group.add(mesh)\r\n        })\r\n      }\r\n\r\n      map.add(group)\r\n    }\r\n\r\n    const removeHotCity = async (pointValue: number, cityIndex: number): Promise<void> => {\r\n      const name = 'hot-' + pointValue\r\n      const group = map.children.find(t => {\r\n        return t.name === name\r\n      })\r\n\r\n      if (!group) {\r\n        throw new Error('未找到对应积分的group:' + pointValue)\r\n      }\r\n\r\n      const addressName = `hot-city-${cityIndex}`\r\n\r\n      const mesh = group.children.find(t => t.name === addressName)\r\n\r\n      if (!mesh) {\r\n        throw new Error('未找到对应热门城市:' + addressName)\r\n      }\r\n\r\n      const target = { z: 20 }\r\n      const camera = store.env!.camera!\r\n      const rotation = camera.rotation\r\n\r\n      createAnimation(mesh.position, target, 800, TWEEN.Easing.Linear.None)\r\n\r\n      createAnimation(mesh.rotation, rotation, 800, TWEEN.Easing.Linear.None)\r\n\r\n      await delay(1)\r\n\r\n      createAnimation(\r\n        mesh.position,\r\n        {\r\n          x: camera.position.x,\r\n          y: camera.position.y,\r\n          z: camera.position.z + 200,\r\n        },\r\n        1000,\r\n        TWEEN.Easing.Quartic.In,\r\n      )\r\n\r\n      await delay(1.2)\r\n\r\n      group.remove(mesh)\r\n      return\r\n    }\r\n\r\n    return {\r\n      removeHotCity,\r\n    }\r\n  },\r\n  render() {\r\n    return null\r\n  },\r\n})\r\n","import script from \"./HotCityView.vue?vue&type=script&lang=ts\"\nexport * from \"./HotCityView.vue?vue&type=script&lang=ts\"\n\nexport default script","import jss, { Classes, Styles } from 'jss'\r\nimport preset from 'jss-preset-default'\r\n\r\njss.setup(preset())\r\n\r\nexport function createUseStyles(styles: Partial<Styles<string | number | symbol, any, undefined>>): Classes<string> {\r\n  const sheet = jss.createStyleSheet(styles)\r\n\r\n  const { classes } = sheet.attach()\r\n\r\n  return classes\r\n}\r\n","import { createUseStyles } from '@/assets/jss'\r\n\r\nconst style = {\r\n  base_element_body: {\r\n    width: 0,\r\n    height: 0,\r\n    position: 'absolute',\r\n  },\r\n}\r\n\r\nexport const useStyles = createUseStyles(style)\r\n","import { THREE } from '@/assets/three/lib'\r\nimport { ThreeEnvironment } from '@/assets/types'\r\n// import './index.scss'\r\nimport { useStyles } from './index.style'\r\nimport { bus, ACTION } from '@/assets/bus'\r\n\r\nconst material = new THREE.MeshBasicMaterial({\r\n  transparent: true,\r\n  color: 0xff0000,\r\n  opacity: 0,\r\n})\r\n\r\nexport interface BaseOptions {\r\n  position?: [number, number, number]\r\n  target: THREE.Object3D\r\n  isTop?: boolean\r\n  env: ThreeEnvironment\r\n  extData?: any\r\n  show?: boolean\r\n  offset?: [number, number]\r\n}\r\n\r\nexport class BaseElement {\r\n  private target: THREE.Object3D\r\n  env: ThreeEnvironment\r\n  private isTop: boolean\r\n  private extData: any\r\n  private offset: [number, number]\r\n  private position: [number, number, number]\r\n  private instance: THREE.Mesh\r\n  private isShow = false\r\n\r\n  private el: HTMLElement\r\n  private element?: HTMLElement\r\n  private tick?: number\r\n\r\n  constructor(opt: BaseOptions) {\r\n    this.render = this.render.bind(this)\r\n\r\n    this.target = opt.target\r\n    this.isTop = opt.isTop === undefined ? true : opt.isTop\r\n    this.env = opt.env\r\n    this.extData = opt.extData\r\n    this.offset = opt.offset || [0, 0]\r\n    this.position = opt.position || [0, 0, 0]\r\n    // create mesh\r\n    const width = 0.2\r\n    const geometry = new THREE.BoxGeometry(width, width, width)\r\n    this.instance = new THREE.Mesh(geometry, material)\r\n\r\n    if (opt.position) this.instance.position.set(...opt.position)\r\n\r\n    // create base element\r\n    const div = document.createElement('div')\r\n    // div.className = '__base_element_body'\r\n    div.className = useStyles.base_element_body\r\n    div.style.display = 'none'\r\n    this.el = div\r\n\r\n    if (opt.show !== false) {\r\n      this.show()\r\n    }\r\n\r\n    // bus.on(ACTION.RENDER, this.render)\r\n  }\r\n\r\n  updateElement(element: HTMLElement) {\r\n    element.style.position = 'absolute'\r\n    element.style.left = this.offset[0] + 'px'\r\n    element.style.top = this.offset[1] + 'px'\r\n\r\n    this.element = element\r\n    this.el.innerHTML = ''\r\n    this.el.appendChild(element)\r\n  }\r\n\r\n  getElement() {\r\n    return this.element || null\r\n  }\r\n\r\n  setOffset(offset: [number, number]) {\r\n    this.offset = offset\r\n    if (this.element) {\r\n      this.element.style.left = this.offset[0] + 'px'\r\n      this.element.style.top = this.offset[1] + 'px'\r\n    }\r\n  }\r\n\r\n  setPosition(position: [number, number, number]) {\r\n    this.position = position\r\n    this.instance.position.set(...this.position)\r\n  }\r\n\r\n  getPosition() {\r\n    return [...this.position]\r\n  }\r\n\r\n  getExtData() {\r\n    return this.extData\r\n  }\r\n\r\n  setExtData(data: any) {\r\n    this.extData = data\r\n  }\r\n\r\n  getIsTop() {\r\n    return this.isTop\r\n  }\r\n  setIsTop(top: boolean) {\r\n    this.isTop = top\r\n  }\r\n  show() {\r\n    if (!this.isShow) {\r\n      this.isShow = true\r\n\r\n      this.env.domElement.appendChild(this.el)\r\n      this.target.add(this.instance)\r\n\r\n      bus.on(ACTION.RENDER, this.render)\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    if (this.isShow) {\r\n      this.isShow = false\r\n      this.target.remove(this.instance)\r\n      this.env.domElement.removeChild(this.el)\r\n\r\n      bus.off(ACTION.RENDER, this.render)\r\n\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.isShow) {\r\n      const tempV = new THREE.Vector3()\r\n      this.instance.updateWorldMatrix(true, false)\r\n      this.instance.getWorldPosition(tempV)\r\n      const camera = this.env.camera!\r\n      tempV.project(camera)\r\n\r\n      let show = true\r\n      if (!this.isTop) {\r\n        const raycaster = this.env.raycaster\r\n        raycaster.setFromCamera(tempV, camera)\r\n        const intersectedObjects = raycaster.intersectObjects(this.env.scene.children)\r\n        show = intersectedObjects.length > 0 && this.instance === intersectedObjects[0].object\r\n      }\r\n\r\n      const x = (tempV.x * 0.5 + 0.5) * this.env.width\r\n      const y = (tempV.y * -0.5 + 0.5) * this.env.height\r\n      this.el.style.left = `${x}px`\r\n      this.el.style.top = `${y}px`\r\n\r\n      if (show) {\r\n        if (this.tick) {\r\n          clearTimeout(this.tick)\r\n          this.tick = undefined\r\n        }\r\n        this.el.style.display = 'block'\r\n      } else {\r\n        if (!this.tick && this.el.style.display !== 'none') {\r\n          this.tick = setTimeout(() => {\r\n            this.tick = undefined\r\n            this.el.style.display = 'none'\r\n          }, 500)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.hide()\r\n    this.instance.geometry.dispose()\r\n  }\r\n}\r\n","import { createUseStyles } from '@/assets/jss'\r\n\r\nconst style = {\r\n  point_select: {\r\n    width: 100,\r\n    height: 100,\r\n    backgroundImage: `url('${require('@/components/TouchView/touch.gif')}')`,\r\n    backgroundSize: '100% 100%',\r\n  },\r\n}\r\n\r\nexport const useStyles = createUseStyles(style)\r\n","import { BaseOptions, BaseElement } from '../BaseElement'\r\n// import './index.scss'\r\nimport { useStyles } from './index.style'\r\n\r\ninterface Options extends BaseOptions {\r\n  click: (extData: any) => void\r\n}\r\n\r\nexport default class PointSelect extends BaseElement {\r\n  private click: (extData: any) => void\r\n  constructor(opts: Options) {\r\n    super({\r\n      ...opts,\r\n      offset: [-50, -30],\r\n    })\r\n\r\n    this.clickHandle = this.clickHandle.bind(this)\r\n\r\n    this.click = opts.click\r\n\r\n    this.createElement()\r\n  }\r\n\r\n  private createElement() {\r\n    const div = document.createElement('div')\r\n    // div.className = '__point_select_container'\r\n    div.className = useStyles.point_select\r\n    div.addEventListener('click', this.clickHandle, false)\r\n\r\n    super.updateElement(div)\r\n  }\r\n\r\n  private clickHandle() {\r\n    const data = super.getExtData()\r\n\r\n    this.click(data)\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n  }\r\n}\r\n","\r\nimport HotCityView from './HotCityView.vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { defineComponent, onBeforeUnmount, onMounted, ref, watchEffect } from 'vue'\r\nimport { createStar, showMessage } from '@/assets/index'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport TWEEN, { Tween } from '@tweenjs/tween.js'\r\nimport { createAnimation } from '@/assets'\r\nimport { HotCity, MapAddress, PointType } from '@/assets/types'\r\nimport { createBigCityCanvas, createCityCanvas, createStartPointCanvas } from '@/assets/canvas-background'\r\nimport PointSelect from '@/assets/three/PointSelect/index'\r\n\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'TravelMap',\r\n  components: { HotCityView },\r\n  setup(props, { emit }) {\r\n    const isLoad = ref(false)\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n\r\n    const hotCityRef = ref<InstanceType<typeof HotCityView>>()\r\n\r\n    const mapGeometry = new THREE.PlaneGeometry(254, 254)\r\n    const mapMaterial = new THREE.MeshBasicMaterial({ color: 0x3f4470, side: THREE.DoubleSide })\r\n    const map = new THREE.Mesh(mapGeometry, mapMaterial)\r\n    map.position.z = -1000\r\n    map.visible = false\r\n\r\n    const getPointValue = (index: number): HotCity | null => {\r\n      if (store.hot8.value && index === store.hot8.value.index)\r\n        return {\r\n          address: store.hot8.value,\r\n          point: 8,\r\n        }\r\n      if (store.hot7.value && store.hot7.value.index === index)\r\n        return {\r\n          address: store.hot7.value,\r\n          point: 7,\r\n        }\r\n      if (store.hot6.value && store.hot6.value.index === index)\r\n        return {\r\n          address: store.hot6.value,\r\n          point: 6,\r\n        }\r\n      if (store.hot5.value && store.hot5.value.index === index)\r\n        return {\r\n          address: store.hot5.value,\r\n          point: 5,\r\n        }\r\n      return null\r\n    }\r\n\r\n    const createMaterial = async (m: MapAddress): Promise<THREE.Material> => {\r\n      if (m.type === PointType.START) {\r\n        const canvas = createStartPointCanvas('#ffc428', m.width * 10, m.height * 10)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      } else if (m.type === PointType.CITY) {\r\n        // const value = getPointValue(m.index)\r\n        const canvas = await createCityCanvas(m)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      } else if (m.type === PointType.BIG_CITY) {\r\n        // const value = getPointValue(m.index)\r\n        const canvas = await createBigCityCanvas(m)\r\n        const texture = new THREE.CanvasTexture(canvas)\r\n        texture.needsUpdate = true\r\n        const material = new THREE.MeshBasicMaterial({ map: texture })\r\n        return material\r\n      }\r\n\r\n      return new THREE.MeshBasicMaterial({ color: 0xff0000 })\r\n    }\r\n\r\n    store.gameState.travelMapList.forEach(async m => {\r\n      const geometry = new THREE.PlaneGeometry(m.width, m.height)\r\n      const material = await createMaterial(m)\r\n\r\n      const mesh = new THREE.Mesh(geometry, material)\r\n      mesh.name = `travel-${m.index}`\r\n\r\n      mesh.position.set(...m.position)\r\n\r\n      if (m.options.rotation) {\r\n        mesh.rotation.z = m.options.rotation\r\n      }\r\n\r\n      map.add(mesh)\r\n    })\r\n\r\n    const star8 = createStar()\r\n    const star7 = createStar()\r\n    const star6 = createStar()\r\n    const star5 = createStar()\r\n\r\n    const initPosition = (star: THREE.Mesh, hot: MapAddress | null, scale: number) => {\r\n      if (hot === null) {\r\n        star.parent?.remove(star)\r\n      } else {\r\n        const position = hot.position\r\n        let x = position[0]\r\n        let y = position[1]\r\n        const offset = 16\r\n\r\n        if (Math.abs(x) >= Math.abs(y)) {\r\n          if (x > 0) {\r\n            x += offset\r\n            y += 5\r\n          } else if (x < 0) {\r\n            x -= offset\r\n            y -= 5\r\n          }\r\n        } else {\r\n          if (y > 0) {\r\n            y += offset\r\n            x -= 5\r\n          } else {\r\n            y -= offset\r\n            x += 5\r\n          }\r\n        }\r\n\r\n        star.position.set(x, y, 2)\r\n\r\n        star.scale.set(scale, scale, scale)\r\n        if (!star.parent) {\r\n          map.add(star)\r\n        }\r\n      }\r\n    }\r\n\r\n    watchEffect(() => {\r\n      initPosition(star8, store.hot8.value, 0.3)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star7, store.hot7.value, 0.25)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star6, store.hot6.value, 0.2)\r\n    })\r\n    watchEffect(() => {\r\n      initPosition(star5, store.hot5.value, 0.15)\r\n    })\r\n\r\n    let tween: Tween<object> | null\r\n\r\n    watchEffect(() => {\r\n      const val = store.gameState.activeMap\r\n      if (tween) {\r\n        tween.stop()\r\n        tween = null\r\n      }\r\n      // console.log('travel map ' + val)\r\n      if (val === 1) {\r\n        map.visible = true\r\n        const target = { z: -30 }\r\n        const t = Math.abs(map.position.z + target.z)\r\n\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n        tween.onComplete(() => {\r\n          tween = null\r\n        })\r\n      } else {\r\n        const target = { z: -1000 }\r\n\r\n        const t = Math.abs(target.z + map.position.z)\r\n\r\n        tween = createAnimation(map.position, target, t, TWEEN.Easing.Linear.None)\r\n\r\n        tween.onComplete(() => {\r\n          map.visible = false\r\n          tween = null\r\n        })\r\n      }\r\n    })\r\n\r\n    const init = () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('three环境未获取')\r\n\r\n      env.scene.add(map)\r\n\r\n      setTimeout(() => {\r\n        store.setMap1(map)\r\n        isLoad.value = true\r\n        emit('over')\r\n      }, 100)\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      const env = store.env\r\n      env?.scene.remove(map)\r\n      mapGeometry.dispose()\r\n      mapMaterial.dispose()\r\n    })\r\n\r\n    const chooseStartPoint = (): Promise<MapAddress> => {\r\n      return new Promise(resolve => {\r\n        // console.log('choose')\r\n        const env = store.env!\r\n\r\n        const startPoints = store.gameState.travelMapList.filter(t => t.type === PointType.START)\r\n\r\n        const selectPoints = startPoints.map(p => {\r\n          const index = p.index\r\n          const name = `travel-${index}`\r\n          const target = map.children.find(t => t.name === name)\r\n\r\n          if (!target) throw new Error('未找到起点对象,name:' + name)\r\n\r\n          const point = new PointSelect({ target, env, extData: p, show: true, click })\r\n\r\n          return point\r\n        })\r\n\r\n        showMessage('请玩家选择起点')\r\n\r\n        function click(data: MapAddress) {\r\n          selectPoints.forEach(sp => {\r\n            sp.destroy()\r\n          })\r\n          resolve(data)\r\n        }\r\n      })\r\n    }\r\n\r\n    const removeHotCity = async (hotCity: HotCity) => {\r\n      await hotCityRef.value!.removeHotCity(hotCity.point, hotCity.address.index)\r\n\r\n      const index = 8 - hotCity.point\r\n      store.removeHotCity(index)\r\n    }\r\n\r\n    return {\r\n      chooseStartPoint,\r\n      getPointValue,\r\n      removeHotCity,\r\n      isLoad,\r\n      hotCityRef,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./TravelMap.vue?vue&type=template&id=8ed1de02\"\nimport script from \"./TravelMap.vue?vue&type=script&lang=ts\"\nexport * from \"./TravelMap.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"ui pointer-none\" v-if=\"gameState\">\r\n    <div class=\"player-status\" :class=\"{ 'show-more': showMore }\">\r\n      <table class=\"gridtable\">\r\n        <thead>\r\n          <tr>\r\n            <th>姓名</th>\r\n            <th>金币</th>\r\n            <th>积分</th>\r\n            <th>状态</th>\r\n          </tr>\r\n        </thead>\r\n        <tr :class=\"{ active: gameState.currentPlayerId === player.id }\" v-for=\"player in gameState.players\" :key=\"player.id\">\r\n          <td :style=\"{ color: player.color }\">{{ player.name }}</td>\r\n          <td><CountUp class=\"led number\" :num=\"player.money\" /></td>\r\n          <td style=\"width: 40px\"><CountUp class=\"led number\" :num=\"player.points\" /></td>\r\n          <td style=\"width: 60px\">{{ statusText(player) }}</td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"text-message-box pointer\" ref=\"message\">\r\n        <div class=\"scroll\" ref=\"scroll\">\r\n          <div class=\"message\" v-for=\"(message, index) in messageList\" :key=\"index\">\r\n            {{ message }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"show-arrow pointer\" @click=\"toggleShowMore\">\r\n        {{ showMore ? '收缩' : '展开' }}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"toggle pointer\">\r\n      <div class=\"work card\" v-if=\"gameState.activeMap === 0\" @click=\"changeActiveMap(1)\"></div>\r\n      <div class=\"travel card\" v-if=\"gameState.activeMap === 1\" @click=\"changeActiveMap(0)\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, nextTick, onBeforeUnmount, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { PersonType } from '@/assets/types'\r\nimport CountUp from '@/components/CountUp.vue'\r\nimport { showMessage } from '@/assets'\r\nimport { bus, ACTION } from '@/assets/bus'\r\n\r\nexport default defineComponent({\r\n  components: { CountUp },\r\n  props: {\r\n    enabled: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const message = ref<HTMLElement>()\r\n    const scroll = ref<HTMLElement>()\r\n\r\n    const showMore = ref(false)\r\n\r\n    const toggleShowMore = () => {\r\n      showMore.value = !showMore.value\r\n      setTimeout(() => {\r\n        scrollToBottom()\r\n      }, 300)\r\n    }\r\n    let tick = 0\r\n    const step = 10\r\n\r\n    const messageList = ref<Array<string>>([])\r\n\r\n    const gameState = store.gameState\r\n\r\n    const getStyle = (player: PersonType) => {\r\n      return {\r\n        color: player.color,\r\n      }\r\n    }\r\n\r\n    const scrollTopValue = () => {\r\n      const messageHeight = message.value!.offsetHeight\r\n      const scrollHeight = scroll.value!.offsetHeight\r\n      const top = scrollHeight - messageHeight + 10\r\n\r\n      return Math.max(top, 0)\r\n    }\r\n\r\n    const stepScrollTop = (val: number) => {\r\n      let value = message.value!.scrollTop + step\r\n      if (value > val) value = val\r\n      message.value!.scrollTop = value\r\n\r\n      if (value < val) {\r\n        tick = setTimeout(() => {\r\n          stepScrollTop(val)\r\n        }, 1000 / 60)\r\n      }\r\n    }\r\n\r\n    const scrollToBottom = () => {\r\n      nextTick(() => {\r\n        const value = scrollTopValue()\r\n\r\n        if (value > 0) {\r\n          if (tick) {\r\n            clearTimeout(tick)\r\n            tick = 0\r\n          }\r\n\r\n          stepScrollTop(value)\r\n\r\n          // message.value!.scrollTop = value\r\n        }\r\n      })\r\n    }\r\n\r\n    const appendText = (data: any) => {\r\n      const message = data.message as string\r\n      const player = data.player as PersonType\r\n\r\n      const text = `[${player.name}] ${message}`\r\n\r\n      messageList.value.push(text)\r\n\r\n      scrollToBottom()\r\n    }\r\n\r\n    const statusText = (player: PersonType) => {\r\n      // return map === 0 ? '打工' : '旅游'\r\n      if (player.win) {\r\n        return `第${player.win}名`\r\n      }\r\n\r\n      return player.map === 0 ? '打工' : '旅游'\r\n    }\r\n\r\n    const currentPlayer = computed(() => {\r\n      const currentId = store.gameState.currentPlayerId\r\n      if (!currentId) return null\r\n      const player = store.gameState.players.find(t => t.id === currentId)\r\n      return player || null\r\n    })\r\n\r\n    const changeActiveMap = (val: 0 | 1) => {\r\n      if (!props.enabled) {\r\n        showMessage('当前阶段不能切换地图哦')\r\n      } else {\r\n        store.gameState.activeMap = val\r\n      }\r\n    }\r\n\r\n    bus.on(ACTION.APPEND_MESSAGE, appendText)\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.APPEND_MESSAGE, appendText)\r\n\r\n      if (tick) {\r\n        clearTimeout(tick)\r\n        tick = 0\r\n      }\r\n    })\r\n\r\n    return {\r\n      gameState,\r\n      currentPlayer,\r\n      getStyle,\r\n      statusText,\r\n      changeActiveMap,\r\n      message,\r\n      scroll,\r\n      messageList,\r\n      showMore,\r\n      toggleShowMore,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.ui {\r\n  width: 100%;\r\n  height: 100%;\r\n  // position: relative;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  color: #000;\r\n  font-size: 14px;\r\n\r\n  .title {\r\n    margin-top: 10px;\r\n    margin-left: 10px;\r\n    font-size: 18px;\r\n    text-align: left;\r\n  }\r\n\r\n  .player-status {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 400px;\r\n    padding-bottom: 8px;\r\n    // min-height: 200px;\r\n    background-color: rgba($color: #777, $alpha: 0.5);\r\n    border-bottom-right-radius: 4px;\r\n    color: #fff;\r\n    .gridtable {\r\n      $borderColor: #fff;\r\n      width: 100%;\r\n      border-collapse: collapse;\r\n      border: 1px solid $borderColor;\r\n      th {\r\n        border-width: 1px;\r\n        padding: 3px;\r\n        border-style: solid;\r\n        border-color: $borderColor;\r\n      }\r\n      td {\r\n        border-width: 1px;\r\n        padding: 3px;\r\n        border-style: solid;\r\n        border-color: $borderColor;\r\n      }\r\n\r\n      .active {\r\n        td {\r\n          color: #f08300;\r\n          background-color: paleturquoise;\r\n        }\r\n      }\r\n    }\r\n\r\n    .text-message-box {\r\n      // width: 30%;\r\n      width: 100%;\r\n      height: 50px;\r\n      // border-top-right-radius: 4px;\r\n      overflow: auto;\r\n      padding-bottom: 4px;\r\n\r\n      transition: height 0.3s linear;\r\n      .scroll {\r\n        margin-left: 4px;\r\n      }\r\n      .message {\r\n        text-align: left;\r\n        color: #fff;\r\n        font-size: 12px;\r\n        // margin-left: 4px;\r\n        margin-top: 4px;\r\n        line-height: 16px;\r\n      }\r\n    }\r\n    &.show-more {\r\n      .text-message-box {\r\n        height: 300px;\r\n      }\r\n    }\r\n  }\r\n\r\n  @media (max-width: 500px) {\r\n    .player-status {\r\n      width: 70%;\r\n    }\r\n  }\r\n\r\n  .toggle {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 10px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    .card {\r\n      width: 50px;\r\n      height: 50px;\r\n      border-radius: 50%;\r\n      background-size: 100% 100%;\r\n    }\r\n    .work {\r\n      background-image: url('~@/assets/image/work.png');\r\n    }\r\n\r\n    .travel {\r\n      background-image: url('~@/assets/image/travel.png');\r\n    }\r\n  }\r\n\r\n  .number {\r\n    font-size: 18px;\r\n  }\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@keyframes move {\r\n  0% {\r\n    transform: translate(0);\r\n  }\r\n\r\n  100% {\r\n    transform: translate(15px);\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <span>{{ showValue(realValue) }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref, watch } from 'vue'\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    num: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    formatFun: {\r\n      type: Function,\r\n      default: (val: number) => {\r\n        return Math.round(val)\r\n      },\r\n    },\r\n    localDuration: {\r\n      type: Number,\r\n      default: 3000,\r\n    },\r\n    easingFun: {\r\n      type: Function,\r\n      default: (t: number, b: number, c: number, d: number) => {\r\n        return (c * (-Math.pow(2, (-10 * t) / d) + 1) * 1024) / 1023 + b\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n    let localStartVal = 0\r\n    const realValue = ref(0)\r\n    let startTime = 0\r\n    let rAf = 0\r\n\r\n    const countDown = computed(() => {\r\n      return props.num < realValue.value\r\n    })\r\n\r\n    const start = () => {\r\n      if (rAf) {\r\n        window.cancelAnimationFrame(rAf)\r\n        rAf = 0\r\n      }\r\n      localStartVal = realValue.value\r\n      startTime = 0\r\n      rAf = window.requestAnimationFrame(count)\r\n    }\r\n\r\n    const showValue = (num: Number) => {\r\n      return props.formatFun(num)\r\n    }\r\n\r\n    watch(\r\n      () => props.num,\r\n      (newVal, oldval) => {\r\n        if (newVal !== oldval) {\r\n          start()\r\n        }\r\n      },\r\n    )\r\n\r\n    const count = (timestamp: number) => {\r\n      if (!startTime) startTime = timestamp\r\n      const progress = timestamp - startTime\r\n\r\n      // remaining = props.localDuration - progress\r\n      let num = 0\r\n      if (countDown.value) {\r\n        num = localStartVal - props.easingFun(progress, 0, localStartVal - props.num, props.localDuration)\r\n        if (num < props.num) num = props.num\r\n      } else {\r\n        num = props.easingFun(progress, localStartVal, props.num - localStartVal, props.localDuration)\r\n        if (num > props.num) num = props.num\r\n      }\r\n\r\n      realValue.value = num\r\n      if (props.num !== realValue.value) {\r\n        rAf = window.requestAnimationFrame(count)\r\n      } else {\r\n        rAf = 0\r\n      }\r\n    }\r\n\r\n    start()\r\n\r\n    return {\r\n      showValue,\r\n      realValue,\r\n    }\r\n  },\r\n})\r\n</script>\r\n","\r\nimport { computed, defineComponent, ref, watch } from 'vue'\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    num: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    formatFun: {\r\n      type: Function,\r\n      default: (val: number) => {\r\n        return Math.round(val)\r\n      },\r\n    },\r\n    localDuration: {\r\n      type: Number,\r\n      default: 3000,\r\n    },\r\n    easingFun: {\r\n      type: Function,\r\n      default: (t: number, b: number, c: number, d: number) => {\r\n        return (c * (-Math.pow(2, (-10 * t) / d) + 1) * 1024) / 1023 + b\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n    let localStartVal = 0\r\n    const realValue = ref(0)\r\n    let startTime = 0\r\n    let rAf = 0\r\n\r\n    const countDown = computed(() => {\r\n      return props.num < realValue.value\r\n    })\r\n\r\n    const start = () => {\r\n      if (rAf) {\r\n        window.cancelAnimationFrame(rAf)\r\n        rAf = 0\r\n      }\r\n      localStartVal = realValue.value\r\n      startTime = 0\r\n      rAf = window.requestAnimationFrame(count)\r\n    }\r\n\r\n    const showValue = (num: Number) => {\r\n      return props.formatFun(num)\r\n    }\r\n\r\n    watch(\r\n      () => props.num,\r\n      (newVal, oldval) => {\r\n        if (newVal !== oldval) {\r\n          start()\r\n        }\r\n      },\r\n    )\r\n\r\n    const count = (timestamp: number) => {\r\n      if (!startTime) startTime = timestamp\r\n      const progress = timestamp - startTime\r\n\r\n      // remaining = props.localDuration - progress\r\n      let num = 0\r\n      if (countDown.value) {\r\n        num = localStartVal - props.easingFun(progress, 0, localStartVal - props.num, props.localDuration)\r\n        if (num < props.num) num = props.num\r\n      } else {\r\n        num = props.easingFun(progress, localStartVal, props.num - localStartVal, props.localDuration)\r\n        if (num > props.num) num = props.num\r\n      }\r\n\r\n      realValue.value = num\r\n      if (props.num !== realValue.value) {\r\n        rAf = window.requestAnimationFrame(count)\r\n      } else {\r\n        rAf = 0\r\n      }\r\n    }\r\n\r\n    start()\r\n\r\n    return {\r\n      showValue,\r\n      realValue,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./CountUp.vue?vue&type=template&id=647338b5\"\nimport script from \"./CountUp.vue?vue&type=script&lang=ts\"\nexport * from \"./CountUp.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport { computed, defineComponent, nextTick, onBeforeUnmount, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { PersonType } from '@/assets/types'\r\nimport CountUp from '@/components/CountUp.vue'\r\nimport { showMessage } from '@/assets'\r\nimport { bus, ACTION } from '@/assets/bus'\r\n\r\nexport default defineComponent({\r\n  components: { CountUp },\r\n  props: {\r\n    enabled: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const message = ref<HTMLElement>()\r\n    const scroll = ref<HTMLElement>()\r\n\r\n    const showMore = ref(false)\r\n\r\n    const toggleShowMore = () => {\r\n      showMore.value = !showMore.value\r\n      setTimeout(() => {\r\n        scrollToBottom()\r\n      }, 300)\r\n    }\r\n    let tick = 0\r\n    const step = 10\r\n\r\n    const messageList = ref<Array<string>>([])\r\n\r\n    const gameState = store.gameState\r\n\r\n    const getStyle = (player: PersonType) => {\r\n      return {\r\n        color: player.color,\r\n      }\r\n    }\r\n\r\n    const scrollTopValue = () => {\r\n      const messageHeight = message.value!.offsetHeight\r\n      const scrollHeight = scroll.value!.offsetHeight\r\n      const top = scrollHeight - messageHeight + 10\r\n\r\n      return Math.max(top, 0)\r\n    }\r\n\r\n    const stepScrollTop = (val: number) => {\r\n      let value = message.value!.scrollTop + step\r\n      if (value > val) value = val\r\n      message.value!.scrollTop = value\r\n\r\n      if (value < val) {\r\n        tick = setTimeout(() => {\r\n          stepScrollTop(val)\r\n        }, 1000 / 60)\r\n      }\r\n    }\r\n\r\n    const scrollToBottom = () => {\r\n      nextTick(() => {\r\n        const value = scrollTopValue()\r\n\r\n        if (value > 0) {\r\n          if (tick) {\r\n            clearTimeout(tick)\r\n            tick = 0\r\n          }\r\n\r\n          stepScrollTop(value)\r\n\r\n          // message.value!.scrollTop = value\r\n        }\r\n      })\r\n    }\r\n\r\n    const appendText = (data: any) => {\r\n      const message = data.message as string\r\n      const player = data.player as PersonType\r\n\r\n      const text = `[${player.name}] ${message}`\r\n\r\n      messageList.value.push(text)\r\n\r\n      scrollToBottom()\r\n    }\r\n\r\n    const statusText = (player: PersonType) => {\r\n      // return map === 0 ? '打工' : '旅游'\r\n      if (player.win) {\r\n        return `第${player.win}名`\r\n      }\r\n\r\n      return player.map === 0 ? '打工' : '旅游'\r\n    }\r\n\r\n    const currentPlayer = computed(() => {\r\n      const currentId = store.gameState.currentPlayerId\r\n      if (!currentId) return null\r\n      const player = store.gameState.players.find(t => t.id === currentId)\r\n      return player || null\r\n    })\r\n\r\n    const changeActiveMap = (val: 0 | 1) => {\r\n      if (!props.enabled) {\r\n        showMessage('当前阶段不能切换地图哦')\r\n      } else {\r\n        store.gameState.activeMap = val\r\n      }\r\n    }\r\n\r\n    bus.on(ACTION.APPEND_MESSAGE, appendText)\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.APPEND_MESSAGE, appendText)\r\n\r\n      if (tick) {\r\n        clearTimeout(tick)\r\n        tick = 0\r\n      }\r\n    })\r\n\r\n    return {\r\n      gameState,\r\n      currentPlayer,\r\n      getStyle,\r\n      statusText,\r\n      changeActiveMap,\r\n      message,\r\n      scroll,\r\n      messageList,\r\n      showMore,\r\n      toggleShowMore,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./HandUpDisplay.vue?vue&type=template&id=34b4d8eb&scoped=true\"\nimport script from \"./HandUpDisplay.vue?vue&type=script&lang=ts\"\nexport * from \"./HandUpDisplay.vue?vue&type=script&lang=ts\"\n\nimport \"./HandUpDisplay.vue?vue&type=style&index=0&id=34b4d8eb&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-34b4d8eb\"\n\nexport default script","import { MapAddress, PersonType } from '../types'\r\nimport { workMapList, travelMapList, getNextAddress } from '../setting'\r\nimport { createAnimation, getAngle } from '@/assets/index'\r\nimport TWEEN from '@tweenjs/tween.js'\r\nimport { THREE } from '@/assets/three/lib'\r\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { getFile } from '@/assets/preload'\r\n// import { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\r\nimport { bus, ACTION } from '@/assets/bus'\r\n\r\nconst ARROW_POSITION_Y = 11\r\nexport interface PlayerOptions {\r\n  player: PersonType\r\n  gltf: GLTF\r\n  map1: THREE.Object3D\r\n  map0: THREE.Object3D\r\n}\r\n\r\nexport interface ActionType {\r\n  clip: THREE.AnimationClip\r\n  action: THREE.AnimationAction\r\n}\r\n\r\nexport interface Offset {\r\n  x: number\r\n  y: number\r\n}\r\n\r\nexport default class Player {\r\n  instance: THREE.Object3D\r\n  player: PersonType\r\n  map0: THREE.Object3D\r\n  map1: THREE.Object3D\r\n  mixer: THREE.AnimationMixer\r\n  actions: Array<ActionType> = []\r\n  gltf: GLTF\r\n  material: any\r\n  isActive: boolean\r\n\r\n  previousAction?: THREE.AnimationAction\r\n  activeAction?: THREE.AnimationAction\r\n\r\n  arrow: THREE.Group\r\n\r\n  // store = useInjector(GameStateStore)\r\n  constructor(opts: PlayerOptions) {\r\n    this.render = this.render.bind(this)\r\n    this.gltf = opts.gltf\r\n    this.instance = opts.gltf.scene.clone()\r\n\r\n    const arrow = getFile('arrow').clone() as THREE.Group\r\n    arrow.scale.set(5, -5, 5)\r\n    arrow.position.y = ARROW_POSITION_Y\r\n    arrow.visible = false\r\n\r\n    this.arrow = arrow\r\n    this.isActive = false\r\n\r\n    // arrow.position.z = 100\r\n\r\n    this.instance.add(arrow)\r\n\r\n    // console.log(arrow)\r\n    // debugger\r\n\r\n    this.mixer = new THREE.AnimationMixer(this.instance)\r\n    const scaleNumber = 4\r\n    this.instance.scale.set(scaleNumber, scaleNumber, scaleNumber)\r\n    this.instance.rotateX((90 * Math.PI) / 180)\r\n    this.map0 = opts.map0\r\n    this.map1 = opts.map1\r\n    // this.player = { ...opts.player }\r\n    this.player = opts.player\r\n\r\n    bus.on(ACTION.RENDER, this.render)\r\n\r\n    // const color = stringToNumberColor(this.player.color)\r\n    const color = new THREE.Color(this.player.color)\r\n\r\n    this.instance.traverse(object => {\r\n      // Foot\r\n      if (object instanceof THREE.Mesh) {\r\n        // console.log(object.name)\r\n        if (object.name.includes('Torso') || object.name.includes('Foot') || object.name.includes('Leg') || object.name.includes('Head_3')) {\r\n          if (!this.material) {\r\n            this.material = object.material.clone() as any\r\n            this.material.color = new THREE.Color(color)\r\n          }\r\n          object.material = this.material\r\n        }\r\n      }\r\n    })\r\n\r\n    // this.instance\r\n\r\n    this.init()\r\n\r\n    this.initAction()\r\n  }\r\n\r\n  private init(): Promise<void> {\r\n    return new Promise(resolve => {\r\n      const map = this.player.map === 0 ? this.map0 : this.map1\r\n      const mapList = this.player.map === 0 ? workMapList : travelMapList\r\n      const index = this.player.map === 0 ? this.player.map0Index : this.player.map1Index\r\n      if (!map) throw new Error('未找到地图对象')\r\n      // const mapAddress = MapList.find(t=> t.index === this.player.index)\r\n      const mapAddress = mapList[index]\r\n\r\n      this.instance.position.set(...mapAddress.position)\r\n\r\n      map.add(this.instance)\r\n\r\n      this.fixLookat()\r\n\r\n      // 下落效果\r\n      const z = this.instance.position.z\r\n      this.instance.position.z += 20\r\n\r\n      const tween = createAnimation(this.instance.position, { z }, 500, TWEEN.Easing.Quartic.In)\r\n\r\n      tween.onComplete(() => {\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  playWin() {\r\n    this.fadeToAction('Dance', 0.5)\r\n  }\r\n\r\n  private initAction() {\r\n    const states = ['Idle', 'Walking', 'Running', 'Dance', 'Death', 'Sitting', 'Standing']\r\n    const emotes = ['Jump', 'Yes', 'No', 'Wave', 'Punch', 'ThumbsUp']\r\n    const actions = this.actions\r\n    const animations = this.gltf.animations\r\n\r\n    for (let i = 0; i < animations.length; i++) {\r\n      const clip = animations[i]\r\n      const action = this.mixer.clipAction(clip)\r\n\r\n      const type: ActionType = {\r\n        clip,\r\n        action,\r\n      }\r\n\r\n      actions.push(type)\r\n\r\n      if (emotes.indexOf(clip.name) >= 0 || states.indexOf(clip.name) >= 4) {\r\n        action.clampWhenFinished = true\r\n        action.loop = THREE.LoopOnce\r\n      }\r\n    }\r\n  }\r\n\r\n  setActive(active: boolean) {\r\n    if (this.isActive !== active) {\r\n      this.isActive = active\r\n      // this.arrow.visible = active\r\n      if (!active) {\r\n        this.arrow.visible = active\r\n      }\r\n    }\r\n  }\r\n\r\n  fadeToAction(name: string, duration = 0.5) {\r\n    const actionType = this.actions.find(t => t.clip.name === name)\r\n    if (!actionType) throw new Error('未找到动作名称:' + name)\r\n\r\n    this.previousAction = this.activeAction\r\n    this.activeAction = actionType.action\r\n    if (this.previousAction && this.previousAction !== this.activeAction) {\r\n      this.previousAction.fadeOut(duration)\r\n    }\r\n\r\n    this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(duration).play()\r\n  }\r\n\r\n  beginRun() {\r\n    this.fadeToAction('Running', 0.2)\r\n  }\r\n\r\n  stopAnimate() {\r\n    this.fadeToAction('Standing', 1)\r\n  }\r\n\r\n  goNext() {\r\n    return new Promise<MapAddress>(resolve => {\r\n      const address = getNextAddress(this)\r\n      const targetPos = address.position\r\n\r\n      const offset = this.getOffset(address)\r\n\r\n      // 目标位置\r\n      const target = {\r\n        x: targetPos[0] + offset.x, // 重叠的时候稍微分开一点\r\n        y: targetPos[1] + offset.y,\r\n        z: targetPos[2],\r\n      }\r\n\r\n      const tween = createAnimation(this.instance.position, target, 500, TWEEN.Easing.Linear.None)\r\n\r\n      tween.onComplete(() => {\r\n        // 打工地图\r\n        if (this.player.map === 0) {\r\n          this.player.map0Index = address.index\r\n        } else {\r\n          this.player.map1Index = address.index\r\n        }\r\n\r\n        this.fixLookat(50)\r\n\r\n        resolve(address)\r\n      })\r\n    })\r\n  }\r\n\r\n  // 更换位置.\r\n  changeAddress(address: MapAddress) {\r\n    const targetPos = address.position\r\n    // 目标位置\r\n\r\n    const offset = this.getOffset(address)\r\n    const target = {\r\n      x: targetPos[0] + offset.x,\r\n      y: targetPos[1] + offset.y,\r\n      z: targetPos[2],\r\n    }\r\n\r\n    const tween = createAnimation(this.instance.position, target, 1000, TWEEN.Easing.Linear.None)\r\n    return new Promise<void>(resolve => {\r\n      tween.onComplete(() => {\r\n        if (this.player.map === 0) {\r\n          this.player.map0Index = address.index\r\n        } else {\r\n          this.player.map1Index = address.index\r\n        }\r\n\r\n        this.fixLookat(50)\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  changeMap(address: MapAddress, map: 0 | 1): Promise<void> {\r\n    return new Promise(resolve => {\r\n      const offset = this.getOffset(address)\r\n      this.player.map = map\r\n      this.instance.parent?.remove(this.instance)\r\n      const group = map === 0 ? this.map0 : this.map1\r\n      if (map === 0) {\r\n        this.player.map0Index = address.index\r\n      } else {\r\n        this.player.map1Index = address.index\r\n      }\r\n      this.instance.position.set(...address.position)\r\n      group.add(this.instance)\r\n\r\n      // 下落效果\r\n      const z = this.instance.position.z\r\n      this.instance.position.z += 20\r\n\r\n      this.instance.position.x += offset.x\r\n      this.instance.position.y += offset.y\r\n\r\n      const tween = createAnimation(this.instance.position, { z }, 500, TWEEN.Easing.Quartic.In)\r\n\r\n      tween.onComplete(() => {\r\n        this.fixLookat(50)\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修正人物的方向\r\n  fixLookat(duration = 500): Promise<void> {\r\n    return new Promise(resolve => {\r\n      // const address = this.getNextAddress()\r\n      const address = getNextAddress(this)\r\n      const offset = this.getOffset(address)\r\n\r\n      const position = address.position\r\n      const p = this.instance.position\r\n      // const rotation = this.instance.rotation\r\n\r\n      const angle = getAngle(p.x, p.y, position[0] + offset.x, position[1] + offset.y) + 90\r\n      // console.log('人物位置:', p.x, p.y, p.z, '目标地点:', ...position, '人物当前旋转:', rotation.x, rotation.y, rotation.z, angle)\r\n\r\n      const rotationY = (angle * Math.PI) / 180\r\n      // this.instance.rotation.y =\r\n      if (!duration) {\r\n        this.instance.rotation.y = rotationY\r\n      } else {\r\n        const tween = createAnimation(this.instance.rotation, { y: rotationY }, duration, TWEEN.Easing.Quartic.In)\r\n        tween.onComplete(() => {\r\n          resolve()\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // 当前玩家是否在打工状态\r\n  isWork() {\r\n    return this.player.map === 0 && !this.player.win\r\n  }\r\n\r\n  private render(e: any) {\r\n    const delta = e.delta as number\r\n    this.mixer.update(delta)\r\n\r\n    if (this.isActive) {\r\n      const cycleTime = 1000\r\n      const MIN_POSITION_Y = 9.5\r\n      const timer = e.timer as number\r\n      const t = timer % cycleTime // [0,1000)\r\n      //  x [-1,1)\r\n      const x = (t - cycleTime / 2) / (cycleTime / 2)\r\n      // 1 - pow(abs(x),1)\r\n      const deltaY = (1 - Math.abs(x)) * (MIN_POSITION_Y - ARROW_POSITION_Y)\r\n\r\n      this.arrow.position.y = ARROW_POSITION_Y + deltaY\r\n\r\n      this.arrow.visible = true\r\n    }\r\n  }\r\n\r\n  getOffset(address: MapAddress): Offset {\r\n    const x = address.position[0]\r\n    const y = address.position[1]\r\n\r\n    const offset: Offset = {\r\n      x: 0,\r\n      y: 0,\r\n    }\r\n\r\n    const index = this.player.id - 1\r\n    const offsets = [-7.5, -2.5, 2.5, 7.5]\r\n    const num = offsets[index]\r\n\r\n    if (Math.abs(x) >= Math.abs(y)) {\r\n      offset.x = num\r\n    } else {\r\n      offset.y = num\r\n    }\r\n\r\n    return offset\r\n  }\r\n\r\n  destroy() {\r\n    if (this.material) {\r\n      this.material.destroy()\r\n    }\r\n    bus.off(ACTION.RENDER, this.render)\r\n  }\r\n}\r\n","import { THREE } from '@/assets/three/lib'\r\nconst size = 200\r\nfunction createCanvas() {\r\n  const canvas = document.createElement('canvas')\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  if (!ctx) throw new Error('画布对象创建失败')\r\n  canvas.width = size\r\n  canvas.height = size\r\n\r\n  ctx.save()\r\n\r\n  const grd = ctx.createRadialGradient(size / 2, size / 2, 0, size / 2, size / 2, size * 2)\r\n  grd.addColorStop(0, '#fff')\r\n\r\n  grd.addColorStop(1, '#999')\r\n\r\n  ctx.fillStyle = grd\r\n\r\n  ctx.fillRect(0, 0, size * 2, size * 2)\r\n\r\n  ctx.strokeStyle = '#ccc'\r\n  ctx.lineWidth = 1\r\n\r\n  ctx.shadowBlur = 20\r\n  ctx.shadowColor = 'black'\r\n\r\n  // ctx.sto\r\n  ctx.strokeRect(1, 1, size - 2, size - 2)\r\n\r\n  ctx.restore()\r\n\r\n  return {\r\n    canvas,\r\n    ctx,\r\n  }\r\n}\r\n\r\nfunction createCircle(ctx: CanvasRenderingContext2D, x: number, y: number, radius: number, color: string) {\r\n  ctx.save()\r\n  ctx.fillStyle = color\r\n  ctx.beginPath()\r\n  ctx.arc(x * size, y * size, size * radius, 0, 2 * Math.PI)\r\n  ctx.fill()\r\n  ctx.restore()\r\n}\r\n\r\nfunction create1() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 0.5, 0.5, 0.25, 'red')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction create2() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 1 / 3, 0.5, 0.1, '#000')\r\n  createCircle(ctx!, 2 / 3, 0.5, 0.1, '#000')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction create3() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 1 / 4, 1 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 1 / 2, 1 / 2, 0.1, '#000')\r\n  createCircle(ctx!, 3 / 4, 3 / 4, 0.1, '#000')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction create4() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 1 / 3, 1 / 3, 0.1, 'red')\r\n  createCircle(ctx!, 2 / 3, 1 / 3, 0.1, 'red')\r\n  createCircle(ctx!, 1 / 3, 2 / 3, 0.1, 'red')\r\n  createCircle(ctx!, 2 / 3, 2 / 3, 0.1, 'red')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction create5() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 1 / 4, 1 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 3 / 4, 1 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 1 / 2, 1 / 2, 0.1, '#000')\r\n  createCircle(ctx!, 1 / 4, 3 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 3 / 4, 3 / 4, 0.1, '#000')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction create6() {\r\n  const { canvas, ctx } = createCanvas()\r\n\r\n  createCircle(ctx!, 1 / 3, 1 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 2 / 3, 1 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 1 / 3, 1 / 2, 0.1, '#000')\r\n  createCircle(ctx!, 2 / 3, 1 / 2, 0.1, '#000')\r\n  createCircle(ctx!, 1 / 3, 3 / 4, 0.1, '#000')\r\n  createCircle(ctx!, 2 / 3, 3 / 4, 0.1, '#000')\r\n\r\n  return canvas\r\n}\r\n\r\nfunction cm(canvas: HTMLCanvasElement) {\r\n  const texture = new THREE.Texture()\r\n  texture.image = canvas\r\n  texture.needsUpdate = true\r\n\r\n  const material = new THREE.MeshBasicMaterial({ map: texture })\r\n  // const material = new THREE.MeshLambertMaterial({ map: texture })\r\n  // const material = new THREE.MeshPhongMaterial({ map: texture })\r\n  return material\r\n}\r\n\r\nlet materials: Array<THREE.Material> = []\r\n\r\nexport const createCubeMaterials = () => {\r\n  if (!materials.length) {\r\n    materials = [cm(create2()), cm(create5()), cm(create3()), cm(create4()), cm(create1()), cm(create6())]\r\n  }\r\n  return materials\r\n}\r\n","import { THREE } from '@/assets/three/lib'\r\nimport { createCubeMaterials } from './cube-material'\r\nimport PhysicsWorld from '@/assets/physics'\r\nimport { randBetween } from '@/assets/index'\r\n// export interface CubeOptions {\r\n//   map0: THREE.Object3D\r\n//   // map2: THREE.Object3D\r\n// }\r\n\r\nexport default class Cube {\r\n  instance: THREE.Mesh\r\n  size = 14\r\n  map?: THREE.Object3D\r\n  constructor() {\r\n    // this.map0 = opts.map0\r\n\r\n    const geometry = new THREE.BoxGeometry(this.size, this.size, this.size)\r\n\r\n    const materials = createCubeMaterials()\r\n\r\n    this.instance = new THREE.Mesh(geometry, materials)\r\n    this.instance.position.z = 5\r\n\r\n    // 放6个group方便比较哪个朝上\r\n    this.addGroup(1, 0, 0, 50)\r\n\r\n    this.addGroup(2, 50, 0, 0)\r\n\r\n    this.addGroup(3, 0, 50, 0)\r\n\r\n    this.addGroup(4, 0, -50, 0)\r\n\r\n    this.addGroup(5, -50, 0, 0)\r\n\r\n    this.addGroup(6, 0, 0, -50)\r\n  }\r\n\r\n  addGroup(index: number, x: number, y: number, z: number): THREE.Object3D {\r\n    // const geometry = new THREE.BoxGeometry(5, 5, 5)\r\n    // const material = new THREE.MeshBasicMaterial({ color: 0xff0000 })\r\n    // const group = new THREE.Mesh(geometry, material)\r\n    const group = new THREE.Group()\r\n    group.position.set(x, y, z)\r\n    group.name = index.toString()\r\n    this.instance.add(group)\r\n\r\n    return group\r\n  }\r\n\r\n  getValue() {\r\n    const list = this.instance.children\r\n    let maxZ = -100\r\n    let maxName = ''\r\n\r\n    const position = new THREE.Vector3()\r\n    for (let i = 0; i < list.length; i++) {\r\n      const group = list[i]\r\n      group.getWorldPosition(position)\r\n\r\n      if (position.z > maxZ) {\r\n        maxZ = position.z\r\n        maxName = group.name\r\n      }\r\n    }\r\n\r\n    // console.log(maxZ, maxName)\r\n    return ~~maxName\r\n  }\r\n\r\n  hide() {\r\n    if (this.map) {\r\n      this.map.remove(this.instance)\r\n      this.map = undefined\r\n    }\r\n  }\r\n\r\n  async show(physicsWorld: PhysicsWorld, speed: number, map: THREE.Object3D, position: [number, number, number] = [0, 0, 5]) {\r\n    if (this.map) {\r\n      this.map.remove(this.instance)\r\n    }\r\n\r\n    this.instance.position.set(...position)\r\n\r\n    const x = (randBetween(-360, 360) * Math.PI) / 180\r\n    const y = (randBetween(-360, 360) * Math.PI) / 180\r\n    const z = (randBetween(-360, 360) * Math.PI) / 180\r\n\r\n    this.instance.rotation.set(x, y, z)\r\n\r\n    map.add(this.instance)\r\n    this.map = map\r\n\r\n    // this.map0.add(this.instance)\r\n    return physicsWorld.addBox(this, speed)\r\n  }\r\n\r\n  destroy() {\r\n    this.instance.geometry.dispose()\r\n    const material = this.instance.material as THREE.Material\r\n    material.dispose()\r\n  }\r\n}\r\n","<template>\r\n  <transition name=\"fade\">\r\n    <div class=\"touch-wrap flex-row pointer-none\" v-if=\"visible\">\r\n      <div class=\"explain flex-col pointer\" @click.stop=\"clickHandle\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"text\">点击<br />摇骰子</div>\r\n      </div>\r\n      <div class=\"bar\" :style=\"{ height: maxHeight * nowHeightPercent + 'px' }\">\r\n        <div class=\"bg-bar\" :style=\"{ height: maxHeight + 'px' }\"></div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent, onBeforeUnmount, ref } from 'vue'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nexport default defineComponent({\r\n  setup() {\r\n    const visible = ref(false)\r\n    let isWaiting = false\r\n    let toResolve: (speed: number) => void\r\n\r\n    // 最高高度500\r\n    const maxHeight = ref(300)\r\n    const minHeightPercent = 0.2\r\n    let isUp = true // 是否增加值.\r\n    const nowHeightPercent = ref(minHeightPercent)\r\n    const step = 0.05\r\n    const render = () => {\r\n      if (isWaiting) {\r\n        if (isUp) {\r\n          let value = (nowHeightPercent.value += step)\r\n          if (value >= 1) {\r\n            isUp = false\r\n            value = 1\r\n          }\r\n          nowHeightPercent.value = value\r\n        } else {\r\n          let value = (nowHeightPercent.value -= step)\r\n          if (value <= minHeightPercent) {\r\n            isUp = true\r\n            value = minHeightPercent\r\n          }\r\n          nowHeightPercent.value = value\r\n        }\r\n      }\r\n    }\r\n\r\n    const show = () => {\r\n      return new Promise<number>(resolve => {\r\n        visible.value = true\r\n        isWaiting = true\r\n        toResolve = resolve\r\n      })\r\n    }\r\n\r\n    const clickHandle = () => {\r\n      isWaiting = false\r\n      setTimeout(() => {\r\n        toResolve(nowHeightPercent.value)\r\n        visible.value = false\r\n      }, 300)\r\n    }\r\n\r\n    bus.on(ACTION.RENDER, render)\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.RENDER, render)\r\n    })\r\n    return {\r\n      visible,\r\n      show,\r\n      clickHandle,\r\n      maxHeight,\r\n      nowHeightPercent,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.fade-enter-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.fade-leave-active {\r\n  transition: opacity 1.5s linear;\r\n  transition-delay: 1s;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.touch-wrap {\r\n  z-index: 1000;\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 20px;\r\n  width: 100px;\r\n  font-size: 16px;\r\n  // height: 40%;\r\n\r\n  // align-items: center;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n  .explain {\r\n    width: 50%;\r\n    // height: 100%;\r\n    justify-content: flex-end;\r\n    .text {\r\n      color: red;\r\n      text-shadow: orange 2px 2px 2px, orange -2px -2px 2px;\r\n    }\r\n    .icon {\r\n      width: 40px;\r\n      height: 40px;\r\n      background-image: url('./touch.gif');\r\n      background-size: 100% 100%;\r\n    }\r\n  }\r\n  .bar {\r\n    width: 15px;\r\n    // height: 500px;\r\n    border-top-left-radius: 15px;\r\n    border-top-right-radius: 15px;\r\n    overflow: hidden;\r\n    position: relative;\r\n    .bg-bar {\r\n      position: absolute;\r\n      bottom: 0;\r\n      width: 100%;\r\n      // height: 500px;\r\n      background: linear-gradient(to bottom, red, orange, green);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, onBeforeUnmount, ref } from 'vue'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nexport default defineComponent({\r\n  setup() {\r\n    const visible = ref(false)\r\n    let isWaiting = false\r\n    let toResolve: (speed: number) => void\r\n\r\n    // 最高高度500\r\n    const maxHeight = ref(300)\r\n    const minHeightPercent = 0.2\r\n    let isUp = true // 是否增加值.\r\n    const nowHeightPercent = ref(minHeightPercent)\r\n    const step = 0.05\r\n    const render = () => {\r\n      if (isWaiting) {\r\n        if (isUp) {\r\n          let value = (nowHeightPercent.value += step)\r\n          if (value >= 1) {\r\n            isUp = false\r\n            value = 1\r\n          }\r\n          nowHeightPercent.value = value\r\n        } else {\r\n          let value = (nowHeightPercent.value -= step)\r\n          if (value <= minHeightPercent) {\r\n            isUp = true\r\n            value = minHeightPercent\r\n          }\r\n          nowHeightPercent.value = value\r\n        }\r\n      }\r\n    }\r\n\r\n    const show = () => {\r\n      return new Promise<number>(resolve => {\r\n        visible.value = true\r\n        isWaiting = true\r\n        toResolve = resolve\r\n      })\r\n    }\r\n\r\n    const clickHandle = () => {\r\n      isWaiting = false\r\n      setTimeout(() => {\r\n        toResolve(nowHeightPercent.value)\r\n        visible.value = false\r\n      }, 300)\r\n    }\r\n\r\n    bus.on(ACTION.RENDER, render)\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.RENDER, render)\r\n    })\r\n    return {\r\n      visible,\r\n      show,\r\n      clickHandle,\r\n      maxHeight,\r\n      nowHeightPercent,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=222d2648&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=222d2648&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-222d2648\"\n\nexport default script","<template>\r\n  <transition name=\"fade\">\r\n    <div class=\"number-wrap pointer-none\" v-if=\"visible\">\r\n      {{ num }}\r\n    </div>\r\n  </transition>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref } from 'vue'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const visible = ref(false)\r\n    const num = ref(1)\r\n    let tick = 0\r\n\r\n    const close = () => {\r\n      tick = 0\r\n      visible.value = false\r\n    }\r\n\r\n    const show = (val: number, closeDelay = 8000) => {\r\n      if (tick) {\r\n        clearTimeout(tick)\r\n        tick = 0\r\n      }\r\n      num.value = val\r\n      visible.value = true\r\n\r\n      tick = setTimeout(close, closeDelay)\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      num,\r\n      show,\r\n      close,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.fade-enter-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.fade-leave-active {\r\n  transition: opacity 1.5s linear;\r\n  // transition-delay: 1s;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.number-wrap {\r\n  z-index: 1001;\r\n  position: fixed;\r\n  top: 40vh;\r\n  font-size: 24vw;\r\n  text-shadow: orange 0.3vw 0.3vw 0.5vw, orange -0.3vw -0.3vw 0.5vw;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, ref } from 'vue'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const visible = ref(false)\r\n    const num = ref(1)\r\n    let tick = 0\r\n\r\n    const close = () => {\r\n      tick = 0\r\n      visible.value = false\r\n    }\r\n\r\n    const show = (val: number, closeDelay = 8000) => {\r\n      if (tick) {\r\n        clearTimeout(tick)\r\n        tick = 0\r\n      }\r\n      num.value = val\r\n      visible.value = true\r\n\r\n      tick = setTimeout(close, closeDelay)\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      num,\r\n      show,\r\n      close,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=c6236b9a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c6236b9a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c6236b9a\"\n\nexport default script","<template>\r\n  <Modal :visible=\"visible\" width=\"250px\" height=\"300px\" :showClose=\"false\" :mask=\"false\">\r\n    <div class=\"wrap flex-col\">\r\n      <span class=\"title\">选择前进步数</span>\r\n      <div class=\"body flex-row pointer\">\r\n        <div class=\"card flex-col\" @click=\"selectStep(1)\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\"> 花费500元,前进1步 </span>\r\n        </div>\r\n        <div class=\"card flex-col pointer\" @click=\"selectStep(2)\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\"> 花费1000元,前进2步 </span>\r\n        </div>\r\n        <div class=\"card flex-col pointer\" @click=\"selectStep(3)\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\"> 花费1500元,前进3步 </span>\r\n        </div>\r\n        <div class=\"card flex-col pointer\" @click=\"selectStep(0)\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\"> 这里很好,就呆在原地</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { showMessage, appendMessage } from '@/assets'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前用户\r\n\r\n    const playerStatus = computed(() => {\r\n      const p = store.gameState.players.find(t => t.id === currentPlayerId.value)\r\n\r\n      return p!\r\n    })\r\n\r\n    let resolveFun: (val: number) => void\r\n    const show = (playerId: number) => {\r\n      currentPlayerId.value = playerId\r\n\r\n      visible.value = true\r\n\r\n      return new Promise<number>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const selectStep = (val: number) => {\r\n      const cost = val * 500 // 每步500元\r\n      if (playerStatus.value.money < cost) {\r\n        showMessage('金币看起来不够喽,请重新选择')\r\n      } else {\r\n        if (val > 0) {\r\n          store.changeMoney(currentPlayerId.value, -cost)\r\n          appendMessage(`花费${cost}金币,继续前进${val}格`, playerStatus.value)\r\n        }\r\n        visible.value = false\r\n        resolveFun(val)\r\n      }\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      selectStep,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.wrap {\r\n  font-size: 14px;\r\n  .body {\r\n    margin: 8px auto 0;\r\n\r\n    justify-content: space-around;\r\n    align-items: center;\r\n\r\n    flex-wrap: wrap;\r\n\r\n    .card {\r\n      width: 40%;\r\n      height: 100px;\r\n      border: 1px solid #fff;\r\n      font-size: 18px;\r\n      margin-top: 16px;\r\n\r\n      align-items: center;\r\n      .icon {\r\n        margin-top: 16px;\r\n        width: 40px;\r\n        height: 40px;\r\n        // background-color: red;\r\n        background-image: url('~@/assets/image/icon/temp.jpg');\r\n        background-size: 100% 100%;\r\n      }\r\n      .text {\r\n        margin-top: 16px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { showMessage, appendMessage } from '@/assets'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前用户\r\n\r\n    const playerStatus = computed(() => {\r\n      const p = store.gameState.players.find(t => t.id === currentPlayerId.value)\r\n\r\n      return p!\r\n    })\r\n\r\n    let resolveFun: (val: number) => void\r\n    const show = (playerId: number) => {\r\n      currentPlayerId.value = playerId\r\n\r\n      visible.value = true\r\n\r\n      return new Promise<number>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const selectStep = (val: number) => {\r\n      const cost = val * 500 // 每步500元\r\n      if (playerStatus.value.money < cost) {\r\n        showMessage('金币看起来不够喽,请重新选择')\r\n      } else {\r\n        if (val > 0) {\r\n          store.changeMoney(currentPlayerId.value, -cost)\r\n          appendMessage(`花费${cost}金币,继续前进${val}格`, playerStatus.value)\r\n        }\r\n        visible.value = false\r\n        resolveFun(val)\r\n      }\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      selectStep,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./StepNumber.vue?vue&type=template&id=870b63c6&scoped=true\"\nimport script from \"./StepNumber.vue?vue&type=script&lang=ts\"\nexport * from \"./StepNumber.vue?vue&type=script&lang=ts\"\n\nimport \"./StepNumber.vue?vue&type=style&index=0&id=870b63c6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-870b63c6\"\n\nexport default script","<template>\r\n  <Modal :visible=\"visible\" :mask=\"false\" height=\"300px\" :showClose=\"false\">\r\n    <div class=\"wrap flex-col\">\r\n      <span class=\"title\">游戏结束</span>\r\n      <table class=\"girdtable\">\r\n        <thead>\r\n          <tr>\r\n            <th>序号</th>\r\n            <th>玩家</th>\r\n            <th>积分</th>\r\n            <th>名次</th>\r\n          </tr>\r\n        </thead>\r\n        <tr v-for=\"(p, index) in players\" :key=\"p.id\">\r\n          <td>{{ index + 1 }}</td>\r\n          <td>{{ p.name }}</td>\r\n          <td>{{ p.points }}</td>\r\n          <td>{{ p.win > 0 ? `第${p.win}名` : '未完成' }}</td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"btns\">\r\n        <span class=\"btn pointer\" @click=\"close\">回到菜单</span>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\n\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    let resolveFun: () => void\r\n    const show = (): Promise<void> => {\r\n      visible.value = true\r\n      return new Promise(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const close = () => {\r\n      visible.value = false\r\n      resolveFun()\r\n    }\r\n\r\n    const players = computed(() => {\r\n      const list = [...store.gameState.players]\r\n\r\n      list.sort((a, b) => {\r\n        const winA = a.win || 99\r\n        const winB = b.win || 99\r\n\r\n        const z = winA - winB\r\n\r\n        if (z !== 0) return z\r\n\r\n        return b.points - a.points\r\n      })\r\n\r\n      return list\r\n    })\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      close,\r\n      players,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.wrap {\r\n  font-size: 14px;\r\n\r\n  .title {\r\n    font-size: 22px;\r\n  }\r\n\r\n  .btn {\r\n    font-size: 18px;\r\n  }\r\n}\r\n.girdtable {\r\n  border-collapse: collapse;\r\n  margin: 24px auto;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  td,\r\n  th {\r\n    // border: 1px solid #cad9ea;\r\n    height: 30px;\r\n  }\r\n\r\n  thead th {\r\n    // background-color: rgba($color: #cce8eb, $alpha: 0.3);\r\n    width: 100px;\r\n  }\r\n  // tr:nth-child(odd) {\r\n  //   // background: rgba($color: #fff, $alpha: 0.3);\r\n  // }\r\n  // tr:nth-child(even) {\r\n  //   // background: #f5fafa;\r\n  //   // background: rgba($color: #f5fafa, $alpha: 0.3);\r\n  // }\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\n\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    let resolveFun: () => void\r\n    const show = (): Promise<void> => {\r\n      visible.value = true\r\n      return new Promise(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const close = () => {\r\n      visible.value = false\r\n      resolveFun()\r\n    }\r\n\r\n    const players = computed(() => {\r\n      const list = [...store.gameState.players]\r\n\r\n      list.sort((a, b) => {\r\n        const winA = a.win || 99\r\n        const winB = b.win || 99\r\n\r\n        const z = winA - winB\r\n\r\n        if (z !== 0) return z\r\n\r\n        return b.points - a.points\r\n      })\r\n\r\n      return list\r\n    })\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      close,\r\n      players,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./OverView.vue?vue&type=template&id=5d6454db&scoped=true\"\nimport script from \"./OverView.vue?vue&type=script&lang=ts\"\nexport * from \"./OverView.vue?vue&type=script&lang=ts\"\n\nimport \"./OverView.vue?vue&type=style&index=0&id=5d6454db&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5d6454db\"\n\nexport default script","\r\nimport { defineComponent } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { Dialog } from 'vant'\r\nimport { delay, showMessage } from '@/assets'\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const show = (playerId: number) => {\r\n      const player = store.gameState.players.find(t => t.id === playerId)\r\n      return new Promise(resolve => {\r\n        if (!player) throw new Error('未找到对应玩家')\r\n\r\n        if (player.isAI) {\r\n          showMessage(`${player.name}获得了胜利`)\r\n          delay(1).then(() => {\r\n            resolve(true)\r\n          })\r\n        } else {\r\n          Dialog.alert({\r\n            title: '恭喜你',\r\n            message: `玩家${player.name}获得了胜利!`,\r\n          }).then(() => {\r\n            resolve(true)\r\n          })\r\n        }\r\n      })\r\n    }\r\n    return {\r\n      show,\r\n    }\r\n  },\r\n  render() {\r\n    return null\r\n  },\r\n})\r\n","import script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nexport default script","<template>\r\n  <WinView ref=\"winRef\" />\r\n  <ChargePosition ref=\"chargeRef\" />\r\n  <AddLevel :count=\"2\" ref=\"levelRef\" />\r\n</template>\r\n<script lang=\"ts\">\r\nimport { showMessage, delay, randBetween, appendMessage } from '@/assets'\r\nimport Player from '@/assets/object/Player'\r\nimport { MapAddress } from '@/assets/types'\r\nimport { defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nimport WinView from '@/components/WinView/index.vue'\r\nimport ChargePosition from '@/views/GameView/Reward/ChargePosition.vue'\r\nimport AddLevel from './AddLevel.vue'\r\nexport default defineComponent({\r\n  components: { WinView, ChargePosition, AddLevel },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n\r\n    const winRef = ref<InstanceType<typeof WinView>>()\r\n    const chargeRef = ref<InstanceType<typeof ChargePosition>>()\r\n    const levelRef = ref<InstanceType<typeof AddLevel>>()\r\n\r\n    const show = async (player: Player, address: MapAddress) => {\r\n      const index = address.options.rewardIndex!\r\n\r\n      switch (index) {\r\n        case 0:\r\n          // 得到1分\r\n          return addPoints(player, 1)\r\n        case 1:\r\n          // 选择一个人交换位置\r\n          // chargeRef.value?.show(player.player.id)\r\n          return changePosition(player)\r\n        case 2:\r\n          // 向所有人收取200元\r\n          return chargeMoney(player, 200)\r\n        case 3:\r\n          // 在你的2张打工卡上各放1个经验标记\r\n          // break\r\n          return addLevels(player)\r\n\r\n        default:\r\n          throw new Error('错误机会rewardIndex:' + index)\r\n      }\r\n    }\r\n\r\n    const addLevels = async (player: Player) => {\r\n      const addressList = store.gameState.workMapList.filter(t => t.options.playerId === player.player.id)\r\n      if (addressList.some(t => t.options.level! < 3)) {\r\n        if (player.player.isAI) {\r\n          const ids = []\r\n          for (let i = 0; i < addressList.length; i++) {\r\n            const address = addressList[i]\r\n            if (address.options.level! < 3) {\r\n              ids.push(address.index)\r\n\r\n              if (ids.length === 2) {\r\n                break\r\n              }\r\n            }\r\n          }\r\n          if (ids.length) {\r\n            ids.forEach(index => {\r\n              bus.emit(ACTION.ADD_LEVEL, { index })\r\n            })\r\n\r\n            await delay(2)\r\n          }\r\n        } else {\r\n          const addressIds = await levelRef.value!.show(player.player.id)\r\n          // console.log(addressIds)\r\n          addressIds.forEach(index => {\r\n            bus.emit(ACTION.ADD_LEVEL, { index })\r\n          })\r\n\r\n          await delay(2)\r\n        }\r\n\r\n        return true\r\n      } else {\r\n        showMessage(`玩家${player.player.name}所有技能已达到顶级水准,无法再提升了`)\r\n\r\n        return false\r\n      }\r\n    }\r\n\r\n    const changePosition = async (player: Player) => {\r\n      const change = (otherPlayerId: number) => {\r\n        const otherPlayer = store.findByPlayerId(otherPlayerId)\r\n        appendMessage(`选择和${otherPlayer.name}交换位置`, player.player)\r\n\r\n        const currentIndex = player.player.map0Index\r\n        const targetIndex = otherPlayer.map0Index\r\n\r\n        bus.emit(ACTION.CHANGE_POSITION, {\r\n          player: player.player,\r\n          map: 0,\r\n          index: targetIndex,\r\n        })\r\n\r\n        bus.emit(ACTION.CHANGE_POSITION, {\r\n          player: otherPlayer,\r\n          map: 0,\r\n          index: currentIndex,\r\n        })\r\n      }\r\n\r\n      if (player.player.isAI) {\r\n        // 自动交换位置\r\n        // 随便取某个玩家,如果符合条件就换,不符合就不交换\r\n        const index = randBetween(0, store.gameState.players.length - 1)\r\n        const targetPlayer = store.gameState.players[index]\r\n\r\n        if (targetPlayer.id !== player.player.id) {\r\n          if (!targetPlayer.win && targetPlayer.map === 0) {\r\n            change(targetPlayer.id)\r\n\r\n            await delay(2)\r\n\r\n            return true\r\n          }\r\n        }\r\n\r\n        showMessage(`玩家${player.player.name}不打算交换位置`)\r\n        return false\r\n      } else {\r\n        const changeId = await chargeRef.value!.show(player.player.id)\r\n        if (changeId === 0) {\r\n          showMessage(`玩家${player.player.name}不打算交换位置`)\r\n\r\n          return false\r\n        } else {\r\n          change(changeId)\r\n\r\n          await delay(2)\r\n\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    const chargeMoney = async (player: Player, num: number) => {\r\n\r\n      appendMessage('向每个人收取200元钱', player.player)\r\n      let sum = 0\r\n      store.gameState.players.forEach(p => {\r\n        if (p.id === player.player.id) return\r\n        if (p.win) return\r\n        // 扣去200元\r\n        p.money -= 200\r\n        sum += 200\r\n      })\r\n      const p = store.findByPlayerId(player.player.id)\r\n      p.money += sum\r\n\r\n      return true\r\n    }\r\n\r\n    const addPoints = async (player: Player, num: number) => {\r\n\r\n      appendMessage('获得1点积分点', player.player)\r\n      const isWin = store.addPoint(player.player.id, num)\r\n\r\n      if (isWin) {\r\n        bus.emit(ACTION.WIN, player.player.id)\r\n        player.playWin()\r\n        await winRef.value?.show(player.player.id)\r\n      }\r\n\r\n      return true\r\n    }\r\n    return {\r\n      show,\r\n      winRef,\r\n      chargeRef,\r\n      levelRef,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<template>\r\n  <transition name=\"fade\" enter-active-class=\"animate__animated animate__jackInTheBox\" leave-active-class=\"animate__animated animate__bounceOut\" @after-leave=\"afterLeave\">\r\n    <div class=\"charge-position-wrap flex-col\" v-if=\"visible\">\r\n      <!-- <div class=\"bg\"></div> -->\r\n      <div class=\"title\">请选择一个玩家交换位置</div>\r\n      <div class=\"body flex-row\">\r\n        <div v-for=\"player in selectPlayers\" :key=\"player.id\" class=\"card flex-col\" @click=\"clickHandle(player)\">\r\n          <div class=\"item\">\r\n            <span class=\"name\"> 姓名: </span>\r\n            <span class=\"value\">\r\n              {{ player.name }}\r\n            </span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <span class=\"name\">状态: </span>\r\n            <span class=\"value\">\r\n              {{ statusText(player) }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"btns\">\r\n        <!-- <Button type=\"info\" size=\"large\" @click=\"cancelSelect\">我很好,不要换位置</Button> -->\r\n        <span class=\"btn\" @click=\"cancelSelect\">我很好,不想换位置</span>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { PersonType } from '@/assets/types'\r\nimport { confirm, showMessage } from '@/assets/index'\r\n\r\nexport default defineComponent({\r\n  // components: { Button },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    let selectPlayerId = 0\r\n\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前行动的玩家id\r\n    let resolveFun: (playerId: number) => void\r\n\r\n    const selectPlayers = computed(() => {\r\n      const players = store.gameState.players.filter(t => {\r\n        return t.id !== currentPlayerId.value\r\n      })\r\n\r\n      return players\r\n    })\r\n\r\n    const show = (playerId: number) => {\r\n      selectPlayerId = 0 // 重置当前需要更换的玩家id\r\n      currentPlayerId.value = playerId // 更新当前行动玩家id\r\n      visible.value = true\r\n      return new Promise<number>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const clickHandle = async (player: PersonType) => {\r\n      // resolveFun(playerId)\r\n      if (player.win) {\r\n        showMessage(`玩家${player.name}已经胜利,不可更换位置`)\r\n        return false\r\n      }\r\n\r\n      if (player.map === 1) {\r\n        showMessage(`玩家${player.name}正在旅游中,不可更换位置`)\r\n        return false\r\n      }\r\n\r\n      const isok = await confirm(`确认和${player.name}互换位置吗?`)\r\n\r\n      if (isok) {\r\n        selectPlayerId = player.id\r\n        visible.value = false\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    const cancelSelect = () => {\r\n      selectPlayerId = 0\r\n      visible.value = false\r\n      // resolveFun(0)\r\n    }\r\n\r\n    const afterLeave = () => {\r\n      resolveFun && resolveFun(selectPlayerId)\r\n    }\r\n\r\n    const statusText = (player: PersonType) => {\r\n      if (player.win) {\r\n        return `第${player.win}名`\r\n      } else if (player.map === 1) {\r\n        return '旅游'\r\n      } else {\r\n        return '打工'\r\n      }\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      clickHandle,\r\n      cancelSelect,\r\n      afterLeave,\r\n      selectPlayers,\r\n      statusText,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.charge-position-wrap {\r\n  // width: 50vw;\r\n  // height: 30rem;\r\n  width: 350px;\r\n\r\n  // padding-top: 3rem;\r\n  // padding-bottom: 3rem;\r\n  padding-top: 16px;\r\n  padding-bottom: 16px;\r\n  position: absolute;\r\n  top: 25vh;\r\n  left: 50%;\r\n  margin-left: -175px;\r\n  // left: 25vw;\r\n  // top: 20vh;\r\n  background-image: url('~@/components/Modal/bg.jpg');\r\n  background-size: 100% 100%;\r\n  opacity: 0.9;\r\n  font-size: 12px;\r\n  .title {\r\n    font-size: 18px;\r\n  }\r\n\r\n  // .bg {\r\n  //   position: absolute;\r\n  //   left: 0;\r\n  //   right: 0;\r\n  //   top: 0;\r\n  //   bottom: 0;\r\n  // }\r\n\r\n  .body {\r\n    // margin-top: 2rem;\r\n    margin-top: 16px;\r\n    justify-content: space-around;\r\n    font-size: 12px;\r\n\r\n    .card {\r\n      // padding: 20px 30px;\r\n      align-items: flex-start;\r\n      // padding-left: 20px;\r\n      // padding-top: 8px;\r\n      // padding-bottom: 8px;\r\n      // width: 25%;\r\n      width: 100px;\r\n      height: 50px;\r\n      border: 1px solid #fff;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n\r\n      span {\r\n        font-size: 12px;\r\n        margin-left: 5px;\r\n        margin-top: 5px;\r\n        margin-bottom: 5px;\r\n      }\r\n    }\r\n  }\r\n  .btns {\r\n    margin-top: 24px;\r\n  }\r\n  .btn {\r\n    // background-color: #1989fa;\r\n    // padding: 0.5rem 1rem;\r\n\r\n    font-size: 24px;\r\n    // color: red;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { PersonType } from '@/assets/types'\r\nimport { confirm, showMessage } from '@/assets/index'\r\n\r\nexport default defineComponent({\r\n  // components: { Button },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    let selectPlayerId = 0\r\n\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前行动的玩家id\r\n    let resolveFun: (playerId: number) => void\r\n\r\n    const selectPlayers = computed(() => {\r\n      const players = store.gameState.players.filter(t => {\r\n        return t.id !== currentPlayerId.value\r\n      })\r\n\r\n      return players\r\n    })\r\n\r\n    const show = (playerId: number) => {\r\n      selectPlayerId = 0 // 重置当前需要更换的玩家id\r\n      currentPlayerId.value = playerId // 更新当前行动玩家id\r\n      visible.value = true\r\n      return new Promise<number>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const clickHandle = async (player: PersonType) => {\r\n      // resolveFun(playerId)\r\n      if (player.win) {\r\n        showMessage(`玩家${player.name}已经胜利,不可更换位置`)\r\n        return false\r\n      }\r\n\r\n      if (player.map === 1) {\r\n        showMessage(`玩家${player.name}正在旅游中,不可更换位置`)\r\n        return false\r\n      }\r\n\r\n      const isok = await confirm(`确认和${player.name}互换位置吗?`)\r\n\r\n      if (isok) {\r\n        selectPlayerId = player.id\r\n        visible.value = false\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    const cancelSelect = () => {\r\n      selectPlayerId = 0\r\n      visible.value = false\r\n      // resolveFun(0)\r\n    }\r\n\r\n    const afterLeave = () => {\r\n      resolveFun && resolveFun(selectPlayerId)\r\n    }\r\n\r\n    const statusText = (player: PersonType) => {\r\n      if (player.win) {\r\n        return `第${player.win}名`\r\n      } else if (player.map === 1) {\r\n        return '旅游'\r\n      } else {\r\n        return '打工'\r\n      }\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      show,\r\n      clickHandle,\r\n      cancelSelect,\r\n      afterLeave,\r\n      selectPlayers,\r\n      statusText,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./ChargePosition.vue?vue&type=template&id=4dbfb4cc&scoped=true\"\nimport script from \"./ChargePosition.vue?vue&type=script&lang=ts\"\nexport * from \"./ChargePosition.vue?vue&type=script&lang=ts\"\n\nimport \"./ChargePosition.vue?vue&type=style&index=0&id=4dbfb4cc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4dbfb4cc\"\n\nexport default script","<template>\r\n  <Modal :visible=\"visible\" :showClose=\"false\">\r\n    <div class=\"wrap flex-col\">\r\n      <!-- <div class=\"header flex-row\"> -->\r\n      <span class=\"title\"> 选择要增加经验的打工卡 </span>\r\n      <!-- </div> -->\r\n      <div class=\"remark\">{{ selectIds.length }}/{{ count }}</div>\r\n      <div class=\"body flex-row\">\r\n        <div class=\"card flex-col\" :class=\"{ active: selectIds.includes(address.index) }\" v-for=\"address in workAddressList\" :key=\"address.index\" @click=\"selectAddress(address)\">\r\n          <div class=\"header\">\r\n            {{ address.options.name }}\r\n          </div>\r\n          <div class=\"points flex-col\">\r\n            <!-- {{ unionReward(address.options.reward) }} -->\r\n            <span class=\"p-text\" v-for=\"(r, index) in address.options.reward\" :key=\"index\">\r\n              {{ `${index}级:${r}` }}\r\n            </span>\r\n          </div>\r\n\r\n          <div class=\"image\" :style=\"{ backgroundImage: `url(${address.options.imageUrl})` }\"></div>\r\n          <!-- <img class=\"image\" :src=\"address.options.imageUrl\" alt=\"\" /> -->\r\n          <div class=\"star-wrap\">\r\n            <div class=\"star\" v-for=\"index in address.options.level\" :key=\"index\"></div>\r\n            <!-- <div class=\"star\"></div> -->\r\n            <!-- <div class=\"star\"></div> -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"btn\" @click=\"submit\">确定</div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport { MapAddress, PointType } from '@/assets/types'\r\nimport { confirm, showMessage } from '@/assets/index'\r\n// import { workMapList } from '@/assets/setting'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  props: {\r\n    count: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前接受奖励的用户id\r\n    const selectIds = ref<Array<number>>([])\r\n\r\n    let resolveFun: (selectIds: Array<number>) => void\r\n\r\n    // 当前接受奖励的用户对应的打工地址\r\n    const workAddressList = computed(() => {\r\n      const list: Array<MapAddress> = store.gameState.workMapList.filter(t => {\r\n        return t.type === PointType.WORK && t.options.playerId === currentPlayerId.value\r\n      })\r\n\r\n      return list\r\n    })\r\n\r\n    const selectAddress = (address: MapAddress) => {\r\n      const index = selectIds.value.findIndex(t => t === address.index)\r\n\r\n      if (index > -1) {\r\n        // 删除\r\n        selectIds.value.splice(index, 1)\r\n      } else {\r\n        if (address.options.level! >= 3) {\r\n          return showMessage(`${address.options.name}已经达到最高水准,无法再提高了`)\r\n        }\r\n\r\n        if (selectIds.value.length < props.count) {\r\n          selectIds.value.push(address.index)\r\n        } else {\r\n          showMessage(`只能选${props.count}张,太贪心了哦`)\r\n        }\r\n      }\r\n    }\r\n\r\n    const show = (playerId: number) => {\r\n      currentPlayerId.value = playerId\r\n      selectIds.value = []\r\n      visible.value = true\r\n\r\n      return new Promise<Array<number>>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const submit = async () => {\r\n      if (selectIds.value.length < props.count) {\r\n        const isok = await confirm('确认提交?')\r\n        if (!isok) return\r\n      }\r\n\r\n      resolveFun(selectIds.value)\r\n\r\n      visible.value = false\r\n    }\r\n\r\n    const unionReward = (reward: Array<number>) => {\r\n      return reward.join('|')\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      selectIds,\r\n      workAddressList,\r\n      show,\r\n      selectAddress,\r\n      submit,\r\n      unionReward,\r\n    }\r\n  },\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.remark {\r\n  margin-top: 16px;\r\n}\r\n.wrap {\r\n  font-size: 14px;\r\n}\r\n.body {\r\n  margin: 8px auto 0;\r\n  // width: 35rem;\r\n  // width: 420px;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n\r\n  align-items: center;\r\n  .card {\r\n    margin-top: 16px;\r\n    width: 100px;\r\n    height: 160px;\r\n    border: 1px solid #fff;\r\n    font-size: 18px;\r\n    position: relative;\r\n    .header {\r\n      margin-top: 4px;\r\n      flex-shrink: 0;\r\n    }\r\n    .points {\r\n      // margin-top: 8px;\r\n      font-size: 12px;\r\n      position: absolute;\r\n      bottom: 10px;\r\n      left: 10px;\r\n\r\n      .p-text {\r\n        text-align: left;\r\n      }\r\n    }\r\n    .image {\r\n      flex-grow: 1;\r\n      margin-top: 8px;\r\n      background-size: 100% 100%;\r\n\r\n      // background-color: red;\r\n    }\r\n\r\n    .star-wrap {\r\n      position: absolute;\r\n      bottom: 15px;\r\n      right: 0;\r\n\r\n      .star {\r\n        float: right;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-image: url('~@/assets/image/star.png');\r\n        background-size: 100% 100%;\r\n        margin-right: 4px;\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      box-shadow: 0px 0px 3px 4px #ed6a0c;\r\n    }\r\n  }\r\n}\r\n.btn {\r\n  margin-top: 16px;\r\n  font-size: 24px;\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport { MapAddress, PointType } from '@/assets/types'\r\nimport { confirm, showMessage } from '@/assets/index'\r\n// import { workMapList } from '@/assets/setting'\r\nexport default defineComponent({\r\n  components: { Modal },\r\n  props: {\r\n    count: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const visible = ref(false)\r\n    const currentPlayerId = ref(1) // 当前接受奖励的用户id\r\n    const selectIds = ref<Array<number>>([])\r\n\r\n    let resolveFun: (selectIds: Array<number>) => void\r\n\r\n    // 当前接受奖励的用户对应的打工地址\r\n    const workAddressList = computed(() => {\r\n      const list: Array<MapAddress> = store.gameState.workMapList.filter(t => {\r\n        return t.type === PointType.WORK && t.options.playerId === currentPlayerId.value\r\n      })\r\n\r\n      return list\r\n    })\r\n\r\n    const selectAddress = (address: MapAddress) => {\r\n      const index = selectIds.value.findIndex(t => t === address.index)\r\n\r\n      if (index > -1) {\r\n        // 删除\r\n        selectIds.value.splice(index, 1)\r\n      } else {\r\n        if (address.options.level! >= 3) {\r\n          return showMessage(`${address.options.name}已经达到最高水准,无法再提高了`)\r\n        }\r\n\r\n        if (selectIds.value.length < props.count) {\r\n          selectIds.value.push(address.index)\r\n        } else {\r\n          showMessage(`只能选${props.count}张,太贪心了哦`)\r\n        }\r\n      }\r\n    }\r\n\r\n    const show = (playerId: number) => {\r\n      currentPlayerId.value = playerId\r\n      selectIds.value = []\r\n      visible.value = true\r\n\r\n      return new Promise<Array<number>>(resolve => {\r\n        resolveFun = resolve\r\n      })\r\n    }\r\n\r\n    const submit = async () => {\r\n      if (selectIds.value.length < props.count) {\r\n        const isok = await confirm('确认提交?')\r\n        if (!isok) return\r\n      }\r\n\r\n      resolveFun(selectIds.value)\r\n\r\n      visible.value = false\r\n    }\r\n\r\n    const unionReward = (reward: Array<number>) => {\r\n      return reward.join('|')\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      selectIds,\r\n      workAddressList,\r\n      show,\r\n      selectAddress,\r\n      submit,\r\n      unionReward,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./AddLevel.vue?vue&type=template&id=137e4bb3&scoped=true\"\nimport script from \"./AddLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./AddLevel.vue?vue&type=script&lang=ts\"\n\nimport \"./AddLevel.vue?vue&type=style&index=0&id=137e4bb3&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-137e4bb3\"\n\nexport default script","\r\nimport { showMessage, delay, randBetween, appendMessage } from '@/assets'\r\nimport Player from '@/assets/object/Player'\r\nimport { MapAddress } from '@/assets/types'\r\nimport { defineComponent, ref } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport { bus, ACTION } from '@/assets/bus'\r\nimport WinView from '@/components/WinView/index.vue'\r\nimport ChargePosition from '@/views/GameView/Reward/ChargePosition.vue'\r\nimport AddLevel from './AddLevel.vue'\r\nexport default defineComponent({\r\n  components: { WinView, ChargePosition, AddLevel },\r\n  setup() {\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n\r\n    const winRef = ref<InstanceType<typeof WinView>>()\r\n    const chargeRef = ref<InstanceType<typeof ChargePosition>>()\r\n    const levelRef = ref<InstanceType<typeof AddLevel>>()\r\n\r\n    const show = async (player: Player, address: MapAddress) => {\r\n      const index = address.options.rewardIndex!\r\n\r\n      switch (index) {\r\n        case 0:\r\n          // 得到1分\r\n          return addPoints(player, 1)\r\n        case 1:\r\n          // 选择一个人交换位置\r\n          // chargeRef.value?.show(player.player.id)\r\n          return changePosition(player)\r\n        case 2:\r\n          // 向所有人收取200元\r\n          return chargeMoney(player, 200)\r\n        case 3:\r\n          // 在你的2张打工卡上各放1个经验标记\r\n          // break\r\n          return addLevels(player)\r\n\r\n        default:\r\n          throw new Error('错误机会rewardIndex:' + index)\r\n      }\r\n    }\r\n\r\n    const addLevels = async (player: Player) => {\r\n      const addressList = store.gameState.workMapList.filter(t => t.options.playerId === player.player.id)\r\n      if (addressList.some(t => t.options.level! < 3)) {\r\n        if (player.player.isAI) {\r\n          const ids = []\r\n          for (let i = 0; i < addressList.length; i++) {\r\n            const address = addressList[i]\r\n            if (address.options.level! < 3) {\r\n              ids.push(address.index)\r\n\r\n              if (ids.length === 2) {\r\n                break\r\n              }\r\n            }\r\n          }\r\n          if (ids.length) {\r\n            ids.forEach(index => {\r\n              bus.emit(ACTION.ADD_LEVEL, { index })\r\n            })\r\n\r\n            await delay(2)\r\n          }\r\n        } else {\r\n          const addressIds = await levelRef.value!.show(player.player.id)\r\n          // console.log(addressIds)\r\n          addressIds.forEach(index => {\r\n            bus.emit(ACTION.ADD_LEVEL, { index })\r\n          })\r\n\r\n          await delay(2)\r\n        }\r\n\r\n        return true\r\n      } else {\r\n        showMessage(`玩家${player.player.name}所有技能已达到顶级水准,无法再提升了`)\r\n\r\n        return false\r\n      }\r\n    }\r\n\r\n    const changePosition = async (player: Player) => {\r\n      const change = (otherPlayerId: number) => {\r\n        const otherPlayer = store.findByPlayerId(otherPlayerId)\r\n        appendMessage(`选择和${otherPlayer.name}交换位置`, player.player)\r\n\r\n        const currentIndex = player.player.map0Index\r\n        const targetIndex = otherPlayer.map0Index\r\n\r\n        bus.emit(ACTION.CHANGE_POSITION, {\r\n          player: player.player,\r\n          map: 0,\r\n          index: targetIndex,\r\n        })\r\n\r\n        bus.emit(ACTION.CHANGE_POSITION, {\r\n          player: otherPlayer,\r\n          map: 0,\r\n          index: currentIndex,\r\n        })\r\n      }\r\n\r\n      if (player.player.isAI) {\r\n        // 自动交换位置\r\n        // 随便取某个玩家,如果符合条件就换,不符合就不交换\r\n        const index = randBetween(0, store.gameState.players.length - 1)\r\n        const targetPlayer = store.gameState.players[index]\r\n\r\n        if (targetPlayer.id !== player.player.id) {\r\n          if (!targetPlayer.win && targetPlayer.map === 0) {\r\n            change(targetPlayer.id)\r\n\r\n            await delay(2)\r\n\r\n            return true\r\n          }\r\n        }\r\n\r\n        showMessage(`玩家${player.player.name}不打算交换位置`)\r\n        return false\r\n      } else {\r\n        const changeId = await chargeRef.value!.show(player.player.id)\r\n        if (changeId === 0) {\r\n          showMessage(`玩家${player.player.name}不打算交换位置`)\r\n\r\n          return false\r\n        } else {\r\n          change(changeId)\r\n\r\n          await delay(2)\r\n\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    const chargeMoney = async (player: Player, num: number) => {\r\n\r\n      appendMessage('向每个人收取200元钱', player.player)\r\n      let sum = 0\r\n      store.gameState.players.forEach(p => {\r\n        if (p.id === player.player.id) return\r\n        if (p.win) return\r\n        // 扣去200元\r\n        p.money -= 200\r\n        sum += 200\r\n      })\r\n      const p = store.findByPlayerId(player.player.id)\r\n      p.money += sum\r\n\r\n      return true\r\n    }\r\n\r\n    const addPoints = async (player: Player, num: number) => {\r\n\r\n      appendMessage('获得1点积分点', player.player)\r\n      const isWin = store.addPoint(player.player.id, num)\r\n\r\n      if (isWin) {\r\n        bus.emit(ACTION.WIN, player.player.id)\r\n        player.playWin()\r\n        await winRef.value?.show(player.player.id)\r\n      }\r\n\r\n      return true\r\n    }\r\n    return {\r\n      show,\r\n      winRef,\r\n      chargeRef,\r\n      levelRef,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=7cb28fe6\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { randBetween } from '.'\r\nimport { GameState, HotCity, MapAddress, PersonType, PointType } from './types'\r\nimport { travelMapList } from './setting'\r\n// 选择旅游起点\r\nexport function chooseStartPoint(gameState: GameState): MapAddress {\r\n  const startPoints = gameState.travelMapList.filter(t => t.type === PointType.START)\r\n\r\n  const index = randBetween(0, startPoints.length - 1)\r\n\r\n  return startPoints[index]\r\n}\r\n\r\nexport function chooseGoTravel(player: PersonType) {\r\n  if (player.money > 8000) {\r\n    return true\r\n  } else if (player.money < 2000) {\r\n    return false\r\n  }\r\n  return Math.random() > 0.5\r\n}\r\n\r\n// 是否继续旅游\r\nexport function chooseTravelContinue(player: PersonType) {\r\n  // 大于3000元永远选择继续旅游\r\n  // 小于1000元用于选择回来打工\r\n  if (player.money > 3000) {\r\n    return true\r\n  } else if (player.money < 1000) {\r\n    return false\r\n  } else {\r\n    return Math.random() > 0.5\r\n  }\r\n}\r\n\r\nexport function getStep(p: PersonType, getPointValue: (index: number) => HotCity | null) {\r\n  let maxPoints = 0\r\n  let bestStep = 0\r\n  for (let i = 0; i <= 3; i++) {\r\n    const cost = i * 500\r\n    if (p.money < cost) break\r\n    let index = p.map1Index + i\r\n\r\n    if (index >= travelMapList.length) {\r\n      index -= travelMapList.length\r\n    }\r\n\r\n    const hotCity = getPointValue(index)\r\n    if (hotCity) {\r\n      if (maxPoints < hotCity.point) {\r\n        maxPoints = hotCity.point\r\n        bestStep = i\r\n      }\r\n    }\r\n  }\r\n  return bestStep\r\n}\r\n","\r\n// import { PersonType } from '@/assets/types'\r\nimport { computed, defineComponent, onBeforeUnmount, ref, watch } from 'vue'\r\nimport { useInjector } from '@/store/hook'\r\nimport { GameStateStore } from '@/store/hooks/game-info'\r\nimport ThreeWrap from './ThreeWrap.vue'\r\nimport WorkMap from './WorkMap.vue'\r\nimport TravelMap from './TravelMap.vue'\r\nimport HandUpDisplay from './HandUpDisplay.vue'\r\nimport { delay, showMessage, confirm, setItem, removeItem, appendMessage } from '@/assets/index'\r\nimport { FileItem, getFileById } from '@/assets/preload'\r\nimport Player from '@/assets/object/Player'\r\nimport { ACTION, bus } from '@/assets/bus'\r\nimport Cube from '@/assets/object/Cube'\r\nimport TouchView from '@/components/TouchView/index.vue'\r\nimport NumberView from '@/components/NumberView/index.vue'\r\nimport StepNumber from '@/views/GameView/StepNumber.vue'\r\nimport OverView from '@/views/GameView/OverView.vue'\r\nimport WinView from '@/components/WinView/index.vue'\r\nimport RewardView from '@/views/GameView/Reward/index.vue'\r\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { MapAddress, PersonType, PointType } from '@/assets/types'\r\nimport { workMapList } from '@/assets/setting'\r\nimport { chooseStartPoint, chooseGoTravel, chooseTravelContinue, getStep } from '@/assets/ai'\r\nexport default defineComponent({\r\n  components: { ThreeWrap, WorkMap, TravelMap, HandUpDisplay, TouchView, NumberView, RewardView, StepNumber, WinView, OverView },\r\n  // components: { HandUpDisplay },\r\n  setup(props, { emit }) {\r\n    const numberRef = ref<InstanceType<typeof NumberView>>()\r\n    const workMap = ref<InstanceType<typeof WorkMap>>()\r\n    const travelMap = ref<InstanceType<typeof TravelMap>>()\r\n    const touchRef = ref<InstanceType<typeof TouchView>>()\r\n    // const textRef = ref<InstanceType<typeof TextView>>()\r\n    const winRef = ref<InstanceType<typeof WinView>>()\r\n    const stepRef = ref<InstanceType<typeof StepNumber>>()\r\n    const rewardRef = ref<InstanceType<typeof RewardView>>()\r\n    const overRef = ref<InstanceType<typeof OverView>>()\r\n    const store = useInjector(GameStateStore)\r\n    if (!store) throw new Error('未获取GameStateStore')\r\n    const map1Finish = ref(false)\r\n    const isLoad = ref(false)\r\n    const map2Finish = ref(false)\r\n\r\n    const enabled = ref(false)\r\n\r\n    let playerFile: FileItem\r\n    let players: Array<Player>\r\n    let cube: Cube\r\n    let cube2: Cube\r\n    // const playerFile = await getFileById('player')\r\n    getFileById('player').then(file => {\r\n      playerFile = file\r\n      isLoad.value = true\r\n    })\r\n    const isFinish = computed(() => {\r\n      return map1Finish.value && isLoad.value && map2Finish.value\r\n    })\r\n    const map1Init = () => {\r\n      map1Finish.value = true\r\n    }\r\n    const map2Init = () => {\r\n      map2Finish.value = true\r\n    }\r\n    watch(\r\n      () => isFinish.value,\r\n      val => {\r\n        if (val) {\r\n          init()\r\n        }\r\n      },\r\n    )\r\n\r\n    const init = () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('threejs 环境未找到')\r\n      players = store.gameState.players.map(p => {\r\n        // const object = playerFile.object.scene as THREE.Scene\r\n        const gltf = playerFile.object as GLTF\r\n        return new Player({\r\n          player: p,\r\n          gltf: gltf,\r\n          map0: store.map0!,\r\n          map1: store.map1!,\r\n        })\r\n      })\r\n      bus.on(ACTION.RENDER, render)\r\n      bus.on(ACTION.CHANGE_POSITION, playerChangePosition)\r\n      bus.on(ACTION.ADD_LEVEL, addLevelByAddressIndex)\r\n\r\n      initMapStar()\r\n\r\n      env.control!.setLookAt(0, -245, 170, 0, 0, 0, true)\r\n\r\n      // 开场动画\r\n      delay(1).then(() => {\r\n        // 骰子\r\n        cube = new Cube()\r\n        cube2 = new Cube()\r\n\r\n        gameLoop()\r\n      })\r\n    }\r\n\r\n    const getPlayerById = (playerId: number) => {\r\n      const player = players.find(t => t.player.id === playerId)\r\n      if (!player) throw new Error('人员获取失败,id=' + playerId)\r\n      return player\r\n    }\r\n\r\n    const setActiveByPlayerId = (playerId: number) => {\r\n      players.forEach(p => {\r\n        if (p.player.id === playerId) {\r\n          p.setActive(true)\r\n        } else {\r\n          p.setActive(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    const gameLoop = async () => {\r\n      const env = store.env\r\n      if (!env) throw new Error('未获取3d环境')\r\n\r\n      if (!store.gameState.currentPlayerId) {\r\n        console.log('currentPlayerId异常,结束循环')\r\n        return\r\n      }\r\n\r\n      const player = getPlayerById(store.gameState.currentPlayerId)\r\n\r\n      setActiveByPlayerId(store.gameState.currentPlayerId)\r\n\r\n      // 切换地图\r\n      if (player.player.map !== store.gameState.activeMap) {\r\n        // await toggleMap(player.player.map)\r\n        store.gameState.activeMap = player.player.map\r\n        await delay(2)\r\n      }\r\n\r\n      // 聚焦当前玩家\r\n      workMap.value!.lookAtPosition(player!.instance.position)\r\n\r\n      if (!player.player.isAI) enabled.value = true\r\n\r\n      appendMessage('游戏进行中', player.player, false)\r\n\r\n      // 如果玩家在旅游城市,询问是否返回打工\r\n      if (player.player.map === 1) {\r\n        // 如果小于500元,直接回来打工\r\n        if (player.player.money < 500) {\r\n          appendMessage('金币不足500,回家打工赚钱', player.player)\r\n\r\n          const address = workMapList.find(t => t.index === player.player.index)\r\n          if (!address) throw new Error('未找到打工起始地址:index=' + player.player.index)\r\n          store.gameState.activeMap = 0\r\n          await player.changeMap(address, 0)\r\n        } else {\r\n          let travelContinue: boolean\r\n          if (player.player.isAI) {\r\n            travelContinue = chooseTravelContinue(player.player)\r\n          } else {\r\n            travelContinue = await confirm('继续旅游需要扣除500旅费,请问是否继续旅游?', '提示')\r\n          }\r\n          if (!travelContinue) {\r\n            // 不继续旅游\r\n            appendMessage(`结束旅游回来打工赚钱`, player.player)\r\n            const address = workMapList.find(t => t.index === player.player.index)\r\n            if (!address) throw new Error('未找到打工起始地址:index=' + player.player.index)\r\n            store.gameState.activeMap = 0\r\n            await player.changeMap(address, 0)\r\n          }\r\n        }\r\n      }\r\n\r\n      // 当前玩家是否最终处在旅游地图\r\n      const isTravel = player.player.map === 1\r\n\r\n      if (isTravel) {\r\n        store.changeMoney(player.player.id, -500) // 扣除500旅费\r\n        appendMessage('继续旅游,扣除500旅费', player.player)\r\n      }\r\n\r\n      let speed: number\r\n      // 等待用户扔骰子\r\n      if (!player.player.isAI) {\r\n        speed = await touchRef.value!.show()\r\n      } else {\r\n        await delay(1)\r\n        speed = 0.8 * Math.random() + 0.2\r\n      }\r\n\r\n      enabled.value = false // 禁止切换地图.\r\n\r\n      if (player.player.map !== store.gameState.activeMap) {\r\n        // await toggleMap(player.player.map)\r\n        store.gameState.activeMap = player.player.map\r\n        await delay(2)\r\n      }\r\n\r\n      // 等待骰子转动结束\r\n      cube2.hide()\r\n      if (!isTravel) {\r\n        await cube.show(store.physicsWorld!, speed, store.map0!)\r\n      } else {\r\n        await cube.show(store.physicsWorld!, speed, store.map1!, [5, 5, 5])\r\n        await cube2.show(store.physicsWorld!, speed, store.map1!, [-5, -5, 5])\r\n      }\r\n\r\n      // 获取骰子点数\r\n      let value = cube.getValue()\r\n\r\n      if (isTravel) {\r\n        value += cube2.getValue()\r\n      }\r\n\r\n      // const value = 5\r\n      // 显示骰子点数在屏幕上\r\n      numberRef.value?.show(value)\r\n\r\n      appendMessage(`前进${value}格`, player.player, false)\r\n\r\n      let isChargeTravel = false\r\n      // 用户在屏幕上行动\r\n      player.beginRun()\r\n      for (let i = 0; i < value; i++) {\r\n        await player.goNext()\r\n\r\n        if (!isTravel) {\r\n          const address = store.getCurrentAddress(player)\r\n\r\n          if (address.index === player.player.index) {\r\n            // 奖励500元\r\n            appendMessage('路过发薪日,奖励500元', player.player)\r\n            changeMoney(player, 500)\r\n            // 用户到达自己起点的逻辑(是否要去旅游)\r\n            const goTravel = player.player.isAI ? chooseGoTravel(player.player) : await confirm(`是否前往旅游地图?`)\r\n\r\n            if (goTravel) {\r\n              isChargeTravel = true\r\n\r\n              player.stopAnimate()\r\n              appendMessage(`前往旅游地图`, player.player)\r\n\r\n              store.gameState.activeMap = 1\r\n\r\n              let startAddress: MapAddress\r\n              if (player.player.isAI) {\r\n                startAddress = chooseStartPoint(store.gameState)\r\n              } else {\r\n                startAddress = await travelMap.value!.chooseStartPoint()\r\n              }\r\n              store.gameState.activeMap = 1\r\n              await player.changeMap(startAddress, 1)\r\n\r\n              await delay(0.5)\r\n\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // 隐藏骰子点数\r\n      numberRef.value?.close()\r\n\r\n      // 如果是旅游状态,可以向前走3步\r\n      if (isTravel) {\r\n        let step: number\r\n        if (player.player.isAI) {\r\n          step = getStep(player.player, travelMap.value!.getPointValue)\r\n          if (step > 0) {\r\n            appendMessage(`花费${step * 500}元,继续前进${step}格`, player.player)\r\n            store.changeMoney(player.player.id, -step * 500)\r\n          }\r\n          await delay(0.5)\r\n        } else {\r\n          step = await stepRef.value!.show(player.player.id)\r\n        }\r\n\r\n        for (let i = 0; i < step; i++) {\r\n          await player.goNext()\r\n        }\r\n      }\r\n\r\n      if (!isChargeTravel) {\r\n        player.stopAnimate()\r\n        // 处理角色业务逻辑\r\n        if (!isTravel) {\r\n          await detailWorkEvent(player)\r\n        } else {\r\n          await detailTravelEvent(player)\r\n        }\r\n      }\r\n      // 切换下一个玩家\r\n      const needNext = store.toggleNextPlayer()\r\n\r\n      if (needNext) {\r\n        setItem('game-status', store.gameState)\r\n\r\n        if (player.player.isAI) {\r\n          await delay(2)\r\n        }\r\n\r\n        gameLoop()\r\n      } else {\r\n        removeItem('game-status')\r\n        // 游戏结束\r\n        await overRef.value!.show()\r\n\r\n        emit('over')\r\n      }\r\n    }\r\n\r\n    const render = () => {\r\n      // console.log('render')\r\n    }\r\n\r\n    // {player:PersonType,map:0|1,index:number}\r\n    const playerChangePosition = (data: any) => {\r\n      const p = data.player as PersonType\r\n      const index = data.index as number\r\n      const player = players.find(t => t.player.id === p.id)\r\n      const address = store.getAddressByIndex(index, 0)\r\n\r\n      player?.changeAddress(address)\r\n    }\r\n\r\n    onBeforeUnmount(() => {\r\n      bus.off(ACTION.RENDER, render)\r\n      bus.off(ACTION.CHANGE_POSITION, playerChangePosition)\r\n      bus.off(ACTION.ADD_LEVEL, addLevelByAddressIndex)\r\n    })\r\n\r\n    // 处理逻辑 机会/加熟练/其他用户加钱\r\n    const detailWorkEvent = async (player: Player) => {\r\n      const address = store.getCurrentAddress(player)\r\n      if (address.type === PointType.WORK) {\r\n        if (player.player.id === address.options.playerId) {\r\n          // 如果是自己的地盘,加熟练度\r\n\r\n          await addLevel(address)\r\n        } else {\r\n          // 当前地址所属玩家\r\n          const workPlayer = getPlayerById(address.options.playerId)\r\n          const level = address.options.level || 0\r\n          const money = address.options.reward![level]\r\n          // 如果对方玩家在打工地图,给对方玩家加钱\r\n          if (workPlayer.isWork()) {\r\n            appendMessage(`路过${address.options.name},${workPlayer.player.name}赚得金钱:${money}`, player.player)\r\n\r\n            changeMoney(workPlayer, money)\r\n          } else {\r\n            // 给自己加钱\r\n            appendMessage(`路过${address.options.name},对方未在打工状态,${player.player.name}赚得金钱:${money}`, player.player)\r\n\r\n            changeMoney(player, money)\r\n          }\r\n        }\r\n      } else if (address.type === PointType.REWARD) {\r\n        // 机会\r\n\r\n        await rewardRef.value?.show(player, address)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // 处理旅游状态下的业务逻辑\r\n    const detailTravelEvent = async (player: Player) => {\r\n      const index = player.player.map1Index // 当前用户所在地址\r\n      const hotCity = travelMap.value!.getPointValue(index)\r\n\r\n      if (hotCity !== null) {\r\n        appendMessage(`路过热门城市${hotCity.address.options.name},增加${hotCity.point}点积分`, player.player)\r\n\r\n        await travelMap.value!.removeHotCity(hotCity)\r\n\r\n        const isWin = store.addPoint(player.player.id, hotCity.point)\r\n\r\n        if (isWin) {\r\n          bus.emit(ACTION.WIN, player.player.id)\r\n          player.playWin()\r\n\r\n          await winRef.value!.show(player.player.id)\r\n        }\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // 金额变化\r\n    function changeMoney(player: Player, money: number) {\r\n      // player.player.money += money\r\n      const num = store!.changeMoney(player.player.id, money)\r\n      player.player.money = num\r\n    }\r\n\r\n    const addLevelByAddressIndex = (data: any) => {\r\n      const index = data.index as number\r\n      const address = store?.getAddressByIndex(index, 0)\r\n\r\n      return addLevel(address)\r\n    }\r\n\r\n    // 增加熟练度\r\n    async function addLevel(address: MapAddress) {\r\n      let level = address.options.level || 0\r\n      const player = players.find(t => t.player.id === address.options.playerId)\r\n      if (level === 3) {\r\n        showMessage(`${player!.player.name}的${address.options.name}已经达到最高等级`, 2000)\r\n\r\n        return false\r\n      } else {\r\n        level++\r\n        address.options.level = level\r\n        // const cost = address.options.reward![level]\r\n        appendMessage(`路过${address.options.name},熟练度增加:${level}级`, player!.player)\r\n        // 增加星星动画\r\n        await workMap.value?.addStar(address)\r\n        return true\r\n      }\r\n    }\r\n\r\n    const initMapStar = () => {\r\n      store.gameState.workMapList.forEach(w => {\r\n        if (w.type === PointType.WORK) {\r\n          const level = w.options.level!\r\n\r\n          if (level > 0) {\r\n            for (let i = 1; i <= level; i++) {\r\n              workMap.value?.addStar(w, i)\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return {\r\n      map1Init,\r\n      map2Init,\r\n      gameState: store?.gameState,\r\n      // map1Finish,\r\n      isFinish,\r\n      workMap,\r\n      travelMap,\r\n      touchRef,\r\n      numberRef,\r\n      // textRef,\r\n      stepRef,\r\n      rewardRef,\r\n      winRef,\r\n      overRef,\r\n      enabled,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=7bf73162&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7bf73162&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7bf73162\"\n\nexport default script","\r\nimport { defineComponent, ref } from 'vue'\r\nimport GameMenu from './GameMenu.vue'\r\nimport GameView from './GameView/index.vue'\r\nexport default defineComponent({\r\n  components: { GameMenu, GameView },\r\n  setup() {\r\n    // 0 游戏菜单 1 游戏进行中\r\n    const status = ref(0)\r\n\r\n    const startNewGame = () => {\r\n      // console.log('start')\r\n      status.value = 1\r\n    }\r\n\r\n    const readRecord = () => {\r\n      status.value = 1\r\n    }\r\n\r\n    const gameOver = () => {\r\n      status.value = 0\r\n    }\r\n\r\n    return {\r\n      status,\r\n      startNewGame,\r\n      readRecord,\r\n      gameOver,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./Home.vue?vue&type=template&id=085980cb&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=085980cb&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-085980cb\"\n\nexport default script","// import { createRouter, createWebHashHistory, RouteRecordRaw } from 'vue-router'\r\n\r\nimport { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\r\n\r\nimport Home from '../views/Home.vue'\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home,\r\n  },\r\n  // {\r\n  //   path: '/about',\r\n  //   name: 'About',\r\n  //   // route level code-splitting\r\n  //   // this generates a separate chunk (about.[hash].js) for this route\r\n  //   // which is lazy-loaded when the route is visited.\r\n  //   component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue'),\r\n  // },\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes,\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n// import store from './store'\r\n// import { Button } from 'vant'\r\nimport 'normalize.css'\r\n// import 'vant/lib/index.css'\r\n// import animated from 'animate.css'\r\n// Vue\r\n// import 'animate.css'\r\nimport '@/assets/style/global.scss'\r\n\r\nconst app = createApp(App)\r\n// app.use(Button)\r\napp.use(router).mount('#app')\r\n","module.exports = __webpack_public_path__ + \"img/25.bedc725f.png\";","module.exports = __webpack_public_path__ + \"img/22.f143c485.png\";","module.exports = __webpack_public_path__ + \"img/2.46dd2982.jpg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=28568dcd&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AddLevel.vue?vue&type=style&index=0&id=137e4bb3&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserCard.vue?vue&type=style&index=0&id=387f03fa&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/temp.b57f7e1f.jpg\";","module.exports = __webpack_public_path__ + \"img/6.3b6c04ba.png\";","module.exports = __webpack_public_path__ + \"img/22.1b350362.jpg\";","module.exports = __webpack_public_path__ + \"img/7.c2700c1c.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameMenu.vue?vue&type=style&index=0&id=37168e4e&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/13.e39be0f9.jpg\";","module.exports = __webpack_public_path__ + \"img/14.0325741f.jpg\";","module.exports = __webpack_public_path__ + \"img/1.639ae587.png\";","module.exports = __webpack_public_path__ + \"img/27.d7b6ffb3.jpg\";","module.exports = __webpack_public_path__ + \"img/15.afcf6a8d.jpg\";","module.exports = __webpack_public_path__ + \"img/3.58cc6428.jpg\";","module.exports = __webpack_public_path__ + \"img/29.7dbf7d34.jpg\";","module.exports = \"data:image/jpeg;base64,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\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OverView.vue?vue&type=style&index=0&id=5d6454db&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StepNumber.vue?vue&type=style&index=0&id=870b63c6&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HandUpDisplay.vue?vue&type=style&index=0&id=34b4d8eb&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/1.c590b897.jpg\";","module.exports = __webpack_public_path__ + \"img/9.970d17a3.png\";"],"sourceRoot":""}